<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>云野阁</title>
  
  <subtitle>潇洒是一种态度</subtitle>
  <link href="https://marsperl.github.io/atom.xml" rel="self"/>
  
  <link href="https://marsperl.github.io/"/>
  <updated>2024-07-23T16:28:02.405Z</updated>
  <id>https://marsperl.github.io/</id>
  
  <author>
    <name>云野阁</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="https://marsperl.github.io/yyg/0/"/>
    <id>https://marsperl.github.io/yyg/0/</id>
    <published>2024-07-23T16:27:12.946Z</published>
    <updated>2024-07-23T16:28:02.405Z</updated>
    
    
    
    
    <category term="漫谈" scheme="https://marsperl.github.io/categories/%E6%BC%AB%E8%B0%88/"/>
    
    
  </entry>
  
  <entry>
    <title>Docker部署Matomo</title>
    <link href="https://marsperl.github.io/yyg/a52e3ab6/"/>
    <id>https://marsperl.github.io/yyg/a52e3ab6/</id>
    <published>2024-07-23T16:01:32.291Z</published>
    <updated>2024-07-23T16:16:27.672Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Docker部署Matomo"><a href="#Docker部署Matomo" class="headerlink" title="Docker部署Matomo"></a>Docker部署Matomo</h1><h2 id="基础环境"><a href="#基础环境" class="headerlink" title="基础环境"></a>基础环境</h2><p>系统环境：</p><p>操作系统：CentOS Stream 9</p><p>软件环境：</p><p>Docker、Docker Compose</p><h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2><p>（1）安装 yum-utils 软件包（提供 yum-config-manager 实用程序）并设置存储库。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 安装 yum-utils 软件包</span><br><span class="line">yum install -y yum-utils</span><br><span class="line"># 设置docker-ce存储库</span><br><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><p>（2）安装最新版docker和docker compose。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><p>（3）修改Docker的数据目录为“/data/dockerData”，并重启docker服务使配置生效。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 创建Docker守护进程配置文件</span><br><span class="line"># 编辑配置文件/etc/docker/daemon.json，配置docker数据目录</span><br><span class="line">vi /etc/docker/daemon.json</span><br><span class="line">**************************daemon.json**************************</span><br><span class="line">&#123;</span><br><span class="line">  &quot;data-root&quot;: &quot;/data/dockerData&quot;</span><br><span class="line">&#125;</span><br><span class="line">**************************daemon.json**************************</span><br><span class="line"></span><br><span class="line"># 重启docker服务，使配置生效</span><br><span class="line">[root@Book-ELK-VM-113 data]# systemctl restart docker</span><br></pre></td></tr></table></figure><p>（4）启动Docker服务，并设置为开机自启动。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 启动Docker服务</span><br><span class="line">systemctl start docker</span><br><span class="line"># 设置Docker为开机自启动</span><br><span class="line">systemctl enable docker</span><br><span class="line"># 查看Docker服务状态</span><br><span class="line">systemctl status docker</span><br></pre></td></tr></table></figure><h2 id="部署并配置Matomo"><a href="#部署并配置Matomo" class="headerlink" title="部署并配置Matomo"></a>部署并配置Matomo</h2><h3 id="部署Matomo"><a href="#部署Matomo" class="headerlink" title="部署Matomo"></a>部署Matomo</h3><p>（1）创建script目录存放yml文件，编排部署Matomo。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">mkdir /data/script</span><br><span class="line">vi /data/script/matomo.yml</span><br><span class="line">**************************matomo.yml**************************</span><br><span class="line">services:</span><br><span class="line">  matomo-sql:</span><br><span class="line">    # 使用 MySQL 数据库镜像</span><br><span class="line">    image: mysql:latest</span><br><span class="line">    # 容器名称</span><br><span class="line">    container_name: matomo-sql</span><br><span class="line">    # 容器重启策略：如果容器停止，总是重启</span><br><span class="line">    restart: always</span><br><span class="line">    # 配置环境变量</span><br><span class="line">    environment:</span><br><span class="line">      # 设置数据库名</span><br><span class="line">      - MYSQL_DATABASE=matomo</span><br><span class="line">      # 设置数据库用户名</span><br><span class="line">      - MYSQL_USER=matomo</span><br><span class="line">      # 设置数据库用户密码</span><br><span class="line">      - MYSQL_PASSWORD=matomo</span><br><span class="line">      # 设置数据库 root 用户密码</span><br><span class="line">      - MYSQL_ROOT_PASSWORD=matomo</span><br><span class="line">      # 设置时区</span><br><span class="line">      - TZ=Asia/Shanghai</span><br><span class="line">    # 暴露的端口号映射，将 MySQL 的 3306 端口映射到宿主机</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;3306:3306&quot;</span><br><span class="line">    # 将宿主机的目录挂载到容器的 MySQL 数据目录</span><br><span class="line">    volumes:</span><br><span class="line">      - /data/database/matomo-sql:/var/lib/mysql</span><br><span class="line">    # 使用 root 用户权限运行容器</span><br><span class="line">    user: &quot;0&quot;</span><br><span class="line">    # 网络配置</span><br><span class="line">    networks:</span><br><span class="line">      # 使用自定义网络 &#x27;net&#x27;</span><br><span class="line">      net:</span><br><span class="line">        # 为容器分配固定的 IPv4 地址</span><br><span class="line">        ipv4_address: 172.18.0.10</span><br><span class="line"></span><br><span class="line">  matomo-app:</span><br><span class="line">    # 使用 Matomo 应用镜像</span><br><span class="line">    image: matomo:latest</span><br><span class="line">    # 容器名称</span><br><span class="line">    container_name: matomo-app</span><br><span class="line">    # 容器重启策略：如果容器停止，总是重启</span><br><span class="line">    restart: always</span><br><span class="line">    # 链接到 MySQL 数据库服务</span><br><span class="line">    links:</span><br><span class="line">      - matomo-sql</span><br><span class="line">    # 将宿主机的目录挂载到 Matomo 应用目录</span><br><span class="line">    volumes:</span><br><span class="line">      - /data/matomo:/var/www/html</span><br><span class="line">    # 设置环境变量</span><br><span class="line">    environment:</span><br><span class="line">      # 设置时区</span><br><span class="line">      - TZ=Asia/Shanghai</span><br><span class="line">      # 指定数据库主机名为 &#x27;matomo-sql&#x27;</span><br><span class="line">      - MATOMO_DATABASE_HOST=matomo-sql</span><br><span class="line">      # 设置 PHP 内存限制</span><br><span class="line">      - PHP_MEMORY_LIMIT=2048M</span><br><span class="line">      # 指定数据库适配器为 MySQL</span><br><span class="line">      - MATOMO_DATABASE_ADAPTER=mysql</span><br><span class="line">      # 设置数据库表名前缀</span><br><span class="line">      - MATOMO_DATABASE_TABLES_PREFIX=matomo_</span><br><span class="line">      # 指定数据库用户名</span><br><span class="line">      - MATOMO_DATABASE_USERNAME=matomo</span><br><span class="line">      # 指定数据库用户密码</span><br><span class="line">      - MATOMO_DATABASE_PASSWORD=matomo</span><br><span class="line">      # 指定数据库名称</span><br><span class="line">      - MATOMO_DATABASE_DBNAME=matomo</span><br><span class="line">    # 使用 root 用户权限运行容器</span><br><span class="line">    user: &quot;0&quot;</span><br><span class="line">    # 容器端口映射，将 Matomo 的 80 端口映射到宿主机</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;80:80&quot;</span><br><span class="line">    # 网络配置</span><br><span class="line">    networks:</span><br><span class="line">      # 使用自定义网络 &#x27;net&#x27;</span><br><span class="line">      net:</span><br><span class="line">        # 为容器分配固定的 IPv4 地址</span><br><span class="line">        ipv4_address: 172.18.0.11</span><br><span class="line"></span><br><span class="line"># 自定义网络配置</span><br><span class="line">networks:</span><br><span class="line">  # 定义自定义网络 &#x27;net&#x27;</span><br><span class="line">  net:</span><br><span class="line">    # 使用桥接网络驱动</span><br><span class="line">    driver: bridge</span><br><span class="line">    # IP 地址管理配置</span><br><span class="line">    ipam:</span><br><span class="line">      config:</span><br><span class="line">        # 为自定义网络设置子网</span><br><span class="line">        - subnet: 172.18.0.0/24</span><br><span class="line">**************************matomo.yml**************************</span><br></pre></td></tr></table></figure><p>（2）执行Docker Compose创建容器，并查看当前正在运行的 Docker 容器。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker compose -f /data/script/matomo.yml up -d</span><br><span class="line">docker ps</span><br></pre></td></tr></table></figure><h3 id="配置Matomo"><a href="#配置Matomo" class="headerlink" title="配置Matomo"></a>配置Matomo</h3><p>（1）在浏览器中访问<code>http://本机ip</code>，按引导进行安装。</p><img src="/yyg/a52e3ab6/1.png" class="" title="img"><p>（2）在向导”3.数据库设置“界面中查看并修改数据库配置信息，此处的“数据库服务器”名称填写的是数据库容器名称。</p><img src="/yyg/a52e3ab6/2.png" class="" title="img"><p>（3）在向导”5.超级用户“界面中，创建超级用户的用户名、密码及电子邮箱。</p><img src="/yyg/a52e3ab6/3.png" class="" title="img"><p>（4）在向导”6.设置网站“界面中，请设置一个想用Matomo追踪、分析的站点。</p><img src="/yyg/a52e3ab6/4.png" class="" title="img"><p>（5）在向导”7.JavaScript 跟踪代码“界面中，复制代码片段,添加到网站的每个页面，追踪网站的流量。</p><img src="/yyg/a52e3ab6/5.png" class="" title="img"><p>（6）安装完成后登录matomo，在“仪表面板”界面中，选择【INSTALL WITH JAVASRCIPT代码】，查看追踪代码。</p><img src="/yyg/a52e3ab6/6.png" class="" title="img"><p>（7）选择【TEST INSTALLATION】，测试是否能够监控网站流量，当出现”The tracking code is installed successfully! This screen will disappear as soon as some data is tracked for your website.“的绿色字样时，网站流量可正常追踪。</p><img src="/yyg/a52e3ab6/7.png" class="" title="img"><p>（8）选择菜单栏中的”所有网站”，查看所有监控的网站报表及总访问量、访问者、浏览量、活动者、收入等元素。</p><img src="/yyg/a52e3ab6/8.png" class="" title="img"><h3 id="可选配置"><a href="#可选配置" class="headerlink" title="可选配置"></a>可选配置</h3><p>（1）选择“设置”图标，选择“个人”中“设置”，将默认加载的报表日期改为“今天”。</p><p>（2）选择“设置”图标，选择“隐私设置”中“匿名化数据”，取消勾选“隐藏访客的IP地址”。</p><p>（3）选择“设置”图标，选择“网站”中“设置”，新网站默认时区选择“中国-上海”，新网站的默认货币选择“人民币 (¥)”。</p><p>（4）选择“设置”图标，选择“系统”中“地理位置”，将位置信息提供商修改为“DBIP / GeolP 2 (Php)”。</p><p>（5）选择“设置”图标，选择“平台”中“商城”，安装IP2Location、LogViewer、MarketingCampaignsReporting、Profile Gravatar插件，安装LogViewer插件后，需要在本地映射目录/data/matomo/config/中,对global.ini.php中的[log]模块进行修改。修改完成后，重启app容器。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[log]</span><br><span class="line">log_writers[] = file</span><br><span class="line">log_level = INFO</span><br><span class="line"></span><br><span class="line"># 重启app容器</span><br><span class="line">docker restart matomo-app</span><br></pre></td></tr></table></figure><p>（6）启用插件TagManager 、DBStats。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Docker部署Matomo&quot;&gt;&lt;a href=&quot;#Docker部署Matomo&quot; class=&quot;headerlink&quot; title=&quot;Docker部署Matomo&quot;&gt;&lt;/a&gt;Docker部署Matomo&lt;/h1&gt;&lt;h2 id=&quot;基础环境&quot;&gt;&lt;a href=&quot;#基</summary>
      
    
    
    
    <category term="Linux运维" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    <category term="容器化" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/"/>
    
    <category term="docker" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/docker/"/>
    
    <category term="网络分析" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90/"/>
    
    
    <category term="docker" scheme="https://marsperl.github.io/tags/docker/"/>
    
    <category term="Matomo" scheme="https://marsperl.github.io/tags/Matomo/"/>
    
  </entry>
  
  <entry>
    <title>LAMP部署</title>
    <link href="https://marsperl.github.io/yyg/a8d3d305/"/>
    <id>https://marsperl.github.io/yyg/a8d3d305/</id>
    <published>2024-07-23T16:00:18.437Z</published>
    <updated>2024-07-23T16:05:37.133Z</updated>
    
    <content type="html"><![CDATA[<h1 id="LAMP部署"><a href="#LAMP部署" class="headerlink" title="LAMP部署"></a>LAMP部署</h1><h2 id="基础环境"><a href="#基础环境" class="headerlink" title="基础环境"></a>基础环境</h2><p>系统环境：<br>CentOS Stream 9</p><p>软件环境：<br>Apache-2.4.57<br>Mysql-8.0.36（mariaDB）<br>PHP-8.0.30</p><h2 id="部署过程"><a href="#部署过程" class="headerlink" title="部署过程"></a>部署过程</h2><h3 id="配置安全策略"><a href="#配置安全策略" class="headerlink" title="配置安全策略"></a>配置安全策略</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --add-port=80/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure><h3 id="安装Apache"><a href="#安装Apache" class="headerlink" title="安装Apache"></a>安装Apache</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum -y install httpd</span><br><span class="line">systemctl start httpd</span><br><span class="line">systemctl enable httpd</span><br><span class="line"># 查看版本</span><br><span class="line">httpd -v</span><br></pre></td></tr></table></figure><h3 id="安装PHP"><a href="#安装PHP" class="headerlink" title="安装PHP"></a>安装PHP</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 安装php相应模块</span><br><span class="line">yum -y install php php-curl php-dom php-exif php-fileinfo php-fpm php-gd php-hash php-mbstring php-mysqli php-openssl php-pcre php-xml</span><br><span class="line"># 查看版本</span><br><span class="line">php -v</span><br><span class="line"># 测试php</span><br><span class="line">echo &quot;&lt;?php phpinfo(); ?&gt;&quot; &gt; /var/www/html/test.php</span><br><span class="line">#在浏览器中访问http://本机ip/test.php</span><br><span class="line"># 删除测试用例</span><br><span class="line">rm -f /var/www/html/test.php</span><br></pre></td></tr></table></figure><h3 id="安装Mysql"><a href="#安装Mysql" class="headerlink" title="安装Mysql"></a>安装Mysql</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yum -y install mysql-server</span><br><span class="line"># 查看版本</span><br><span class="line">mysql -V</span><br><span class="line">systemctl start mysqld</span><br><span class="line">systemctl enable mysqld</span><br><span class="line"># 查看MySQL的初始密码</span><br><span class="line">grep &quot;password&quot; /var/log/mysql/mysqld.log</span><br><span class="line"># MySQL的安全性配置</span><br><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure><blockquote><p>Securing the MySQL server deployment.</p><p>Connecting to MySQL using a blank password.</p><p>VALIDATE PASSWORD COMPONENT can be used to test passwords<br>and improve security. It checks the strength of password<br>and allows the users to set only those passwords which are<br>secure enough. Would you like to setup VALIDATE PASSWORD component?</p><p>Press y|Y for Yes, any other key for No: y</p><p>There are three levels of password validation policy:</p><p>LOW Length &gt;= 8<br>MEDIUM Length &gt;= 8, numeric, mixed case, and special characters<br>STRONG Length &gt;= 8, numeric, mixed case, special characters and dictionary file</p><p>Please enter 0 = LOW, 1 = MEDIUM and 2 = STRONG: 0<br>Please set the password for root here.</p><p>New password:</p><p>Re-enter new password:</p><p>Estimated strength of the password: 50<br>Do you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : y<br>By default, a MySQL installation has an anonymous user,<br>allowing anyone to log into MySQL without having to have<br>a user account created for them. This is intended only for<br>testing, and to make the installation go a bit smoother.<br>You should remove them before moving into a production<br>environment.</p><p>Remove anonymous users? (Press y|Y for Yes, any other key for No) : y<br>Success.</p><p>Normally, root should only be allowed to connect from<br>‘localhost’. This ensures that someone cannot guess at<br>the root password from the network.</p><p>Disallow root login remotely? (Press y|Y for Yes, any other key for No) : y<br>Success.</p><p>By default, MySQL comes with a database named ‘test’ that<br>anyone can access. This is also intended only for testing,<br>and should be removed before moving into a production<br>environment.</p><p>Remove test database and access to it? (Press y|Y for Yes, any other key for No) : y</p><ul><li>Dropping test database…<br>Success.</li><li>Removing privileges on test database…<br>Success.</li></ul><p>Reloading the privilege tables will ensure that all changes<br>made so far will take effect immediately.</p><p>Reload privilege tables now? (Press y|Y for Yes, any other key for No) : y<br>Success.</p><p>All done!</p></blockquote><h3 id="验证测试"><a href="#验证测试" class="headerlink" title="验证测试"></a>验证测试</h3><p>安装WordPress进行验证LAMP的验证测试</p><p>（1）下载并配置WordPress</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www/html/</span><br><span class="line"># 安装下载解压工具</span><br><span class="line">yum -y install wget tar</span><br><span class="line"># 下载并解压WordPress程序</span><br><span class="line">wget https://cn.wordpress.org/latest-zh_CN.tar.gz</span><br><span class="line">tar zxvf latest-zh_CN.tar.gz</span><br></pre></td></tr></table></figure><p>（2）创建数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create user &#x27;wordpress&#x27;@&#x27;localhost&#x27; identified by &#x27;wordpress@123&#x27;;</span><br><span class="line">grant all privileges on wordpress.* to &#x27;wordpress&#x27;@&#x27;localhost&#x27;;</span><br><span class="line">flush privileges;</span><br><span class="line">exit;</span><br></pre></td></tr></table></figure><p>（3）重启服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart httpd</span><br></pre></td></tr></table></figure><p>（4）WordPress初始化配置</p><p>在<code>/var/www/html/wordpress</code>中创建wp-config.php文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">vi /var/www/html/wordpress/wp-config.php</span><br><span class="line">**************************wp-config.php**************************</span><br><span class="line">&lt;?php</span><br><span class="line">/**</span><br><span class="line"> * WordPress 基础配置文件</span><br><span class="line"> *</span><br><span class="line"> * 这个文件被安装程序用于自动生成 wp-config.php 配置文件</span><br><span class="line"> * 您不必使用网站，可以将这个文件复制到「wp-config.php」并填写这些值。</span><br><span class="line"> *</span><br><span class="line"> * 本文件包含以下配置选项：</span><br><span class="line"> *</span><br><span class="line"> * * 数据库设置</span><br><span class="line"> * * 密钥</span><br><span class="line"> * * 数据库表名前缀</span><br><span class="line"> * * ABSPATH</span><br><span class="line"> *</span><br><span class="line"> * @link https://wordpress.org/documentation/article/editing-wp-config-php/</span><br><span class="line"> *</span><br><span class="line"> * @package WordPress</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// ** 数据库设置 - 您可以从您的主机获取这些信息 ** //</span><br><span class="line">/** WordPress 数据库名称 */</span><br><span class="line">define( &#x27;DB_NAME&#x27;, &#x27;wordpress&#x27; );</span><br><span class="line"></span><br><span class="line">/** 数据库用户名 */</span><br><span class="line">define( &#x27;DB_USER&#x27;, &#x27;wordpress&#x27; );</span><br><span class="line"></span><br><span class="line">/** 数据库密码 */</span><br><span class="line">define( &#x27;DB_PASSWORD&#x27;, &#x27;wordpress@123&#x27; );</span><br><span class="line"></span><br><span class="line">/** 数据库主机 */</span><br><span class="line">define( &#x27;DB_HOST&#x27;, &#x27;localhost&#x27; );</span><br><span class="line"></span><br><span class="line">/** 创建表时使用的数据库字符集。 */</span><br><span class="line">define( &#x27;DB_CHARSET&#x27;, &#x27;utf8mb4&#x27; );</span><br><span class="line"></span><br><span class="line">/** 数据库排序规则类型。如不确定，请勿更改。 */</span><br><span class="line">define( &#x27;DB_COLLATE&#x27;, &#x27;&#x27; );</span><br><span class="line"></span><br><span class="line">/**#@+</span><br><span class="line"> * 身份验证唯一密钥与盐。</span><br><span class="line"> *</span><br><span class="line"> * 将这些更改为任意独一无二的字符串！您可以使用</span><br><span class="line"> * &#123;@link https://api.wordpress.org/secret-key/1.1/salt/ WordPress.org 密钥服务&#125;</span><br><span class="line"> * 生成这些。</span><br><span class="line"> *</span><br><span class="line"> * 您可以随时更改这些内容以使所有现有 cookies 失效。</span><br><span class="line"> * 这将强制所有用户必须重新登录。</span><br><span class="line"> *</span><br><span class="line"> * @since 2.6.0</span><br><span class="line"> */</span><br><span class="line">define( &#x27;AUTH_KEY&#x27;,         &#x27;T]opAWiO&amp;i]=T0%gG|Cr8ZiHC4(AjG3#,Oa%Z,Xus&#125;tB:CMH*m?TAJ!g8rCgn9G&#123;&#x27; );</span><br><span class="line">define( &#x27;SECURE_AUTH_KEY&#x27;,  &#x27;u]bD9(4N&lt;|LD=!XlaLf8mI5vQM!!Wy,`=9[2g1g86Cp~EZnUe$q&#123;P3W.[aH$n,bV&#x27; );</span><br><span class="line">define( &#x27;LOGGED_IN_KEY&#x27;,    &#x27;-&#125;sR0i@QOgDAbYWs:blZjDaJF-NdN|l5Vtiw2kVy(TUd0]:7~_)Lsg(t5kP&gt;FVs~&#x27; );</span><br><span class="line">define( &#x27;NONCE_KEY&#x27;,        &#x27;:*qn^%vaF;vWh$f/rR*SI8]Er=jpW&#123;bKRWt4/F25b:ULoJGi&amp;:*B&#123;SP9D$Dx]t1=&#x27; );</span><br><span class="line">define( &#x27;AUTH_SALT&#x27;,        &#x27;:1NyIcq-rH.2Qe@cH&#123;xbKICQ`&gt;!bmz_cKl@SQcLYM]||y9&#125;dII:4j&lt;d~sG~[mGR/&#x27; );</span><br><span class="line">define( &#x27;SECURE_AUTH_SALT&#x27;, &#x27;IRC$m2W;1CZ`PaR315_evXujKAgHr?x1.fLws,8tJ_$g+0EJkY?Y$LF*QXi*7h=l&#x27; );</span><br><span class="line">define( &#x27;LOGGED_IN_SALT&#x27;,   &#x27;Zcg^hRDB5DXV&lt;v?NxVNBMoT=s#mFvCw$A%!8&#123;uBdl6EeZ`IhB.~8FNPprKgB&gt;sKZ&#x27; );</span><br><span class="line">define( &#x27;NONCE_SALT&#x27;,       &#x27;T#D,&#123;:EEHw`~F~B2%R/TP*Kt-,/-| /](V-MJz7Nr?)XBr~rnEY*Hfs1rwUUMYi-&#x27; );</span><br><span class="line"></span><br><span class="line">/**#@-*/</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * WordPress 数据表前缀。</span><br><span class="line"> *</span><br><span class="line"> * 如果您为每个安装分配一个唯一前缀，您可以在一个数据库中拥有多个安装。</span><br><span class="line"> * 请只使用数字、字母和下划线！</span><br><span class="line"> */</span><br><span class="line">$table_prefix = &#x27;wp_&#x27;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 开发者专用：WordPress 调试模式。</span><br><span class="line"> *</span><br><span class="line"> * 将此值更改为 true 以启用开发过程中的通知显示。</span><br><span class="line"> * 强烈建议插件和主题开发人员在其开发环境中使用 WP_DEBUG。</span><br><span class="line"> *</span><br><span class="line"> * 有关可用于调试的其他常量的信息，请访问文档。</span><br><span class="line"> *</span><br><span class="line"> * @link https://wordpress.org/documentation/article/debugging-in-wordpress/</span><br><span class="line"> */</span><br><span class="line">define( &#x27;WP_DEBUG&#x27;, false );</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 简体中文专属：ICP 备案号显示</span><br><span class="line"> *</span><br><span class="line"> * 在设置 → 常规中设置你的 ICP 备案号。</span><br><span class="line"> * 可调用简码 [cn_icp] 或函数 cn_icp() 显示。</span><br><span class="line"> *</span><br><span class="line"> * @since 6.5.0</span><br><span class="line"> * @link https://cn.wordpress.org/support/i10n-features/</span><br><span class="line"> */</span><br><span class="line">define( &#x27;CN_ICP&#x27;, true );</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 简体中文专属：公安备案号显示</span><br><span class="line"> *</span><br><span class="line"> * 在设置 → 常规中设置你的公安备案号。</span><br><span class="line"> * 可调用简码 [cn_ga] 或函数 cn_ga() 显示。</span><br><span class="line"> *</span><br><span class="line"> * @since 6.5.0</span><br><span class="line"> * @link https://cn.wordpress.org/support/i10n-features/</span><br><span class="line"> */</span><br><span class="line">define( &#x27;CN_GA&#x27;, true );</span><br><span class="line"></span><br><span class="line">/* 在这行和「停止编辑」行之间添加任何自定义值。 */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/* 就这样，停止编辑！祝您使用愉快。 */</span><br><span class="line"></span><br><span class="line">/** WordPress 目录的绝对路径。 */</span><br><span class="line">if ( ! defined( &#x27;ABSPATH&#x27; ) ) &#123;</span><br><span class="line">define( &#x27;ABSPATH&#x27;, __DIR__ . &#x27;/&#x27; );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** 设置 WordPress 变量和包含的文件。 */</span><br><span class="line">require_once ABSPATH . &#x27;wp-settings.php&#x27;;</span><br><span class="line">**************************wp-config.php**************************</span><br></pre></td></tr></table></figure><p>在浏览器中输入<code>http://本地ip/wordpress</code>，进行初始化配置。配置完成并登录WordPress之后，LAMP验证测试成功。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;LAMP部署&quot;&gt;&lt;a href=&quot;#LAMP部署&quot; class=&quot;headerlink&quot; title=&quot;LAMP部署&quot;&gt;&lt;/a&gt;LAMP部署&lt;/h1&gt;&lt;h2 id=&quot;基础环境&quot;&gt;&lt;a href=&quot;#基础环境&quot; class=&quot;headerlink&quot; title=&quot;基</summary>
      
    
    
    
    <category term="Linux运维" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    <category term="Web服务架构部署" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/Web%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E9%83%A8%E7%BD%B2/"/>
    
    
    <category term="Linux" scheme="https://marsperl.github.io/tags/Linux/"/>
    
    <category term="Apache" scheme="https://marsperl.github.io/tags/Apache/"/>
    
    <category term="Mysql" scheme="https://marsperl.github.io/tags/Mysql/"/>
    
    <category term="PHP" scheme="https://marsperl.github.io/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>LNMP部署</title>
    <link href="https://marsperl.github.io/yyg/776a1cd4/"/>
    <id>https://marsperl.github.io/yyg/776a1cd4/</id>
    <published>2024-07-23T15:33:41.721Z</published>
    <updated>2024-07-23T15:58:44.956Z</updated>
    
    <content type="html"><![CDATA[<h1 id="LNMP部署"><a href="#LNMP部署" class="headerlink" title="LNMP部署"></a>LNMP部署</h1><h2 id="基础环境"><a href="#基础环境" class="headerlink" title="基础环境"></a>基础环境</h2><p>系统环境：CentOS Stream 9</p><p>软件环境：nginx-1.20.1、mysql-8.0.36（mariaDB）、php-8.0.30</p><h2 id="部署过程"><a href="#部署过程" class="headerlink" title="部署过程"></a>部署过程</h2><h3 id="方案一：yum安装"><a href="#方案一：yum安装" class="headerlink" title="方案一：yum安装"></a>方案一：yum安装</h3><h4 id="步骤一：配置安全策略"><a href="#步骤一：配置安全策略" class="headerlink" title="步骤一：配置安全策略"></a>步骤一：配置安全策略</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 开放80端口</span><br><span class="line">firewall-cmd --add-port=80/tcp --permanent</span><br><span class="line">sudo firewall-cmd --reload &amp;&amp; sudo firewall-cmd --list-all</span><br><span class="line"># 关闭SELinux</span><br><span class="line">setenforce 0</span><br><span class="line">sed -i &quot;s/SELINUX=enforcing/SELINUX=disabled/g&quot; /etc/selinux/config</span><br></pre></td></tr></table></figure><h4 id="步骤二：安装nginx"><a href="#步骤二：安装nginx" class="headerlink" title="步骤二：安装nginx"></a>步骤二：安装nginx</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install nginx</span><br><span class="line"># 查看nginx版本</span><br><span class="line">nginx -v</span><br></pre></td></tr></table></figure><h4 id="步骤三：安装并配置mysql"><a href="#步骤三：安装并配置mysql" class="headerlink" title="步骤三：安装并配置mysql"></a>步骤三：安装并配置mysql</h4><p>安装mysql</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum -y install mysql-server</span><br><span class="line">#查看mysql版本</span><br><span class="line">mysql -V</span><br><span class="line"># 启动并设置开机自启</span><br><span class="line">systemctl start mysqld</span><br><span class="line">systemctl enable mysqld</span><br></pre></td></tr></table></figure><p>配置mysql</p><p>（1）查看root用户的初始密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &#x27;password&#x27; /var/log/mysql/mysqld.log</span><br></pre></td></tr></table></figure><blockquote><p>2024-05-08T09:37:31.765242Z 6 [Warning] [MY-010453] [Server] root@localhost is created with an empty password ! Please consider switching off the —initialize-insecure option.</p></blockquote><p>（2）配置MySQL的安全性</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure><blockquote><p>Securing the MySQL server deployment.</p><p>Connecting to MySQL using a blank password.</p><p>VALIDATE PASSWORD COMPONENT can be used to test passwords<br>and improve security. It checks the strength of password<br>and allows the users to set only those passwords which are<br>secure enough. Would you like to setup VALIDATE PASSWORD component?</p><p><strong>设置MySQL的新密码</strong></p><p>Press y|Y for Yes, any other key for No: y</p><p>There are three levels of password validation policy:</p><p>LOW Length &gt;= 8<br>MEDIUM Length &gt;= 8, numeric, mixed case, and special characters<br>STRONG Length &gt;= 8, numeric, mixed case, special characters and dictionary file</p><p><strong>设置的密码强度</strong></p><p>Please enter 0 = LOW, 1 = MEDIUM and 2 = STRONG: 0<br>Please set the password for root here.</p><p>New password:</p><p>Re-enter new password:</p><p>Estimated strength of the password: 50<br>Do you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : y<br>By default, a MySQL installation has an anonymous user,<br>allowing anyone to log into MySQL without having to have<br>a user account created for them. This is intended only for<br>testing, and to make the installation go a bit smoother.<br>You should remove them before moving into a production<br>environment.</p><p><strong>删除匿名用户</strong></p><p>Remove anonymous users? (Press y|Y for Yes, any other key for No) : y<br>Success.</p><p>Normally, root should only be allowed to connect from<br>‘localhost’. This ensures that someone cannot guess at<br>the root password from the network.</p><p><strong>禁止使用root用户远程登录MySQL</strong></p><p>Disallow root login remotely? (Press y|Y for Yes, any other key for No) : y<br>Success.</p><p>By default, MySQL comes with a database named ‘test’ that<br>anyone can access. This is also intended only for testing,<br>and should be removed before moving into a production<br>environment.</p><p><strong>删除test库以及用户对test库的访问权限</strong></p><p>Remove test database and access to it? (Press y|Y for Yes, any other key for No) : y</p><ul><li>Dropping test database…<br>Success.</li><li>Removing privileges on test database…<br>Success.</li></ul><p>Reloading the privilege tables will ensure that all changes<br>made so far will take effect immediately.</p><p><strong>重新加载授权表</strong></p><p>Reload privilege tables now? (Press y|Y for Yes, any other key for No) : y<br>Success.</p><p>All done!</p></blockquote><h4 id="步骤四：安装php"><a href="#步骤四：安装php" class="headerlink" title="步骤四：安装php"></a>步骤四：安装php</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 下载php组件</span><br><span class="line"> yum install -y php php-cli php-fpm php-common php-mysqlnd php-gd php-mbstring</span><br><span class="line"># 查看php版本</span><br><span class="line"> php -v</span><br></pre></td></tr></table></figure><p>修改nginx配置文件以启用php</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># 备份Nginx配置文件</span><br><span class="line">cp /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak</span><br><span class="line"># 在Nginx配置文件中修改内容，在server部分添加内容</span><br><span class="line">vi /etc/nginx/nginx.conf</span><br><span class="line">**************************nginx.conf**************************</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        listen       [::]:80;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /data; #网站根目录</span><br><span class="line"></span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line">        location / &#123; #添加</span><br><span class="line">            index index.php index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        location ~ .php$ &#123;</span><br><span class="line">            root /data; #网站根目录</span><br><span class="line">            fastcgi_pass 127.0.0.1:9000; #Nginx通过本机的9000端口将PHP请求转发给PHP-FPM进行处理</span><br><span class="line">            fastcgi_index index.php;</span><br><span class="line">            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">            include fastcgi_params; #Nginx调用fastcgi接口处理PHP请求</span><br><span class="line">        &#125;</span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">**************************nginx.conf**************************</span><br><span class="line"></span><br><span class="line"># 启动nginx，并设置开机自启</span><br><span class="line">systemctl start nginx</span><br><span class="line">systemctl enable nginx</span><br></pre></td></tr></table></figure><p>配置并验证php</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 保证 nginx 进程的管理用户和 PHP 服务进程的管理用户保持一致</span><br><span class="line">vi /etc/php-fpm.d/www.conf</span><br><span class="line">user = nginx</span><br><span class="line">group = nginx</span><br><span class="line"># 重启nginx</span><br><span class="line">systemctl restart nginx</span><br><span class="line"></span><br><span class="line"># 创建网站根目录</span><br><span class="line">mkdir /data</span><br><span class="line"># 编写测试php界面</span><br><span class="line">echo &quot;&lt;?php echo phpinfo(); ?&gt;&quot; &gt;/data/index.php</span><br><span class="line"># 启动php-fpm，并设置开机自启</span><br><span class="line">systemctl start php-fpm</span><br><span class="line">systemctl enable php-fpm</span><br></pre></td></tr></table></figure><h4 id="步骤五：访问测试"><a href="#步骤五：访问测试" class="headerlink" title="步骤五：访问测试"></a>步骤五：访问测试</h4><p>在浏览器中输入<code>http://本机ip/index.php</code>进行访问，如下图所示，表示LNMP环境部署成功。</p><img src="/yyg/776a1cd4/1.png" class="" title="img"><h3 id="方案二：脚本一键安装"><a href="#方案二：脚本一键安装" class="headerlink" title="方案二：脚本一键安装"></a>方案二：脚本一键安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget</span><br><span class="line"># 下载lnmp安装脚本</span><br><span class="line">wget https://soft.lnmp.com/lnmp/lnmp2.1beta.tar.gz</span><br><span class="line"># 解压</span><br><span class="line">tar -vzxf lnmp2.1beta.tar.gz</span><br><span class="line">cd lnmp2.1</span><br><span class="line"># 执行脚本</span><br><span class="line">./install.sh</span><br><span class="line"># 按引导进行安装即可</span><br></pre></td></tr></table></figure><p>在浏览器<code>http://本机ip/</code>访问，出现以下界面，即为部署成功。</p><img src="/yyg/776a1cd4/2.png" class="" title="img"><p>打开lnmp2.1/conf/nginx.conf文件，查看其网站根目录为/home/wwwroot/default，</p><p>在其网站根目录/home/wwwroot/default中# 编写测试php界面，在浏览器中输入<code>http://本机ip/index.php</code>进行访问，结果如方案一中的《步骤五》中的图所示，即为成功。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;&lt;?php echo phpinfo(); ?&gt;&quot; &gt;/data/index.php</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;LNMP部署&quot;&gt;&lt;a href=&quot;#LNMP部署&quot; class=&quot;headerlink&quot; title=&quot;LNMP部署&quot;&gt;&lt;/a&gt;LNMP部署&lt;/h1&gt;&lt;h2 id=&quot;基础环境&quot;&gt;&lt;a href=&quot;#基础环境&quot; class=&quot;headerlink&quot; title=&quot;基</summary>
      
    
    
    
    <category term="Linux运维" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    <category term="Web服务架构部署" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/Web%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E9%83%A8%E7%BD%B2/"/>
    
    
    <category term="Linux" scheme="https://marsperl.github.io/tags/Linux/"/>
    
    <category term="Mysql" scheme="https://marsperl.github.io/tags/Mysql/"/>
    
    <category term="PHP" scheme="https://marsperl.github.io/tags/PHP/"/>
    
    <category term="Nginx" scheme="https://marsperl.github.io/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>ELK | 使用 docker部署三节点 Elasticsearch 集群</title>
    <link href="https://marsperl.github.io/yyg/56088d5a/"/>
    <id>https://marsperl.github.io/yyg/56088d5a/</id>
    <published>2024-07-23T15:28:20.402Z</published>
    <updated>2024-07-23T15:53:22.184Z</updated>
    
    <content type="html"><![CDATA[<h1 id="使用-docker部署三节点-Elasticsearch-集群-ELK"><a href="#使用-docker部署三节点-Elasticsearch-集群-ELK" class="headerlink" title="使用 docker部署三节点 Elasticsearch 集群(ELK)"></a>使用 docker部署三节点 Elasticsearch 集群(ELK)</h1><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><ol><li><p>硬件环境</p><p>操作系统：Centos Stream 9</p><p>CPU：4颗</p><p>内存：8GB</p><p>硬盘：50GB</p></li><li><p>软件环境</p><p>docker版本：26.1.0</p><p>docker compose版本：v2.26.1</p></li></ol><h2 id="部署过程"><a href="#部署过程" class="headerlink" title="部署过程"></a>部署过程</h2><h3 id="准备基础环境，安装Docker"><a href="#准备基础环境，安装Docker" class="headerlink" title="准备基础环境，安装Docker"></a>准备基础环境，安装Docker</h3><p>1、安装 yum-utils 软件包（提供 yum-config-manager 实用程序）并设置存储库，命令如下。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 安装 yum-utils 软件包</span><br><span class="line">yum install -y yum-utils</span><br><span class="line"># 设置docker-ce存储库</span><br><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><p>2、安装最新版docker及其组件，命令如下。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><p>3、启动Docker服务，并设置为开机自启动，命令如下。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 启动Docker服务</span><br><span class="line">systemctl start docker</span><br><span class="line"># 设置Docker为开机自启动</span><br><span class="line">systemctl enable docker</span><br><span class="line"># 查看Docker服务状态</span><br><span class="line">systemctl status docker</span><br></pre></td></tr></table></figure><p>4、修改Docker的数据目录为“/data/dockerData”，并重启docker服务使配置生效。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 创建Docker守护进程配置文件</span><br><span class="line"># 编辑配置文件/etc/docker/daemon.json，配置docker数据目录</span><br><span class="line">vi /etc/docker/daemon.json</span><br><span class="line">**************************daemon.json**************************</span><br><span class="line">&#123;</span><br><span class="line">  &quot;data-root&quot;: &quot;/data/dockerData&quot;</span><br><span class="line">&#125;</span><br><span class="line">**************************daemon.json**************************</span><br><span class="line"></span><br><span class="line"># 重启docker服务，使配置生效</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><p>5、设置与内存映射相关的内核参数为262144，查看应用到系统的内核参数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;vm.max_map_count=262144&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure><p>6、配置防火墙策略</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --add-port=9200/tcp --permanent</span><br><span class="line">firewall-cmd --add-port=80/tcp --permanent</span><br><span class="line">firewall-cmd --add-port=443/tcp --permanent</span><br><span class="line">firewall-cmd --add-port=5601/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure><h3 id="部署elk集群"><a href="#部署elk集群" class="headerlink" title="部署elk集群"></a>部署elk集群</h3><p>1、创建构建容器所需要的文件目录，并赋予相应的访问权限。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /data</span><br><span class="line">mkdir es-node1  es-node2  es-node3  elk-kibana</span><br><span class="line">chmod g+rwx es-node1  es-node2  es-node3  elk-kibana</span><br><span class="line">chgrp 0 es-node1  es-node2  es-node3  elk-kibana</span><br></pre></td></tr></table></figure><p>2、在/data/script 目录下，创建并编辑 .env 文件，用来配置elk的环境变量。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mkdir /data/script</span><br><span class="line">vi /data/script/.env</span><br><span class="line">**************************.env**************************</span><br><span class="line"># Elasticsearch的密码</span><br><span class="line">ELASTIC_PASSWORD=elk#bd@123</span><br><span class="line"># Kibana的密码</span><br><span class="line">KIBANA_PASSWORD=elk#bd@123</span><br><span class="line"># Elastic Stack的版本号</span><br><span class="line">STACK_VERSION=8.13.3</span><br><span class="line"># Elastic Stack的集群名称</span><br><span class="line">CLUSTER_NAME=ELK-docker-Cluster</span><br><span class="line"># 指定Elastic Stack的许可证类型</span><br><span class="line">LICENSE=basic</span><br><span class="line"># 指定Elasticsearch的端口号</span><br><span class="line">ES_PORT=9200</span><br><span class="line"># 指定Kibana的端口号</span><br><span class="line">KIBANA_PORT=5601</span><br><span class="line"># 指定内存限制</span><br><span class="line">MEM_LIMIT=2147483648</span><br><span class="line"># 指定Docker Compose项目的名称</span><br><span class="line">COMPOSE_PROJECT_NAME=elk-docker-project</span><br><span class="line">**************************.env**************************</span><br></pre></td></tr></table></figure><p>3、创建logstash容器所需的目录和配置文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p logstash/config logstash/pipeline</span><br><span class="line">echo &#x27;http.host: &quot;0.0.0.0&quot;&#x27; &gt; /data/logstash/config/logstash.yml</span><br><span class="line">vi /data/logstash/pipeline/logstash.conf</span><br><span class="line">**************************logstash.conf**************************</span><br><span class="line">input &#123;</span><br><span class="line">  beats &#123;</span><br><span class="line">    port =&gt; 5044</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output &#123;</span><br><span class="line">  elasticsearch &#123;</span><br><span class="line">    hosts =&gt; [&quot;https://es-node1:9200&quot;]</span><br><span class="line">    index =&gt; &quot;%&#123;[@metadata][beat]&#125;-%&#123;[@metadata][version]&#125;-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class="line">    user =&gt; &quot;elastic&quot;</span><br><span class="line">    password =&gt; &quot;elk#bd@123&quot;</span><br><span class="line">    cacert=&gt; &quot;/usr/share/logstash/config/certs/ca/ca.crt&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">**************************logstash.conf**************************</span><br></pre></td></tr></table></figure><p>4、创建docker compose文件，编排创建es初始化节点、es三节点、Kibana、logstash容器。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br></pre></td><td class="code"><pre><span class="line">vi /data/script/elk.yml</span><br><span class="line">**************************elk.yml**************************</span><br><span class="line">services:</span><br><span class="line">  es-setup:</span><br><span class="line">    image: docker.elastic.co/elasticsearch/elasticsearch:$&#123;STACK_VERSION&#125;</span><br><span class="line">    container_name: es-setup</span><br><span class="line">    volumes:</span><br><span class="line">      - /data/elk-certs:/usr/share/elasticsearch/config/certs</span><br><span class="line">    user: &quot;0&quot;</span><br><span class="line">    networks:</span><br><span class="line">      net:</span><br><span class="line">        ipv4_address: 172.20.100.10</span><br><span class="line">    command: &gt;</span><br><span class="line">      bash -c &#x27;</span><br><span class="line">        if [ x$&#123;ELASTIC_PASSWORD&#125; == x ]; then</span><br><span class="line">          echo &quot;Set the ELASTIC_PASSWORD environment variable in the .env file&quot;;</span><br><span class="line">          exit 1;</span><br><span class="line">        elif [ x$&#123;KIBANA_PASSWORD&#125; == x ]; then</span><br><span class="line">          echo &quot;Set the KIBANA_PASSWORD environment variable in the .env file&quot;;</span><br><span class="line">          exit 1;</span><br><span class="line">        fi;</span><br><span class="line">        </span><br><span class="line">        if [ ! -f config/certs/ca.zip ]; then</span><br><span class="line">          echo &quot;Creating CA&quot;;</span><br><span class="line">          bin/elasticsearch-certutil ca --silent --pem -out config/certs/ca.zip;</span><br><span class="line">          unzip config/certs/ca.zip -d config/certs;</span><br><span class="line">        fi;</span><br><span class="line">        if [ ! -f config/certs/certs.zip ]; then</span><br><span class="line">          echo &quot;Creating certs&quot;;</span><br><span class="line">          echo -ne \</span><br><span class="line">          &quot;instances:\n&quot;\</span><br><span class="line">          &quot;  - name: es-node1\n&quot;\</span><br><span class="line">          &quot;    dns:\n&quot;\</span><br><span class="line">          &quot;      - es-node1\n&quot;\</span><br><span class="line">          &quot;      - localhost\n&quot;\</span><br><span class="line">          &quot;    ip:\n&quot;\</span><br><span class="line">          &quot;      - 127.0.0.1\n&quot;\</span><br><span class="line">          &quot;  - name: es-node2\n&quot;\</span><br><span class="line">          &quot;    dns:\n&quot;\</span><br><span class="line">          &quot;      - es-node2\n&quot;\</span><br><span class="line">          &quot;      - localhost\n&quot;\</span><br><span class="line">          &quot;    ip:\n&quot;\</span><br><span class="line">          &quot;      - 127.0.0.1\n&quot;\</span><br><span class="line">          &quot;  - name: es-node3\n&quot;\</span><br><span class="line">          &quot;    dns:\n&quot;\</span><br><span class="line">          &quot;      - es-node3\n&quot;\</span><br><span class="line">          &quot;      - localhost\n&quot;\</span><br><span class="line">          &quot;    ip:\n&quot;\</span><br><span class="line">          &quot;      - 127.0.0.1\n&quot;\</span><br><span class="line">          &gt; config/certs/instances.yml;</span><br><span class="line">          bin/elasticsearch-certutil cert --silent --pem -out config/certs/certs.zip --in config/certs/instances.yml --ca-cert config/certs/ca/ca.crt --ca-key config/certs/ca/ca.key;</span><br><span class="line">          unzip config/certs/certs.zip -d config/certs;</span><br><span class="line">        fi;</span><br><span class="line"></span><br><span class="line">        echo &quot;Setting file permissions&quot;;</span><br><span class="line">        chown -R root:root config/certs;</span><br><span class="line">        find . -type d -exec chmod 750 \&#123;\&#125; \;;</span><br><span class="line">        find . -type f -exec chmod 640 \&#123;\&#125; \;;</span><br><span class="line">        echo &quot;Waiting for Elasticsearch availability&quot;;</span><br><span class="line">        until curl -s --cacert config/certs/ca/ca.crt https://es-node1:9200 | grep -q &quot;missing authentication credentials&quot;; do sleep 30; done;</span><br><span class="line">        echo &quot;Setting kibana_system password&quot;;</span><br><span class="line">        until curl -s -X POST --cacert config/certs/ca/ca.crt -u &quot;elastic:$&#123;ELASTIC_PASSWORD&#125;&quot; -H &quot;Content-Type: application/json&quot; https://es-node1:9200/_security/user/kibana_system/_password -d &quot;&#123;\&quot;password\&quot;:\&quot;$&#123;KIBANA_PASSWORD&#125;\&quot;&#125;&quot; | grep -q &quot;^&#123;&#125;&quot;; do sleep 10; done;</span><br><span class="line">        echo &quot;All done!&quot;;</span><br><span class="line">      &#x27;</span><br><span class="line">    healthcheck:</span><br><span class="line">      test: [&quot;CMD-&quot;, &quot;[ -f config/certs/es-node1/es-node1.crt ]&quot;]</span><br><span class="line">      interval: 1s</span><br><span class="line">      timeout: 5s</span><br><span class="line">      retries: 120</span><br><span class="line"></span><br><span class="line">  es-node1:</span><br><span class="line">    depends_on:</span><br><span class="line">      es-setup:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">    image: docker.elastic.co/elasticsearch/elasticsearch:$&#123;STACK_VERSION&#125;</span><br><span class="line">    container_name: es-node1</span><br><span class="line">    restart: always</span><br><span class="line">    networks:</span><br><span class="line">      net:</span><br><span class="line">        ipv4_address: 172.20.100.11</span><br><span class="line">    volumes:</span><br><span class="line">      - /data/elk-certs:/usr/share/elasticsearch/config/certs</span><br><span class="line">      - /data/es-node1:/usr/share/elasticsearch/data</span><br><span class="line">    ports:</span><br><span class="line">      - $&#123;ES_PORT&#125;:9200</span><br><span class="line">    environment:</span><br><span class="line">      - node.name=es-node1</span><br><span class="line">      - cluster.name=$&#123;CLUSTER_NAME&#125;</span><br><span class="line">      - cluster.initial_master_nodes=es-node1,es-node2,es-node3</span><br><span class="line">      - discovery.seed_hosts=es-node2,es-node3</span><br><span class="line">      - ELASTIC_PASSWORD=$&#123;ELASTIC_PASSWORD&#125;</span><br><span class="line">      - bootstrap.memory_lock=true</span><br><span class="line">      - xpack.security.enabled=true</span><br><span class="line">      - xpack.security.http.ssl.enabled=true</span><br><span class="line">      - xpack.security.http.ssl.key=certs/es-node1/es-node1.key</span><br><span class="line">      - xpack.security.http.ssl.certificate=certs/es-node1/es-node1.crt</span><br><span class="line">      - xpack.security.http.ssl.certificate_authorities=certs/ca/ca.crt</span><br><span class="line">      - xpack.security.transport.ssl.enabled=true</span><br><span class="line">      - xpack.security.transport.ssl.key=certs/es-node1/es-node1.key</span><br><span class="line">      - xpack.security.transport.ssl.certificate=certs/es-node1/es-node1.crt</span><br><span class="line">      - xpack.security.transport.ssl.certificate_authorities=certs/ca/ca.crt</span><br><span class="line">      - xpack.security.transport.ssl.verification_mode=certificate</span><br><span class="line">      - xpack.license.self_generated.type=$&#123;LICENSE&#125;</span><br><span class="line">    mem_limit: $&#123;MEM_LIMIT&#125;</span><br><span class="line">    ulimits:</span><br><span class="line">      memlock:</span><br><span class="line">        soft: -1</span><br><span class="line">        hard: -1</span><br><span class="line">    healthcheck:</span><br><span class="line">      test:</span><br><span class="line">        [</span><br><span class="line">          &quot;CMD-&quot;,</span><br><span class="line">          &quot;curl -s --cacert config/certs/ca/ca.crt https://localhost:9200 | grep -q &#x27;missing authentication credentials&#x27;&quot;,</span><br><span class="line">        ]</span><br><span class="line">      interval: 10s</span><br><span class="line">      timeout: 10s</span><br><span class="line">      retries: 120</span><br><span class="line">    extra_hosts:</span><br><span class="line">      - &quot;es-node1:172.20.100.11&quot;</span><br><span class="line">      - &quot;es-node2:172.20.100.12&quot;</span><br><span class="line">      - &quot;es-node3:172.20.100.13&quot;</span><br><span class="line"></span><br><span class="line">  es-node2:</span><br><span class="line">    depends_on:</span><br><span class="line">      - es-node1</span><br><span class="line">    image: docker.elastic.co/elasticsearch/elasticsearch:$&#123;STACK_VERSION&#125;</span><br><span class="line">    container_name: es-node2</span><br><span class="line">    restart: always</span><br><span class="line">    networks:</span><br><span class="line">      net:</span><br><span class="line">        ipv4_address: 172.20.100.12</span><br><span class="line">    volumes:</span><br><span class="line">      - /data/elk-certs:/usr/share/elasticsearch/config/certs</span><br><span class="line">      - /data/es-node2:/usr/share/elasticsearch/data</span><br><span class="line">    environment:</span><br><span class="line">      - node.name=es-node2</span><br><span class="line">      - cluster.name=$&#123;CLUSTER_NAME&#125;</span><br><span class="line">      - cluster.initial_master_nodes=es-node1,es-node2,es-node3</span><br><span class="line">      - discovery.seed_hosts=es-node1,es-node3</span><br><span class="line">      - bootstrap.memory_lock=true</span><br><span class="line">      - xpack.security.enabled=true</span><br><span class="line">      - xpack.security.http.ssl.enabled=true</span><br><span class="line">      - xpack.security.http.ssl.key=certs/es-node2/es-node2.key</span><br><span class="line">      - xpack.security.http.ssl.certificate=certs/es-node2/es-node2.crt</span><br><span class="line">      - xpack.security.http.ssl.certificate_authorities=certs/ca/ca.crt</span><br><span class="line">      - xpack.security.transport.ssl.enabled=true</span><br><span class="line">      - xpack.security.transport.ssl.key=certs/es-node2/es-node2.key</span><br><span class="line">      - xpack.security.transport.ssl.certificate=certs/es-node2/es-node2.crt</span><br><span class="line">      - xpack.security.transport.ssl.certificate_authorities=certs/ca/ca.crt</span><br><span class="line">      - xpack.security.transport.ssl.verification_mode=certificate</span><br><span class="line">      - xpack.license.self_generated.type=$&#123;LICENSE&#125;</span><br><span class="line">    mem_limit: $&#123;MEM_LIMIT&#125;</span><br><span class="line">    ulimits:</span><br><span class="line">      memlock:</span><br><span class="line">        soft: -1</span><br><span class="line">        hard: -1</span><br><span class="line">    healthcheck:</span><br><span class="line">      test:</span><br><span class="line">        [</span><br><span class="line">          &quot;CMD-&quot;,</span><br><span class="line">          &quot;curl -s --cacert config/certs/ca/ca.crt https://localhost:9200 | grep -q &#x27;missing authentication credentials&#x27;&quot;,</span><br><span class="line">        ]</span><br><span class="line">      interval: 10s</span><br><span class="line">      timeout: 10s</span><br><span class="line">      retries: 120</span><br><span class="line">    extra_hosts:</span><br><span class="line">      - &quot;es-node1:172.20.100.11&quot;</span><br><span class="line">      - &quot;es-node2:172.20.100.12&quot;</span><br><span class="line">      - &quot;es-node3:172.20.100.13&quot;</span><br><span class="line"></span><br><span class="line">  es-node3:</span><br><span class="line">    depends_on:</span><br><span class="line">      - es-node2</span><br><span class="line">    image: docker.elastic.co/elasticsearch/elasticsearch:$&#123;STACK_VERSION&#125;</span><br><span class="line">    container_name: es-node3</span><br><span class="line">    restart: always</span><br><span class="line">    networks:</span><br><span class="line">      net:</span><br><span class="line">        ipv4_address: 172.20.100.13</span><br><span class="line">    volumes:</span><br><span class="line">      - /data/elk-certs:/usr/share/elasticsearch/config/certs</span><br><span class="line">      - /data/es-node3:/usr/share/elasticsearch/data</span><br><span class="line">    environment:</span><br><span class="line">      - node.name=es-node3</span><br><span class="line">      - cluster.name=$&#123;CLUSTER_NAME&#125;</span><br><span class="line">      - cluster.initial_master_nodes=es-node1,es-node2,es-node3</span><br><span class="line">      - discovery.seed_hosts=es-node1,es-node2</span><br><span class="line">      - bootstrap.memory_lock=true</span><br><span class="line">      - xpack.security.enabled=true</span><br><span class="line">      - xpack.security.http.ssl.enabled=true</span><br><span class="line">      - xpack.security.http.ssl.key=certs/es-node3/es-node3.key</span><br><span class="line">      - xpack.security.http.ssl.certificate=certs/es-node3/es-node3.crt</span><br><span class="line">      - xpack.security.http.ssl.certificate_authorities=certs/ca/ca.crt</span><br><span class="line">      - xpack.security.transport.ssl.enabled=true</span><br><span class="line">      - xpack.security.transport.ssl.key=certs/es-node3/es-node3.key</span><br><span class="line">      - xpack.security.transport.ssl.certificate=certs/es-node3/es-node3.crt</span><br><span class="line">      - xpack.security.transport.ssl.certificate_authorities=certs/ca/ca.crt</span><br><span class="line">      - xpack.security.transport.ssl.verification_mode=certificate</span><br><span class="line">      - xpack.license.self_generated.type=$&#123;LICENSE&#125;</span><br><span class="line">    mem_limit: $&#123;MEM_LIMIT&#125;</span><br><span class="line">    ulimits:</span><br><span class="line">      memlock:</span><br><span class="line">        soft: -1</span><br><span class="line">        hard: -1</span><br><span class="line">    healthcheck:</span><br><span class="line">      test:</span><br><span class="line">        [</span><br><span class="line">          &quot;CMD-&quot;,</span><br><span class="line">          &quot;curl -s --cacert config/certs/ca/ca.crt https://localhost:9200 | grep -q &#x27;missing authentication credentials&#x27;&quot;,</span><br><span class="line">        ]</span><br><span class="line">      interval: 10s</span><br><span class="line">      timeout: 10s</span><br><span class="line">      retries: 120</span><br><span class="line">    extra_hosts:</span><br><span class="line">      - &quot;es-node1:172.20.100.11&quot;</span><br><span class="line">      - &quot;es-node2:172.20.100.12&quot;</span><br><span class="line">      - &quot;es-node3:172.20.100.13&quot;</span><br><span class="line"></span><br><span class="line">  kibana:</span><br><span class="line">    depends_on:</span><br><span class="line">      es-node1:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">      es-node2:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">      es-node3:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">    image: docker.elastic.co/kibana/kibana:$&#123;STACK_VERSION&#125;</span><br><span class="line">    container_name: kibana</span><br><span class="line">    restart: always</span><br><span class="line">    networks:</span><br><span class="line">      net:</span><br><span class="line">        ipv4_address: 172.20.100.14</span><br><span class="line">    volumes:</span><br><span class="line">      - /data/elk-certs:/usr/share/kibana/config/certs</span><br><span class="line">      - /data/kibana:/usr/share/kibana/data</span><br><span class="line">    ports:</span><br><span class="line">      - $&#123;KIBANA_PORT&#125;:5601</span><br><span class="line">    environment:</span><br><span class="line">      - SERVERNAME=kibana</span><br><span class="line">      - ELASTICSEARCH_HOSTS=https://es-node1:9200</span><br><span class="line">      - ELASTICSEARCH_USERNAME=kibana_system</span><br><span class="line">      - ELASTICSEARCH_PASSWORD=$&#123;KIBANA_PASSWORD&#125;</span><br><span class="line">      - ELASTICSEARCH_SSL_CERTIFICATEAUTHORITIES=config/certs/ca/ca.crt</span><br><span class="line">    mem_limit: $&#123;MEM_LIMIT&#125;</span><br><span class="line">    healthcheck:</span><br><span class="line">      test:</span><br><span class="line">        [</span><br><span class="line">          &quot;CMD-&quot;,</span><br><span class="line">          &quot;curl -s -I http://localhost:5601 | grep -q &#x27;HTTP/1.1 302 Found&#x27;&quot;,</span><br><span class="line">        ]</span><br><span class="line">      interval: 10s</span><br><span class="line">      timeout: 10s</span><br><span class="line">      retries: 120</span><br><span class="line">  logstash:</span><br><span class="line">    image: docker.elastic.co/logstash/logstash:$&#123;STACK_VERSION&#125;</span><br><span class="line">    container_name: logstash</span><br><span class="line">    volumes:</span><br><span class="line">      - /data/elk-certs:/usr/share/logstash/config/certs</span><br><span class="line">      - /data/logstash/pipeline:/usr/share/logstash/pipeline</span><br><span class="line">      - /data/logstash/config/logstash.yml:/usr/share/logstash/config/logstash.yml</span><br><span class="line">    user: &quot;0&quot;</span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - 5044:5044</span><br><span class="line">    networks:</span><br><span class="line">      net:</span><br><span class="line">        ipv4_address: 172.20.100.15</span><br><span class="line">    extra_hosts:</span><br><span class="line">      - &quot;es-node1:172.20.100.11&quot;</span><br><span class="line">      - &quot;es-node2:172.20.100.12&quot;</span><br><span class="line">      - &quot;es-node3:172.20.100.13&quot;</span><br><span class="line">networks:</span><br><span class="line">  net:</span><br><span class="line">    driver: bridge</span><br><span class="line">    ipam:</span><br><span class="line">      config:</span><br><span class="line">        - subnet: 172.20.100.0/24</span><br><span class="line">**************************elk.yml**************************</span><br></pre></td></tr></table></figure><p>执行命令，创建容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose -f /data/script/elk.yml up -d</span><br></pre></td></tr></table></figure><blockquote><p>[+] Running 42/16<br>✔ es-node3 Pulled 35.6s<br>✔ es-setup Pulled 35.6s<br>✔ logstash Pulled 96.0s<br>✔ kibana Pulled 99.3s<br>✔ es-node2 Pulled 35.6s<br>✔ es-node1 Pulled 35.6s</p><p>[+] Running 7/7<br>✔ Network elk-docker-project_net Crea… 0.6s<br>✔ Container es-setup Healthy 21.6s<br>✔ Container logstash Started 12.5s<br>✔ Container es-node1 Healthy 72.5s<br>✔ Container es-node2 Healthy 72.5s<br>✔ Container es-node3 Healthy 73.0s<br>✔ Container kibana Started 73.4s</p></blockquote><p>容器创建完成后，查看各容器状态是否正常</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><blockquote><p>CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES<br>5b591d4ade82 docker.elastic.co/kibana/kibana:8.13.3 “/bin/tini — /usr/l…” 5 minutes ago Up 4 minutes (healthy) 0.0.0.0:5601-&gt;5601/tcp, :::5601-&gt;5601/tcp kibana<br>e2e75a54149e docker.elastic.co/elasticsearch/elasticsearch:8.13.3 “/bin/tini — /usr/l…” 5 minutes ago Up 5 minutes (healthy) 9200/tcp, 9300/tcp es-node3<br>b8c8357f3634 docker.elastic.co/elasticsearch/elasticsearch:8.13.3 “/bin/tini — /usr/l…” 5 minutes ago Up 5 minutes (healthy) 9200/tcp, 9300/tcp es-node2<br>c552940bd559 docker.elastic.co/elasticsearch/elasticsearch:8.13.3 “/bin/tini — /usr/l…” 5 minutes ago Up 5 minutes (healthy) 0.0.0.0:9200-&gt;9200/tcp, :::9200-&gt;9200/tcp, 9300/tcp es-node1<br>0366974065d8 docker.elastic.co/logstash/logstash:8.13.3 “/usr/local/bin/dock…” 5 minutes ago Up 5 minutes 0.0.0.0:5044-&gt;5044/tcp, :::5044-&gt;5044/tcp, 9600/tcp logstash</p></blockquote><p>5、修改kibana的配置文件，将其语言转化为中文。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">docker cp kibana:/usr/share/kibana/config/kibana.yml .</span><br><span class="line">vi kibana.yml</span><br><span class="line">**************************kibana.yml**************************</span><br><span class="line"> #</span><br><span class="line"># ** THIS IS AN AUTO-GENERATED FILE **</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Default Kibana configuration for docker target</span><br><span class="line">server.host: &quot;0.0.0.0&quot;</span><br><span class="line">server.shutdownTimeout: &quot;5s&quot;</span><br><span class="line">elasticsearch.hosts: [ &quot;http://elasticsearch:9200&quot; ]</span><br><span class="line">monitoring.ui.container.elasticsearch.enabled: true</span><br><span class="line">i18n.locale: &quot;zh-CN&quot;</span><br><span class="line">server.publicBaseUrl: &quot;http://localhost:5601/&quot;</span><br><span class="line">**************************kibana.yml**************************</span><br><span class="line">docker cp kibana.yml  kibana:/usr/share/kibana/config/kibana.yml</span><br><span class="line">docker restart kibana</span><br></pre></td></tr></table></figure><p>6、在浏览器中分别访问<code>https://10.10.2.103:9200/</code>和<code>http://10.10.2.103:5601/</code>，输入账户和密码，进行查看，如下图所示。</p><img src="/yyg/56088d5a/1.png" class="" title="img"><img src="/yyg/56088d5a/2.png" class="" title="img"><img src="/yyg/56088d5a/3.png" class="" title="img"><h3 id="推送Linux日志，验证部署"><a href="#推送Linux日志，验证部署" class="headerlink" title="推送Linux日志，验证部署"></a>推送Linux日志，验证部署</h3><p>1、安装Filebeat日志采集器</p><p>（1）通过rpm方式安装Filebeat日志采集器。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#下载rpm包</span><br><span class="line">curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.13.3-x86_64.rpm</span><br><span class="line">#执行安装</span><br><span class="line">rpm -vi filebeat-8.13.3-x86_64.rpm</span><br></pre></td></tr></table></figure><p>（2）配置Filebeat</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#启动Filebeat</span><br><span class="line">systemctl start filebeat</span><br><span class="line">#查看Filebeat运行状态</span><br><span class="line">systemctl status filebeat</span><br><span class="line">#设置Filebeat为开机自启</span><br><span class="line">systemctl enable filebeat</span><br></pre></td></tr></table></figure><p>2、配置Filebeat收集Linux日志</p><p>（1）配置filebeat文件，将日志发送到 Logstash 服务。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 修改filebeat配置文件</span><br><span class="line">mv /etc/filebeat/filebeat.yml /etc/filebeat/filebeat.yml.bak</span><br><span class="line"># 新建filebeat配置文件</span><br><span class="line">vi /etc/filebeat/filebeat.yml</span><br><span class="line">**************************filebeat-dns.yml**************************</span><br><span class="line"># 配置文件输入，监视日志文件</span><br><span class="line">filebeat.inputs:</span><br><span class="line">- type: log</span><br><span class="line">  enabled: true</span><br><span class="line">  # 指定 DNS 日志文件路径</span><br><span class="line">  paths:</span><br><span class="line">    - /var/log/messages* </span><br><span class="line">  # 标识日志类型为elk-linux</span><br><span class="line">  fields:</span><br><span class="line">    type: elk-linux      </span><br><span class="line">  # 将额外的字段添加到根级别    </span><br><span class="line">  fields_under_root: true        </span><br><span class="line"></span><br><span class="line"># 配置输出到 Logstash</span><br><span class="line"># 指定 Logstash 服务的地址和端口</span><br><span class="line">output.logstash:</span><br><span class="line">  hosts: [&quot;10.10.2.103:5044&quot;]   </span><br><span class="line">**************************filebeat-dns.yml**************************</span><br></pre></td></tr></table></figure><p>（2）重启filebeat服务，验证配置是否生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 重启filebeat</span><br><span class="line">systemctl restart filebeat</span><br><span class="line"># 删除锁文件后，重新启动 Filebeat 服务</span><br><span class="line">rm -rf /var/lib/filebeat/filebeat.lock</span><br><span class="line"># 运行并查看 Filebeat 的运行日志</span><br><span class="line">filebeat -e -c /etc/filebeat/filebeat.yml</span><br></pre></td></tr></table></figure><p>3、在浏览器中登录Kibana，点击左侧菜单中的 “Stack Management”，管理创建数据视图。如下图所示。</p><img src="/yyg/56088d5a/4.png" class="" title="img"><p>4、在“Stack Management”界面中，点击“数据视图”，选择索引模式，创建“elk-linux”视图。如下图所示。</p><img src="/yyg/56088d5a/5.png" class="" title="img"><img src="/yyg/56088d5a/6.png" class="" title="img"><p>5、数据视图创建完成后，选择左侧菜单中的“Discover”，查看Linux日志详细内容。如下图所示。由此，elk集群搭建完成。</p><img src="/yyg/56088d5a/7.png" class="" title="img"><img src="/yyg/56088d5a/8.png" class="" title="img">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;使用-docker部署三节点-Elasticsearch-集群-ELK&quot;&gt;&lt;a href=&quot;#使用-docker部署三节点-Elasticsearch-集群-ELK&quot; class=&quot;headerlink&quot; title=&quot;使用 docker部署三节点 Elastic</summary>
      
    
    
    
    <category term="日志分析" scheme="https://marsperl.github.io/categories/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/"/>
    
    <category term="ELK" scheme="https://marsperl.github.io/categories/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/ELK/"/>
    
    
    <category term="docker" scheme="https://marsperl.github.io/tags/docker/"/>
    
    <category term="日志分析" scheme="https://marsperl.github.io/tags/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/"/>
    
    <category term="ELK" scheme="https://marsperl.github.io/tags/ELK/"/>
    
    <category term="Elasticsearch" scheme="https://marsperl.github.io/tags/Elasticsearch/"/>
    
    <category term="Kibana" scheme="https://marsperl.github.io/tags/Kibana/"/>
    
    <category term="Logstash" scheme="https://marsperl.github.io/tags/Logstash/"/>
    
  </entry>
  
  <entry>
    <title>使用portainer管理容器</title>
    <link href="https://marsperl.github.io/yyg/c60df0d6/"/>
    <id>https://marsperl.github.io/yyg/c60df0d6/</id>
    <published>2024-07-23T14:54:05.539Z</published>
    <updated>2024-07-23T15:25:46.297Z</updated>
    
    <content type="html"><![CDATA[<h1 id="使用portainer管理容器"><a href="#使用portainer管理容器" class="headerlink" title="使用portainer管理容器"></a>使用portainer管理容器</h1><h2 id="基础环境"><a href="#基础环境" class="headerlink" title="基础环境"></a>基础环境</h2><p>系统环境：</p><p>操作系统：CentOS 7.9</p><p>软件环境：</p><p>Docker-26.1.4、Docker Compose-2.27.1 、portainer-2.20.3</p><p>配置阿里yum源 :</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/yum.repos.d</span><br><span class="line">mv CentOS-Base.repo CentOS-Base.repo.bak</span><br><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br></pre></td></tr></table></figure><p>配置防火墙策略：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --add-port=9443/tcp --permanent</span><br><span class="line">sudo firewall-cmd --reload</span><br><span class="line">sudo firewall-cmd --list-all</span><br></pre></td></tr></table></figure><h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2><p>（1）安装 yum-utils 软件包（提供 yum-config-manager 实用程序）并设置存储库。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装 yum-utils 软件包</span></span><br><span class="line">yum install -y yum-utils</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置docker-ce存储库</span></span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><p>（2）安装最新版docker和docker compose。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><p>（3）修改Docker的数据目录为“/data/dockerData”,并修改docker镜像源。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建Docker守护进程配置文件,编辑配置文件/etc/docker/daemon.json，配置docker数据目录，并修改docker镜像源</span></span><br><span class="line">echo &#x27;&#123;</span><br><span class="line">  &quot;data-root&quot;: &quot;/data/dockerData&quot;,</span><br><span class="line">    &quot;registry-mirrors&quot;: [</span><br><span class="line">    &quot;https://registry.docker-cn.com&quot;,</span><br><span class="line">    &quot;http://hub-mirror.c.163.com&quot;,</span><br><span class="line">    &quot;https://dockerhub.azk8s.cn&quot;,</span><br><span class="line">    &quot;https://mirror.ccs.tencentyun.com&quot;,</span><br><span class="line">    &quot;https://registry.cn-hangzhou.aliyuncs.com&quot;,</span><br><span class="line">    &quot;https://docker.mirrors.ustc.edu.cn&quot;,</span><br><span class="line">    &quot;https://docker.m.daocloud.io&quot;,</span><br><span class="line">    &quot;https://noohub.ru&quot;,</span><br><span class="line">    &quot;https://huecker.io&quot;,</span><br><span class="line">    &quot;https://dockerhub.timeweb.cloud&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;&#x27; &gt; /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>（4）启动Docker服务，并设置为开机自启动。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动Docker服务</span></span><br><span class="line">systemctl start docker</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置Docker为开机自启动</span></span><br><span class="line">systemctl enable docker</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看Docker服务状态</span></span><br><span class="line">systemctl status docker</span><br></pre></td></tr></table></figure><h2 id="安装portainer"><a href="#安装portainer" class="headerlink" title="安装portainer"></a>安装portainer</h2><p>（1）拉取portainer镜像并创建容器</p><p>方式一：使用docker命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 9443:9443 --name portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v /data/portainer:/data portainer/portainer-ce:2.20.3</span><br></pre></td></tr></table></figure><p>方式二：使用compose文件安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vi portainer.yml</span><br><span class="line">--------------------------------------------------</span><br><span class="line">services:</span><br><span class="line">  portainer:</span><br><span class="line">    image: portainer/portainer-ce:2.20.3</span><br><span class="line">    container_name: portainer</span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;9443:9443&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - /var/run/docker.sock:/var/run/docker.sock</span><br><span class="line">      - /data/portainer:/data</span><br><span class="line">    user: &quot;0&quot;</span><br><span class="line">    networks:</span><br><span class="line">      net:</span><br><span class="line">        ipv4_address: 172.20.110.10</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line"> net:</span><br><span class="line">  driver: bridge</span><br><span class="line">  ipam:</span><br><span class="line">   config:</span><br><span class="line">    - subnet: 172.20.110.0/24</span><br><span class="line">--------------------------------------------------</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">运行安装</span></span><br><span class="line">docker compose -f portainer.yml up -d</span><br></pre></td></tr></table></figure><p>（2）初始化portainer，设置admin用户的密码</p><img src="/yyg/c60df0d6/1.png" class="" title="image-20240718163227768"><p>（3）进入系统后，点击“Get Started”，查看本机的容器，如下图。</p><img src="/yyg/c60df0d6/2.png" class="" title="image-20240718164748722"><h2 id="多实例环境管理"><a href="#多实例环境管理" class="headerlink" title="多实例环境管理"></a>多实例环境管理</h2><p>Portainer可以管理多个环境，包括Docker Standalone、Docker Swarm、Kubernetes、ACI等。</p><p>使用Portainer管理多Docker Standalone实例，有两种方式，分别是api和客户端容器。</p><h3 id="方式一：使用docker-api-管理Docker-Standalone实例"><a href="#方式一：使用docker-api-管理Docker-Standalone实例" class="headerlink" title="方式一：使用docker api 管理Docker Standalone实例"></a>方式一：使用docker api 管理Docker Standalone实例</h3><p>（1）在其他实例环境上，修改docker服务的配置文件，让Docker守护进程通过TCP在的2375端口监听连接，并通过UNIX套接字在本地监听连接。</p><p>即在ExecStart后添加-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock参数。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/lib/systemd/system/docker.service</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改内容如下</span></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock</span><br></pre></td></tr></table></figure><p>（2）重新加载配置，使配置生效。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#重新加载配置</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">#重启docker</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><p>（3）设置防火墙策略</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#只允许Portainer主机访问该主机的2375端口</span><br><span class="line">sudo firewall-cmd --permanent --add-rich-rule=&quot;rule family=&quot;ipv4&quot; source address=&quot;192.168.22.23/32&quot; port protocol=&quot;tcp&quot; port=&quot;2357&quot; accept&quot;</span><br></pre></td></tr></table></figure><p>（4）点击Environment-related菜单中的Environments，点击Add environment按钮，添加Docker Standalone，如下图。</p><img src="/yyg/c60df0d6/3.png" class="" title="image-20240723122531889"><p>（5）选择API，填写名称和Docker Standalone实例的ip和端口（2375），点击Connect，连接成功后，点击Close，如下图。</p><img src="/yyg/c60df0d6/4.png" class="" title="image-20240723122857044"><h3 id="方式二：使用agent容器管理Docker-Standalone实例"><a href="#方式二：使用agent容器管理Docker-Standalone实例" class="headerlink" title="方式二：使用agent容器管理Docker Standalone实例"></a>方式二：使用agent容器管理Docker Standalone实例</h3><p>（1）在其他实例环境上，部署agent容器进行连接，具体命令如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  -p 9001:9001 \</span><br><span class="line">  --name portainer_agent \</span><br><span class="line">  --restart=always \</span><br><span class="line">  -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">  -v /var/lib/docker/volumes:/var/lib/docker/volumes \</span><br><span class="line">  portainer/agent:2.20.3</span><br></pre></td></tr></table></figure><p>（2）设置防火墙策略</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#只允许Portainer主机访问该主机的9001端口</span><br><span class="line">sudo firewall-cmd --permanent --add-rich-rule=&quot;rule family=&quot;ipv4&quot; source address=&quot;192.168.22.23/9001&quot; port protocol=&quot;tcp&quot; port=&quot;9001&quot; accept&quot;</span><br></pre></td></tr></table></figure><p>连接成功后，在Home界面查看两种方式连接的Docker Standalone实例</p><img src="/yyg/c60df0d6/5.png" class="" title="image-20240723124359442">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;使用portainer管理容器&quot;&gt;&lt;a href=&quot;#使用portainer管理容器&quot; class=&quot;headerlink&quot; title=&quot;使用portainer管理容器&quot;&gt;&lt;/a&gt;使用portainer管理容器&lt;/h1&gt;&lt;h2 id=&quot;基础环境&quot;&gt;&lt;a href</summary>
      
    
    
    
    <category term="Linux运维" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    <category term="容器化" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/"/>
    
    <category term="docker" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/docker/"/>
    
    <category term="容器管理" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86/"/>
    
    
    <category term="docker" scheme="https://marsperl.github.io/tags/docker/"/>
    
    <category term="portainer" scheme="https://marsperl.github.io/tags/portainer/"/>
    
  </entry>
  
  <entry>
    <title>DHCP服务器搭建</title>
    <link href="https://marsperl.github.io/yyg/97ec93b/"/>
    <id>https://marsperl.github.io/yyg/97ec93b/</id>
    <published>2024-07-22T15:41:29.226Z</published>
    <updated>2024-07-22T15:45:42.447Z</updated>
    
    <content type="html"><![CDATA[<h1 id="DHCP服务器搭建"><a href="#DHCP服务器搭建" class="headerlink" title="DHCP服务器搭建"></a>DHCP服务器搭建</h1><h2 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h2><p>（1）通过在线方式安装dhcp-server</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dncp-103 ~]# yum -y install dhcp-server</span><br></pre></td></tr></table></figure><p>（2）修改dhcpd服务配置文件，完成DHCP服务器的搭建</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@dncp-103 ~]# vi /etc/dhcp/dhcpd.conf</span><br><span class="line">-------------------dhcpd.conf-------------------</span><br><span class="line"># DHCP Server Configuration file.</span><br><span class="line">#   see /usr/share/doc/dhcp-server/dhcpd.conf.example</span><br><span class="line">#   see dhcpd.conf(5) man page</span><br><span class="line">#</span><br><span class="line"># 设置域名为 &quot;elk.com&quot;</span><br><span class="line">option domain-name     &quot;elk.com&quot;;</span><br><span class="line"></span><br><span class="line"># 设置域名服务器为 10.10.2.103</span><br><span class="line">option domain-name-servers    10.10.2.103;</span><br><span class="line"></span><br><span class="line"># Declare DHCP Server</span><br><span class="line"># 声明此 DHCP 服务器</span><br><span class="line">authoritative;  </span><br><span class="line"></span><br><span class="line"># 设置默认租约时间为 600 秒</span><br><span class="line">default-lease-time 600;</span><br><span class="line"># 设置日志设施为 local4</span><br><span class="line">log-facility local4;</span><br><span class="line"># 设置最大租约时间为 7200 秒</span><br><span class="line">max-lease-time 7200;</span><br><span class="line"></span><br><span class="line"># Set Network address, subnet mask and gateway</span><br><span class="line">subnet 10.10.2.0 netmask 255.255.255.0 &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 设置 IP 地址范围为 10.10.2.202 到 10.10.2.205</span><br><span class="line">subnet 10.10.2.0 netmask 255.255.255.0 &#123;</span><br><span class="line">  range 10.10.2.202 10.10.2.205;</span><br><span class="line">  # 设置网关为 10.10.2.1</span><br><span class="line">  option routers 10.10.2.1;</span><br><span class="line">  # 设置子网掩码为 255.255.255.0</span><br><span class="line">  option subnet-mask 255.255.255.0;</span><br><span class="line">  # 设置广播地址为 10.10.2.255</span><br><span class="line">  option broadcast-address 10.10.2.255;</span><br><span class="line">  # 设置默认租约时间为 600 秒</span><br><span class="line">  default-lease-time 600;</span><br><span class="line">  # 设置最大租约时间为 7200 秒</span><br><span class="line">  max-lease-time 7200;</span><br><span class="line">  # Add other DHCP options here</span><br><span class="line">&#125;</span><br><span class="line">-------------------dhcpd.conf-------------------</span><br></pre></td></tr></table></figure><p>（3）在rsyslog.conf中配置dhcp日志路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@dncp-103 ~]# vi /etc/rsyslog.conf</span><br><span class="line">-------------------rsyslog.conf-------------------</span><br><span class="line">#为排版方便此处省略部分提示信息</span><br><span class="line"># Don&#x27;t log private authentication messages!</span><br><span class="line">#将 local4 设施的日志消息排除在 /var/log/messages 文件之外</span><br><span class="line">*.info;mail.none;authpriv.none;cron.none;local4.none           /var/log/messages</span><br><span class="line"># 来自 local4 设施的所有级别的日志消息记录到 /var/log/dhcp/dhcp.log 文件中</span><br><span class="line">local4.* /var/log/dhcp/dhcp.log</span><br><span class="line">#为排版方便此处省略部分提示信息</span><br><span class="line">-------------------rsyslog.conf-------------------</span><br></pre></td></tr></table></figure><p>（4）启动dhcpd服务并重启rsyslog服务，使得配置生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 启动dhcpd服务</span><br><span class="line">[root@dncp-103 ~]# systemctl start dhcpd</span><br><span class="line"># 重启rsyslog服务</span><br><span class="line">[root@dncp-103 ~]# systemctl restart rsyslog</span><br></pre></td></tr></table></figure><p>（5）查看dhcpd服务状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dncp-103 ~]# systemctl status dhcpd</span><br></pre></td></tr></table></figure><p>（6）配置dhcpd服务为开机自启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dncp-103 ~]# systemctl enable dhcpd</span><br></pre></td></tr></table></figure><p>（7）配置防火墙，重启服务，使得配置生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 配置dhcp服务访问策略，使其能够正常访问</span><br><span class="line">[root@dncp-103 ~]# firewall-cmd --add-service=dhcp --permanent</span><br><span class="line">success</span><br><span class="line"># 重新加载防火墙策略</span><br><span class="line">[root@dncp-103 ~]# firewall-cmd --reload</span><br><span class="line">success</span><br></pre></td></tr></table></figure><h2 id="客户机端"><a href="#客户机端" class="headerlink" title="客户机端"></a>客户机端</h2><p>（1）查看客户机原本ip</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dncp-113 ~]# ip a</span><br></pre></td></tr></table></figure><p>（2）修改客户机ip为动态，验证DHCP服务器是否能动态的分配ip</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 修改网卡配置文件</span><br><span class="line">[root@dncp-113 ~]# vi /etc/NetworkManager/system-connections/ens32.nmconnection</span><br><span class="line">-------------------ens32.nmconnection-------------------</span><br><span class="line">[connection]</span><br><span class="line">id=ens32</span><br><span class="line">uuid=2bb0f492-19e2-37c0-b8fa-1781d3122a83</span><br><span class="line">type=ethernet</span><br><span class="line">autoconnect-priority=-999</span><br><span class="line">interface-name=ens32</span><br><span class="line">timestamp=1713841073</span><br><span class="line"></span><br><span class="line">[ethernet]</span><br><span class="line"></span><br><span class="line">[ipv4]</span><br><span class="line"># 注释设置静态IP信息</span><br><span class="line">#address1=10.10.2.113/24,10.10.2.1</span><br><span class="line">dns=10.10.2.103;</span><br><span class="line"># 通过 DHCP动态获取 IP 地址</span><br><span class="line">method=auto</span><br><span class="line"></span><br><span class="line">[ipv6]</span><br><span class="line">addr-gen-mode=eui64</span><br><span class="line">method=auto</span><br><span class="line"></span><br><span class="line">[proxy]</span><br><span class="line">-------------------ens32.nmconnection-------------------</span><br></pre></td></tr></table></figure><p>（3）重新加载 NetworkManager 的连接配置，查看分配的动态ip</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 重新加载 NetworkManager 的连接配置</span><br><span class="line">[root@dncp-113 ~]# nmcli c reload</span><br><span class="line"># 连接网络接口 ens32</span><br><span class="line">[root@dncp-113 ~]# nmcli d connect ens32</span><br><span class="line">设备 &quot;ens32&quot; 成功以 &quot;2bb0f492-19e2-37c0-b8fa-1781d3122a83&quot; 激活。</span><br><span class="line"># 查看分配的动态ip</span><br><span class="line">[root@dncp-113 ~]# ip a</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;DHCP服务器搭建&quot;&gt;&lt;a href=&quot;#DHCP服务器搭建&quot; class=&quot;headerlink&quot; title=&quot;DHCP服务器搭建&quot;&gt;&lt;/a&gt;DHCP服务器搭建&lt;/h1&gt;&lt;h2 id=&quot;服务器端&quot;&gt;&lt;a href=&quot;#服务器端&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="Linux运维" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    <category term="网络服务搭建" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Linux运维" scheme="https://marsperl.github.io/tags/Linux%E8%BF%90%E7%BB%B4/"/>
    
    <category term="DHCP" scheme="https://marsperl.github.io/tags/DHCP/"/>
    
  </entry>
  
  <entry>
    <title>NTP服务器搭建</title>
    <link href="https://marsperl.github.io/yyg/29b27760/"/>
    <id>https://marsperl.github.io/yyg/29b27760/</id>
    <published>2024-07-22T15:21:50.802Z</published>
    <updated>2024-07-22T15:40:29.364Z</updated>
    
    <content type="html"><![CDATA[<h1 id="NTP服务器搭建"><a href="#NTP服务器搭建" class="headerlink" title="NTP服务器搭建"></a>NTP服务器搭建</h1><h2 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h2><p>（1）通过在线方式安装chrony</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y chrony</span><br></pre></td></tr></table></figure><p>（2）启动chrony服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start chronyd</span><br></pre></td></tr></table></figure><p>（3）查看chrony服务状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status chronyd</span><br></pre></td></tr></table></figure><p>（4）配置chrony服务为开机自启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable chronyd</span><br></pre></td></tr></table></figure><p>（5）修改chronyd服务配置文件，完成NTP服务器的搭建</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/chrony.conf</span><br><span class="line">-------------------chrony.conf-------------------</span><br><span class="line">pool 2.centos.pool.ntp.org iburst</span><br><span class="line">sourcedir /run/chrony-dhcp</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">配置的多个NTP服务器</span></span><br><span class="line">server ftp.aliyun.com iburst</span><br><span class="line">server time1.aliyun.com iburst</span><br><span class="line">server time2.aliyun.com iburst</span><br><span class="line">server time3.aliyun.com iburst</span><br><span class="line">server time4.aliyun.com iburst</span><br><span class="line">server time5.aliyun.com iburst</span><br><span class="line">server 10.10.2.103 iburst</span><br><span class="line">driftfile /var/lib/chrony/drift</span><br><span class="line">makestep 1.0 3</span><br><span class="line">rtcsync</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">允许访问的网段</span></span><br><span class="line">allow 10.10.0.0/16</span><br><span class="line">keyfile /etc/chrony.keys</span><br><span class="line">ntsdumpdir /var/lib/chrony</span><br><span class="line">leapsectz right/UTC</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">日志存储路径</span></span><br><span class="line">logdir /var/log/chrony</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">日志测量统计指标</span></span><br><span class="line">log measurements statistics tracking</span><br><span class="line">-------------------chrony.conf-------------------</span><br></pre></td></tr></table></figure><p>（6）配置防火墙，重启服务，使得配置生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 配置ntp服务访问策略，使其能够正常访问</span><br><span class="line">firewall-cmd --permanent --add-service=ntp</span><br><span class="line"># 重新加载防火墙策略</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"># 重启chronyd服务</span><br><span class="line">systemctl restart chronyd</span><br></pre></td></tr></table></figure><p>（7）查看连接NTP服务的客户机</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chronyc clients</span><br></pre></td></tr></table></figure><h2 id="客户机端"><a href="#客户机端" class="headerlink" title="客户机端"></a>客户机端</h2><p>（1）通过在线方式安装chrony</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y chrony</span><br></pre></td></tr></table></figure><p>（2）配置访问chrony服务器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 修改chrony的配置文件</span><br><span class="line">vi /etc/chrony.conf</span><br><span class="line">-------------------chrony.conf-------------------</span><br><span class="line"># Use public servers from the pool.ntp.org project.</span><br><span class="line"># Please consider joining the pool (https://www.pool.ntp.org/join.html).</span><br><span class="line">pool 2.centos.pool.ntp.org iburst</span><br><span class="line"></span><br><span class="line"># Use NTP servers from DHCP.</span><br><span class="line">sourcedir /run/chrony-dhcp</span><br><span class="line"></span><br><span class="line"># Record the rate at which the system clock gains/losses time.</span><br><span class="line">driftfile /var/lib/chrony/drift</span><br><span class="line"># 配置ntp服务器地址</span><br><span class="line">server 10.10.2.103 iburst</span><br><span class="line">#为排版方便此处省略部分提示信息</span><br><span class="line">-----------------------------------------------</span><br></pre></td></tr></table></figure><p>（3）启动chronyd服务，连接NTP服务器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 启动chrony服务</span><br><span class="line">systemctl start chronyd</span><br><span class="line"># 查看chrony服务状态</span><br><span class="line">systemctl status chronyd</span><br><span class="line"># 配置chrony服务为开机自启动</span><br><span class="line">systemctl enable chronyd</span><br></pre></td></tr></table></figure><p>（4）配置防火墙，使得配置生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 配置ntp服务访问策略，使其能够正常访问</span><br><span class="line">firewall-cmd --permanent --add-service=ntp</span><br><span class="line"># 重新加载防火墙策略</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>（5）验证NTP服务器的连接情况</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 查看源服务器状态</span><br><span class="line"> chronyc sourcestats</span><br><span class="line"># 查看详细同步状态</span><br><span class="line">chronyc sources -v</span><br><span class="line"># 追踪同步情况</span><br><span class="line">chronyc tracking</span><br><span class="line"># 开启网络时间同步</span><br><span class="line">timedatectl set-ntp true</span><br><span class="line"># 查看时间同步状态</span><br><span class="line">timedatectl status</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;NTP服务器搭建&quot;&gt;&lt;a href=&quot;#NTP服务器搭建&quot; class=&quot;headerlink&quot; title=&quot;NTP服务器搭建&quot;&gt;&lt;/a&gt;NTP服务器搭建&lt;/h1&gt;&lt;h2 id=&quot;服务器端&quot;&gt;&lt;a href=&quot;#服务器端&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="Linux运维" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    <category term="网络服务搭建" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Linux运维" scheme="https://marsperl.github.io/tags/Linux%E8%BF%90%E7%BB%B4/"/>
    
    <category term="NTP" scheme="https://marsperl.github.io/tags/NTP/"/>
    
  </entry>
  
  <entry>
    <title>DNS服务器搭建</title>
    <link href="https://marsperl.github.io/yyg/37824039/"/>
    <id>https://marsperl.github.io/yyg/37824039/</id>
    <published>2024-07-22T14:32:31.236Z</published>
    <updated>2024-07-22T14:43:16.120Z</updated>
    
    <content type="html"><![CDATA[<h1 id="DNS服务器搭建"><a href="#DNS服务器搭建" class="headerlink" title="DNS服务器搭建"></a>DNS服务器搭建</h1><h2 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h2><p>（1）通过在线方式安装bind9</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y bind bind-utils</span><br></pre></td></tr></table></figure><p>（2）启动服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start named</span><br></pre></td></tr></table></figure><p>（3）查看服务状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status named</span><br></pre></td></tr></table></figure><p>（4）配置服务为开机自启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable named</span><br></pre></td></tr></table></figure><p>（5）修改named服务配置文件，配置DNS日志路径</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/named.conf</span><br><span class="line">-------------------named.conf-------------------</span><br><span class="line">options &#123;</span><br><span class="line">        // 接受来自任何网络接口的DNS请求</span><br><span class="line">        listen-on port 53 &#123; any; &#125;;</span><br><span class="line">        listen-on-v6 port 53 &#123; ::1; &#125;;</span><br><span class="line">        directory       &quot;/var/named&quot;;</span><br><span class="line">        dump-file       &quot;/var/named/data/cache_dump.db&quot;;</span><br><span class="line">        statistics-file &quot;/var/named/data/named_stats.txt&quot;;</span><br><span class="line">        memstatistics-file &quot;/var/named/data/named_mem_stats.txt&quot;;</span><br><span class="line">        secroots-file   &quot;/var/named/data/named.secroots&quot;;</span><br><span class="line">        recursing-file  &quot;/var/named/data/named.recursing&quot;;</span><br><span class="line">        // 允许访问的ip范围</span><br><span class="line">        allow-query     &#123; 10.10.0.0/16; &#125;;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">为排版方便此处省略部分提示信息</span></span><br><span class="line">&#125;;</span><br><span class="line">logging &#123;</span><br><span class="line">    //    channel default_debug &#123;</span><br><span class="line">    //            file &quot;data/named.run&quot;;</span><br><span class="line">    //            severity dynamic;</span><br><span class="line">    //    &#125;;</span><br><span class="line">        </span><br><span class="line">        channel named_log &#123;</span><br><span class="line">                // 指定日志文件的路径,设置日志文件的版本数量限制为5个，每个文件的最大大小为50m</span><br><span class="line">                file &quot;/var/log/dns/named.log&quot; versions 5 size 50m;</span><br><span class="line">                // 日志记录的时间格式采用ISO 8601标准</span><br><span class="line">                print-time iso8601;</span><br><span class="line">                // 打印日志条目的类别</span><br><span class="line">                print-category yes;</span><br><span class="line">               // 打印日志条目的严重性</span><br><span class="line">                print-severity yes;</span><br><span class="line">                severity info;</span><br><span class="line">        &#125;;</span><br><span class="line">        // 定义多个日志记录类别</span><br><span class="line">        category default   &#123; named_log; &#125;;</span><br><span class="line">        category general   &#123; named_log; &#125;;</span><br><span class="line">        category config   &#123; named_log; &#125;;</span><br><span class="line">        category client   &#123; named_log; &#125;;</span><br><span class="line">        category network   &#123; named_log; &#125;;</span><br><span class="line">        category notify   &#123; named_log; &#125;;</span><br><span class="line">        category queries   &#123; named_log; &#125;;</span><br><span class="line">        category update   &#123; named_log; &#125;;</span><br><span class="line">        category query-errors  &#123; named_log; &#125;;</span><br><span class="line">        category resolver   &#123; named_log; &#125;;</span><br><span class="line">        category xfer-in   &#123; named_log; &#125;;</span><br><span class="line">        category xfer-out   &#123; named_log; &#125;;</span><br><span class="line">        category dnssec   &#123; named_log; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">为排版方便此处省略部分提示信息</span></span><br><span class="line">-------------------named.conf-------------------</span><br></pre></td></tr></table></figure><p>（6）配置DNS区域，完成DNS服务器的搭建</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/named.rfc1912.zones</span><br><span class="line">-------------------named.rfc1912.zones-------------------</span><br><span class="line">// If private ranges should be forwarded, add</span><br><span class="line">// disable-empty-zone &quot;.&quot;; into options</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">zone &quot;localhost.localdomain&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;named.localhost&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;localhost&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;named.localhost&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;named.loopback&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;1.0.0.127.in-addr.arpa&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;named.loopback&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;0.in-addr.arpa&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;named.empty&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">// 自定义域名区域和DNS记录集合</span><br><span class="line">zone &quot;elk.com&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;/var/named/elk.com.zone&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">-----------------------------------------------</span><br></pre></td></tr></table></figure><p>（7）创建”elk.com”的区域数据文件，并定义DNS服务器的域名为“<a href="https://dns.elk.com/">dns.elk.com</a>”和客户机的域名为“<a href="https://test.elk.com/">test.elk.com</a>”。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 创建&quot;elk.com&quot;的区域数据文件</span><br><span class="line">vi /var/named/elk.com.zone</span><br><span class="line"># 定义DNS服务器和客户机的域名</span><br><span class="line">-------------------named.rfc1912.zones-------------------</span><br><span class="line">$TTL 1D</span><br><span class="line">@       IN SOA  dns.elk.com. admin.elk.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">@   IN  NS      dns.elk.com.</span><br><span class="line">dns     IN      A   10.10.2.103</span><br><span class="line">test    IN      A   10.10.2.113</span><br><span class="line">-------------------------------------------------------</span><br></pre></td></tr></table></figure><p>（8）设置日志服务权限，配置防火墙，重启服务使得配置生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 创建存放日志的目录并赋权</span><br><span class="line">mkdir /var/log/dns</span><br><span class="line">chmod -R 777 /var/log/dns/</span><br><span class="line"># 配置dns服务访问策略，使其能够正常访问</span><br><span class="line">firewall-cmd --permanent --add-service=dns</span><br><span class="line"># 重新加载防火墙策略</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"># 重启named服务，让配置生效</span><br><span class="line"> systemctl restart named</span><br></pre></td></tr></table></figure><p>（9）修改DNS为“10.10.2.103”，并重启网络生效。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 使用nmtui管理网络连接</span><br><span class="line">nmtui</span><br></pre></td></tr></table></figure><p>选择“编辑连接”，回车，选择网卡“ens32”，在“编辑连接”界面中将DNS服务器修改为“10.10.2.103”，保存退出。如图6-1-1、6-1-2所示。</p><p><a href="https://marsperl.github.io/yyg/37824039/image-20240422191810676.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><a href="https://marsperl.github.io/yyg/37824039/2.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><p>保存退出后，重启网络让DNS服务器配置生效。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart NetworkManager</span><br></pre></td></tr></table></figure><p>（10）验证DNS服务器是否配置成功。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ping www.baidu.com</span><br><span class="line">ping dns.elk.com</span><br><span class="line">ping test.elk.com</span><br></pre></td></tr></table></figure><h2 id="客户机端"><a href="#客户机端" class="headerlink" title="客户机端"></a>客户机端</h2><p>修改DNS配置为“10.10.2.103”，具体步骤参照《步骤1：虚拟机规划》的“（9）”。</p><p>重启网络网络后，验证DNS配置是否生效。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ping www.baidu.com</span><br><span class="line">ping dns.elk.com</span><br><span class="line">ping test.elk.com</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;DNS服务器搭建&quot;&gt;&lt;a href=&quot;#DNS服务器搭建&quot; class=&quot;headerlink&quot; title=&quot;DNS服务器搭建&quot;&gt;&lt;/a&gt;DNS服务器搭建&lt;/h1&gt;&lt;h2 id=&quot;服务器端&quot;&gt;&lt;a href=&quot;#服务器端&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="Linux运维" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    <category term="网络服务搭建" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Linux运维" scheme="https://marsperl.github.io/tags/Linux%E8%BF%90%E7%BB%B4/"/>
    
    <category term="DNS" scheme="https://marsperl.github.io/tags/DNS/"/>
    
  </entry>
  
  <entry>
    <title>Hexo-Butterfly美化教程 | 基础环境</title>
    <link href="https://marsperl.github.io/yyg/e102aa73/"/>
    <id>https://marsperl.github.io/yyg/e102aa73/</id>
    <published>2024-07-22T14:22:46.859Z</published>
    <updated>2024-07-22T14:28:08.001Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Hexo-Butterfly美化教程-基础环境"><a href="#Hexo-Butterfly美化教程-基础环境" class="headerlink" title="Hexo-Butterfly美化教程 | 基础环境"></a>Hexo-Butterfly美化教程 | 基础环境</h1><h2 id="基础环境："><a href="#基础环境：" class="headerlink" title="基础环境："></a>基础环境：</h2><ol><li>操作系统：Windows10/11</li><li>运行环境：node.js</li></ol><h2 id="实现过程："><a href="#实现过程：" class="headerlink" title="实现过程："></a>实现过程：</h2><h3 id="安装node-js"><a href="#安装node-js" class="headerlink" title="安装node.js"></a>安装node.js</h3><p>在node.js中文官网<code>https://www.nodejs.com.cn/download_current.html</code>，下载适用于Windows的64位安装包，安装JavaScript运行环境。下载完成后，双击安装程序，按引导进行安装，在安装过程中需勾选”Automatically install the necessary tools. ……“，如图所示。安装过程中，弹出命令指示符，回车下载依赖工具。</p><img src="/yyg/e102aa73/1.png" class="" title="img"><p>安装完成后，使用快捷键<code>win+r</code>,调用运行窗口，输入<code>cmd</code>，在命令指示符中输入命令，验证node和npm版本号。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure><img src="/yyg/e102aa73/2.png" class="" title="img"><h3 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h3><p>从官网<code>https://git-scm.com/download/win</code>下载安装程序，按安装引导一直点击下一步即可。</p><h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><p>在命令指示符中输入命令安装hexo。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g </span><br></pre></td></tr></table></figure><p>创建博客存放目录</p><p>进入要存放博客目录的磁盘，以“F”盘为例，在如下图所示的磁盘路径框中输入“cmd”，点击回车，打开命名指示符。</p><img src="/yyg/e102aa73/3.png" class="" title="img"><p>在其中输入如下命令创建博客目录，此处的“blog”为自定义名称。等待博客目录初始化完成。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br></pre></td></tr></table></figure><p>初始化完成后，进入blog目录，在磁盘路径框中输入“cmd”，点击回车，输入以下命令下载依赖和测试博客是否部署成功。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#下载依赖</span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line">#本地测试</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure><p>成功显示的命令细节如下：</p><blockquote><p>F:\blog&gt;hexo clean &amp;&amp; hexo g &amp;&amp; hexo s<br>INFO Validating config<br>INFO Deleted database.<br>INFO Validating config<br>INFO Start processing<br>INFO Files loaded in 463 ms<br>INFO Generated: archives/index.html<br>INFO Generated: archives/2024/index.html<br>INFO Generated: archives/2024/04/index.html<br>INFO Generated: index.html<br>INFO Generated: css/style.css<br>INFO Generated: fancybox/jquery.fancybox.min.css<br>INFO Generated: fancybox/jquery.fancybox.min.js<br>INFO Generated: js/jquery-3.6.4.min.js<br>INFO Generated: js/script.js<br>INFO Generated: css/images/banner.jpg<br>INFO Generated: 2024/04/18/hello-world/index.html<br>INFO 11 files generated in 660 ms<br>INFO Validating config<br>INFO Start processing<br>INFO Hexo is running at <a href="http://localhost:4000/">http://localhost:4000/</a> . Press Ctrl+C to stop.</p></blockquote><p>在浏览器中访问 <code>http://localhost:4000/</code> ，查看默认博客界面。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Hexo-Butterfly美化教程-基础环境&quot;&gt;&lt;a href=&quot;#Hexo-Butterfly美化教程-基础环境&quot; class=&quot;headerlink&quot; title=&quot;Hexo-Butterfly美化教程 | 基础环境&quot;&gt;&lt;/a&gt;Hexo-Butterfly美</summary>
      
    
    
    
    <category term="博客教程" scheme="https://marsperl.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Hexo" scheme="https://marsperl.github.io/tags/Hexo/"/>
    
    <category term="Butterfly" scheme="https://marsperl.github.io/tags/Butterfly/"/>
    
    <category term="博客教程" scheme="https://marsperl.github.io/tags/%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>安装Winlogbeat日志采集器</title>
    <link href="https://marsperl.github.io/yyg/f547e2a9/"/>
    <id>https://marsperl.github.io/yyg/f547e2a9/</id>
    <published>2024-07-21T13:50:36.845Z</published>
    <updated>2024-07-21T14:17:01.539Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装Winlogbeat日志采集器"><a href="#安装Winlogbeat日志采集器" class="headerlink" title="安装Winlogbeat日志采集器"></a>安装Winlogbeat日志采集器</h1><ol><li>Winlogbeat安装程序可通过其官网（<a href="https://www.elastic.co/cn/beats/winlogbeat）下载。">https://www.elastic.co/cn/beats/winlogbeat）下载。</a></li><li>双击启动安装程序，进入安装向导后勾选“I accept the terms in the License Agreement”，单击【Install】，如图所示。</li></ol><img src="/yyg/f547e2a9/4.png" class="" title="img"><ol><li>按安装向导安装完成后，单击【Finish】，完成安装并打开安装目录。如图所示。</li></ol><img src="/yyg/f547e2a9/3.png" class="" title="img"><img src="/yyg/f547e2a9/2.png" class="" title="img"><ol><li><p>以管理员身份打开 PowerShell 提示符（右键单击 PowerShell 图标，然后选择以管理员身份运行），允许在本地主机上创建winlogbeat服务，创建成功后允许winlogbeat服务并验证。如图所示。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Windows\system32&gt; cd &quot;C:\Program Files\Elastic\Beats\8.13.2\winlogbeat&quot;</span><br><span class="line"># 允许在本地计算机上编写的未签名脚本自由运行</span><br><span class="line">PS C:\Program Files\Elastic\Beats\8.13.2\winlogbeat&gt; set-executionpolicy remotesigned</span><br><span class="line"></span><br><span class="line">执行策略更改</span><br><span class="line">执行策略可帮助你防止执行不信任的脚本。更改执行策略可能会产生安全风险，如 https:/go.microsoft.com/fwlink/?LinkID=135170</span><br><span class="line">中的 about_Execution_Policies 帮助主题所述。是否要更改执行策略?</span><br><span class="line">[Y] 是(Y)  [A] 全是(A)  [N] 否(N)  [L] 全否(L)  [S] 暂停(S)  [?] 帮助 (默认值为“N”): y</span><br><span class="line"># 允许脚本在系统上运行</span><br><span class="line">PS C:\Program Files\Elastic\Beats\8.13.2\winlogbeat&gt; set-executionpolicy Bypass</span><br><span class="line"></span><br><span class="line">执行策略更改</span><br><span class="line">执行策略可帮助你防止执行不信任的脚本。更改执行策略可能会产生安全风险，如 https:/go.microsoft.com/fwlink/?LinkID=135170</span><br><span class="line">中的 about_Execution_Policies 帮助主题所述。是否要更改执行策略?</span><br><span class="line">[Y] 是(Y)  [A] 全是(A)  [N] 否(N)  [L] 全否(L)  [S] 暂停(S)  [?] 帮助 (默认值为“N”): y</span><br><span class="line"># 创建winlogbeat服务</span><br><span class="line">PS C:\Program Files\Elastic\Beats\8.13.2\winlogbeat&gt; .\install-service-winlogbeat.ps1</span><br><span class="line">[SC] DeleteService 成功</span><br><span class="line"></span><br><span class="line">Status   Name               DisplayName</span><br><span class="line">------   ----               -----------</span><br><span class="line">Stopped  winlogbeat         winlogbeat</span><br><span class="line"></span><br><span class="line"># 启动winlogbeat服务</span><br><span class="line">PS C:\Program Files\Elastic\Beats\8.13.2\winlogbeat&gt; Start-Service winlogbeat</span><br></pre></td></tr></table></figure></li></ol><img src="/yyg/f547e2a9/1.png" class="" title="img">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;安装Winlogbeat日志采集器&quot;&gt;&lt;a href=&quot;#安装Winlogbeat日志采集器&quot; class=&quot;headerlink&quot; title=&quot;安装Winlogbeat日志采集器&quot;&gt;&lt;/a&gt;安装Winlogbeat日志采集器&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;Winl</summary>
      
    
    
    
    <category term="日志分析" scheme="https://marsperl.github.io/categories/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/"/>
    
    <category term="ELK" scheme="https://marsperl.github.io/categories/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/ELK/"/>
    
    
    <category term="日志分析" scheme="https://marsperl.github.io/tags/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/"/>
    
    <category term="ELK" scheme="https://marsperl.github.io/tags/ELK/"/>
    
    <category term="日志采集器" scheme="https://marsperl.github.io/tags/%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86%E5%99%A8/"/>
    
    <category term="Winlogbeat" scheme="https://marsperl.github.io/tags/Winlogbeat/"/>
    
  </entry>
  
  <entry>
    <title>实现Nextcloud私有云盘</title>
    <link href="https://marsperl.github.io/yyg/f7b8055d/"/>
    <id>https://marsperl.github.io/yyg/f7b8055d/</id>
    <published>2024-07-21T13:45:15.061Z</published>
    <updated>2024-07-21T14:06:19.068Z</updated>
    
    <content type="html"><![CDATA[<h1 id="实现Nextcloud私有云盘"><a href="#实现Nextcloud私有云盘" class="headerlink" title="实现Nextcloud私有云盘"></a>实现Nextcloud私有云盘</h1><h2 id="任务目标"><a href="#任务目标" class="headerlink" title="任务目标"></a>任务目标</h2><ol><li>完成Nextcloud私有云盘的搭建</li></ol><h2 id="部署指南"><a href="#部署指南" class="headerlink" title="部署指南"></a>部署指南</h2><h3 id="基础环境准备"><a href="#基础环境准备" class="headerlink" title="基础环境准备"></a>基础环境准备</h3><p>配置防火墙策略</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-service=http --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>配置SELinux策略</p><p>设置SELinux为permissive或disabled。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改</span></span><br><span class="line">setenforce 0</span><br><span class="line">sudo sed -i &#x27;s/^SELINUX=enforcing/SELINUX=disabled/&#x27; /etc/selinux/config</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">或</span></span><br><span class="line">setenforce 0</span><br><span class="line">sudo sed -i &#x27;s/^SELINUX=enforcing/SELINUX=permissive/&#x27; /etc/selinux/config</span><br></pre></td></tr></table></figure><h3 id="安装Apache"><a href="#安装Apache" class="headerlink" title="安装Apache"></a>安装Apache</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install httpd</span><br></pre></td></tr></table></figure><h3 id="安装PHP"><a href="#安装PHP" class="headerlink" title="安装PHP"></a>安装PHP</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install php</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装php模块依赖</span></span><br><span class="line">yum -y install php-zip php-dom php-xml php-mbstring php-pdo php-gd</span><br></pre></td></tr></table></figure><h3 id="添加Nextcloud站点配置文件"><a href="#添加Nextcloud站点配置文件" class="headerlink" title="添加Nextcloud站点配置文件"></a>添加Nextcloud站点配置文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mkdir /var/www/html/nextcloud/</span><br><span class="line">chmod 777 /var/www/html/nextcloud/</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">新建文件</span></span><br><span class="line">vi /etc/httpd/conf.d/nextcloud.conf</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">  DocumentRoot /var/www/html/nextcloud/</span><br><span class="line">  ServerName  your.server.com</span><br><span class="line"></span><br><span class="line">  &lt;Directory /var/www/html/nextcloud/&gt;</span><br><span class="line">    Require all granted</span><br><span class="line">    AllowOverride All</span><br><span class="line">    Options FollowSymLinks MultiViews</span><br><span class="line"></span><br><span class="line">    &lt;IfModule mod_dav.c&gt;</span><br><span class="line">      Dav off</span><br><span class="line">    &lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure><h3 id="下载Nextcloud安装文件"><a href="#下载Nextcloud安装文件" class="headerlink" title="下载Nextcloud安装文件"></a>下载Nextcloud安装文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -P /var/www/html/nextcloud/ https://download.nextcloud.com/server/installer/setup-nextcloud.php</span><br></pre></td></tr></table></figure><h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start httpd</span><br><span class="line">systemctl enable httpd</span><br></pre></td></tr></table></figure><h3 id="通过浏览器访问"><a href="#通过浏览器访问" class="headerlink" title="通过浏览器访问"></a>通过浏览器访问</h3><p>在浏览器中输入<code>http://172.20.1.51/setup-nextcloud.php</code>，按引导进行设置。如下图所示。</p><img src="/yyg/f7b8055d/2.jpg" class="" title="img"><p>设置用户名和密码，安装数据库如下图所示。</p><img src="/yyg/f7b8055d/4.png" class="" title="img"><p>成功进入内容界面，部署完成，如下图所示。</p><img src="/yyg/f7b8055d/3.png" class="" title="img">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;实现Nextcloud私有云盘&quot;&gt;&lt;a href=&quot;#实现Nextcloud私有云盘&quot; class=&quot;headerlink&quot; title=&quot;实现Nextcloud私有云盘&quot;&gt;&lt;/a&gt;实现Nextcloud私有云盘&lt;/h1&gt;&lt;h2 id=&quot;任务目标&quot;&gt;&lt;a href</summary>
      
    
    
    
    <category term="Linux运维" scheme="https://marsperl.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="Linux" scheme="https://marsperl.github.io/tags/Linux/"/>
    
    <category term="Nextcloud" scheme="https://marsperl.github.io/tags/Nextcloud/"/>
    
    <category term="私有云盘" scheme="https://marsperl.github.io/tags/%E7%A7%81%E6%9C%89%E4%BA%91%E7%9B%98/"/>
    
  </entry>
  
  <entry>
    <title>高可用容器云建设（k8s集群+ceph集群）</title>
    <link href="https://marsperl.github.io/yyg/57e2a956/"/>
    <id>https://marsperl.github.io/yyg/57e2a956/</id>
    <published>2024-07-18T15:55:36.812Z</published>
    <updated>2024-07-21T13:39:15.128Z</updated>
    
    <content type="html"><![CDATA[<h1 id="高可用容器云建设（K8s集群-ceph集群）"><a href="#高可用容器云建设（K8s集群-ceph集群）" class="headerlink" title="高可用容器云建设（K8s集群+ceph集群）"></a>高可用容器云建设（K8s集群+ceph集群）</h1><h1 id="任务目标"><a href="#任务目标" class="headerlink" title="任务目标"></a>任务目标</h1><ol><li>完成高可用k8s集群安装部署</li></ol><h1 id="任务平台"><a href="#任务平台" class="headerlink" title="任务平台"></a>任务平台</h1><ol><li>物理设备—</li><li>操作系统：openEuler 22.03 LTS SP2</li></ol><h1 id="部署指南"><a href="#部署指南" class="headerlink" title="部署指南"></a>部署指南</h1><p>集群拓扑图</p><img src="/yyg/57e2a956/image-20240323222825713-1711204108611-3.png" class="" title="image-20240323222825713"><h2 id="一：部署ceph集群"><a href="#一：部署ceph集群" class="headerlink" title="一：部署ceph集群"></a>一：部署ceph集群</h2><h3 id="任务一：配置准备"><a href="#任务一：配置准备" class="headerlink" title="任务一：配置准备"></a>任务一：配置准备</h3><ol><li>重命名hostname</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.1.80的主机名改为future-k8s-master0</span></span><br><span class="line">hostnamectl set-hostname future-k8s-master0 &amp;&amp; bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.1.81的主机名改为future-k8s-master1</span></span><br><span class="line">hostnamectl set-hostname future-k8s-master1 &amp;&amp; bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.1.82的主机名改为future-k8s-master2</span></span><br><span class="line">hostnamectl set-hostname future-k8s-master2 &amp;&amp; bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.1.16的主机名改为k8s-ceph-node0</span></span><br><span class="line">hostnamectl set-hostname k8s-ceph-node0 &amp;&amp; bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.1.17的主机名改为k8s-ceph-node1</span></span><br><span class="line">hostnamectl set-hostname k8s-ceph-node1 &amp;&amp; bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.1.18的主机名改为k8s-ceph-node2</span></span><br><span class="line">hostnamectl set-hostname k8s-ceph-node2 &amp;&amp; bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.1.15的主机名改为k8s-ceph-node2</span></span><br><span class="line">hostnamectl set-hostname k8s-ceph-node3 &amp;&amp; bash</span><br></pre></td></tr></table></figure><ol><li>安装前的配置修改</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关闭防火墙</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line">firewall-cmd --state</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">selinux永久关闭</span></span><br><span class="line">setenforce 0</span><br><span class="line"> sed -i &#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27; /etc/selinux/config</span><br><span class="line">cat /etc/selinux/config</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">swap永久关闭</span></span><br><span class="line">swapoff --all</span><br><span class="line">swapoff -a</span><br><span class="line">sed -ri &#x27;s/.*swap.*/#&amp;/&#x27; /etc/fstab</span><br><span class="line">cat /etc/fstab</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加hosts</span></span><br><span class="line">cat &gt;&gt; /etc/hosts &lt;&lt; EOF</span><br><span class="line">10.10.1.80 future-k8s-master0</span><br><span class="line">10.10.1.81 future-k8s-master1</span><br><span class="line">10.10.1.82 future-k8s-master2</span><br><span class="line">10.10.1.16 k8s-ceph-node0</span><br><span class="line">10.10.1.17 k8s-ceph-node1</span><br><span class="line">10.10.1.18 k8s-ceph-node2</span><br><span class="line">10.10.1.15 k8s-ceph-node3</span><br><span class="line">10.10.1.83 future-k8s-vip</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看</span></span><br><span class="line">cat /etc/hosts</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加网桥过滤及内核转发配置文件</span></span><br><span class="line">cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF</span><br><span class="line"> net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line"> net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line"> net.ipv4.ip_forward = 1</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看</span></span><br><span class="line">cat /etc/sysctl.d/k8s.conf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加载br_netfilter模块</span></span><br><span class="line">modprobe br_netfilter</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看是否加载</span></span><br><span class="line">lsmod | grep br_netfilter</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加载网桥过滤及内核转发配置文件</span></span><br><span class="line">sysctl -p /etc/sysctl.d/k8s.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">同步时间</span></span><br><span class="line">yum install ntp -y</span><br><span class="line">systemctl start ntpd</span><br><span class="line">systemctl enable ntpd</span><br><span class="line">yum install chrony  -y</span><br><span class="line">systemctl start chronyd</span><br><span class="line">systemctl enable chronyd</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改配置，添加内容</span></span><br><span class="line">echo &quot;</span><br><span class="line">server 10.10.3.70 iburst</span><br><span class="line">allow 10.10.3.0/24</span><br><span class="line">allow 10.10.1.0/24</span><br><span class="line">&quot; &gt;&gt; /etc/chrony.conf</span><br><span class="line">timedatectl set-ntp true</span><br><span class="line">systemctl restart chronyd</span><br><span class="line">timedatectl status</span><br><span class="line">date</span><br></pre></td></tr></table></figure><ol><li>安装ipset及ipvsadm</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">安装ipset及ipvsadm</span></span><br><span class="line"> yum -y install ipset ipvsadm</span><br><span class="line"> 配置ipvsadm模块加载方式</span><br><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">添加需要加载的模块</span></span><br><span class="line">echo &#x27; #!/bin/bash</span><br><span class="line"> modprobe -- ip_vs</span><br><span class="line"> modprobe -- ip_vs_rr</span><br><span class="line"> modprobe -- ip_vs_wrr</span><br><span class="line"> modprobe -- ip_vs_sh</span><br><span class="line"> modprobe -- nf_conntrack</span><br><span class="line">&#x27; &gt; /etc/sysconfig/modules/ipvs.modules</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看</span></span><br><span class="line">cat /etc/sysconfig/modules/ipvs.modules</span><br><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">授权、运行、检查是否加载</span></span><br><span class="line">chmod 755 /etc/sysconfig/modules/ipvs.modules </span><br><span class="line">bash /etc/sysconfig/modules/ipvs.modules </span><br><span class="line">lsmod | grep -e ip_vs -e nf_conntrack</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><p>配置准备完成后，所有节点都需重启</p><h3 id="任务二：配置python环境"><a href="#任务二：配置python环境" class="headerlink" title="任务二：配置python环境"></a>任务二：配置python环境</h3><p>下载python2</p><ol><li>安装<a href="https://so.csdn.net/so/search?q=zlib&amp;spm=1001.2101.3001.7020">zlib</a>库，不然安装pip时会报错（还要重新编译python）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install zlib*</span><br></pre></td></tr></table></figure><ol><li>安装 GCC 包，如果没有安装 GCC，请使用以下命令进行安装</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc openssl-devel bzip2-devel</span><br></pre></td></tr></table></figure><ol><li>下载Python-2.7.18</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/src</span><br><span class="line">yum -y install wget tar</span><br><span class="line">wget https://www.python.org/ftp/python/2.7.18/Python-2.7.18.tgz</span><br><span class="line">tar xzf Python-2.7.18.tgz</span><br></pre></td></tr></table></figure><ol><li>在编译之前还需要在安装源文件中修改Modules/Setup.dist文件，将注释去掉</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;s/#zlib zlibmodule.c -I$(prefix)/zlib zlibmodule.c -I$(prefix)/&#x27;  Python-2.7.18/Modules/Setup.dist</span><br></pre></td></tr></table></figure><ol><li>编译Python-2.7.18（<code>make altinstall</code>用于防止替换默认的 python 二进制文件 /usr/bin/python）</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/src/Python-2.7.18</span><br><span class="line">./configure --enable-optimizations</span><br><span class="line">yum install -y make</span><br><span class="line">make altinstall</span><br></pre></td></tr></table></figure><p>不要覆盖或链接原始的 Python 二进制文件，这可能会损坏系统</p><ol><li>设置环境变量</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;</span><br><span class="line">export PYTHON_HOME=/usr/local/</span><br><span class="line">PATH=\$PATH:\$PYTHON_HOME/bin</span><br><span class="line">&quot; &gt;&gt; /etc/profile</span><br><span class="line">cat /etc/profile</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><ol><li>方法一：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl &quot;https://bootstrap.pypa.io/pip/2.7/get-pip.py&quot; -o &quot;get-pip.py&quot;</span><br><span class="line">python2.7 get-pip.py </span><br></pre></td></tr></table></figure><p>下载ceph</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">k8s-ceph-node0下载</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">方法一：使用pip下载</span></span><br><span class="line">pip2 install ceph-deploy</span><br><span class="line">yum install -y ceph ceph-radosgw</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">其他节点下载</span></span><br><span class="line">yum install -y ceph ceph-radosgw</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检查安装包是否完整</span></span><br><span class="line">rpm -qa |egrep -i &quot;ceph|rados|rbd&quot;</span><br></pre></td></tr></table></figure><h3 id="任务三：部署ceph集群"><a href="#任务三：部署ceph集群" class="headerlink" title="任务三：部署ceph集群"></a>任务三：部署ceph集群</h3><ol><li><h4 id="admin节点"><a href="#admin节点" class="headerlink" title="admin节点"></a>admin节点</h4></li><li><h5 id="部署Monitor"><a href="#部署Monitor" class="headerlink" title="部署Monitor"></a>部署Monitor</h5></li><li><p>创建配置文件目录，并创建配置文件</p></li></ol><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mkdir</span> <span class="string">/etc/ceph/</span></span><br><span class="line"><span class="attr">touch</span> <span class="string">/etc/ceph/ceph.conf</span></span><br></pre></td></tr></table></figure><ol><li>为集群生成一个FSDI：</li></ol><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uuidgen</span><br><span class="line"><span class="number">30912204</span>-0c26-413f-<span class="number">8e00</span>-6d55c9c0af03</span><br></pre></td></tr></table></figure><ol><li>集群创建一个钥匙串，为Monitor 服务创建一个密钥：</li></ol><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph-authtool --create-keyring /tmp/ceph.mon.keyring --gen-key -n mon. --cap mon <span class="string">&#x27;allow *&#x27;</span></span><br></pre></td></tr></table></figure><ol><li>创建一个管理员钥匙串，生成一个client.admin用户，并将此用户添加到钥匙串中：</li></ol><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph-authtool --create-keyring /etc/ceph/ceph.client.admin.keyring --gen-key -n client.admin --<span class="built_in">cap</span> mon <span class="string">&#x27;allow *&#x27;</span> --<span class="built_in">cap</span> osd <span class="string">&#x27;allow *&#x27;</span> --<span class="built_in">cap</span> mds <span class="string">&#x27;allow *&#x27;</span> --<span class="built_in">cap</span> mgr <span class="string">&#x27;allow *&#x27;</span></span><br></pre></td></tr></table></figure><ol><li>创建bootstrap-osd钥匙串，将client.bootstrap-osd 用户添加到此钥匙串中：</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph-authtool --create-keyring /<span class="keyword">var</span>/lib/ceph/bootstrap-osd/ceph.<span class="property">keyring</span> --gen-key -n client.<span class="property">bootstrap</span>-osd --cap mon <span class="string">&#x27;profile bootstrap-osd&#x27;</span></span><br></pre></td></tr></table></figure><ol><li>将生成的key加入ceph.mon.keyring.</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ceph-authtool /tmp/ceph.<span class="property">mon</span>.<span class="property">keyring</span> --<span class="keyword">import</span>-keyring /etc/ceph/ceph.<span class="property">client</span>.<span class="property">admin</span>.<span class="property">keyring</span></span><br><span class="line"></span><br><span class="line">ceph-authtool /tmp/ceph.<span class="property">mon</span>.<span class="property">keyring</span> --<span class="keyword">import</span>-keyring /<span class="keyword">var</span>/lib/ceph/bootstrap-osd/ceph.<span class="property">keyring</span></span><br></pre></td></tr></table></figure><ol><li>使用主机名和IP地址以及FSID生成monitor map:</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">monmaptool</span> <span class="string">--create</span> <span class="string">--add</span> <span class="string">k8s-ceph-node0</span> <span class="number">10.10</span><span class="number">.1</span><span class="number">.16</span> <span class="string">--fsid</span> <span class="number">30912204</span><span class="string">-0c26-413f-8e00-6d55c9c0af03</span> <span class="string">/tmp/monmap</span></span><br></pre></td></tr></table></figure><ol><li>创建mon的目录,使用 <code>集群名称-主机名</code>的形式：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir  /var/lib/ceph/mon/ceph-k8s-ceph-node0</span><br></pre></td></tr></table></figure><ol><li>填入第一个mon守护进程的信息:</li></ol><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph-mon --mkfs -i k8s-ceph-node0 --monmap /tmp/monmap --keyring /tmp/ceph.mon.keyring</span><br></pre></td></tr></table></figure><ol><li>配置/etc/ceph/ceph.conf文件：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/ceph/ceph.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">###############################################</span></span></span><br><span class="line">[global]</span><br><span class="line">fsid = 30912204-0c26-413f-8e00-6d55c9c0af03     # 生成的FSID</span><br><span class="line">mon initial members =k8s-ceph-node0</span><br><span class="line">mon host = 10.10.1.16</span><br><span class="line">public network = 10.10.1.0/24</span><br><span class="line">auth cluster required = cephx</span><br><span class="line">auth service required = cephx</span><br><span class="line">auth client required = cephx</span><br><span class="line">osd journal size = 1024</span><br><span class="line">osd pool default size = 3</span><br><span class="line">osd pool default min size = 2</span><br><span class="line">osd pool default pg num = 333</span><br><span class="line">osd pool default pgp num = 333</span><br><span class="line">osd crush chooseleaf type = 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">###############################################</span></span></span><br></pre></td></tr></table></figure><ol><li>由于我们使用使用root操作的，需要设置权限为ceph（也可以修改systemd的启动文件，将ceph用户改为root），并启动Monitor</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chown  -R ceph:ceph /var/lib/ceph</span><br><span class="line">systemctl start ceph-mon@k8s-ceph-node0.service</span><br><span class="line">systemctl enable ceph-mon@k8s-ceph-node0.service</span><br></pre></td></tr></table></figure><ol><li>确认服务已经正常启动：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ceph -s</span><br><span class="line">yum install -y net-tools</span><br><span class="line">netstat -lntp|grep ceph-mon</span><br></pre></td></tr></table></figure><ol><li><h5 id="部署Manager"><a href="#部署Manager" class="headerlink" title="部署Manager"></a>部署Manager</h5></li></ol><p>当我们配置好ceph-mon服务之后，就需要配置ceph-mgr服务。</p><ol><li>生成一个认证密钥(ceph-mgr为自定义的名称)：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">10.10.1.16</span></span><br><span class="line">ceph auth get-or-create mgr.ceph-mgr mon &#x27;allow profile mgr&#x27; osd &#x27;allow *&#x27; mds &#x27;allow *&#x27;</span><br><span class="line">[mgr.ceph-mgr]</span><br><span class="line">        key = AQANDD9lfWg2LBAAHY0mprdbuKFBPJDkE7/I5Q==</span><br><span class="line">        </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">10.10.1.17</span></span><br><span class="line">ceph auth get-or-create mgr.ceph-mgr1 mon &#x27;allow profile mgr&#x27; osd &#x27;allow *&#x27; mds &#x27;allow *&#x27;</span><br><span class="line">[mgr.ceph-mgr1]</span><br><span class="line">        key = AQDbRTZlgjXWBBAAGew4Xta+t9vgIWPCWC8EVg==</span><br></pre></td></tr></table></figure><ol><li>创建存放此密钥的文件的目录</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">10.10.1.16</span></span><br><span class="line">sudo -u ceph mkdir /var/lib/ceph/mgr/ceph-ceph-mgr</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将产生的密钥文件存入此目录下，并命名为keyring</span></span><br><span class="line">vi /var/lib/ceph/mgr/ceph-ceph-mgr/keyring </span><br><span class="line">[mgr.ceph-mgr]</span><br><span class="line">        key = AQANDD9lfWg2LBAAHY0mprdbuKFBPJDkE7/I5Q==</span><br><span class="line">        </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">10.10.1.17</span></span><br><span class="line">sudo -u ceph mkdir /var/lib/ceph/mgr/ceph-ceph-mgr1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将产生的密钥文件存入此目录下，并命名为keyring</span></span><br><span class="line">vi /var/lib/ceph/mgr/ceph-ceph-mgr1/keyring </span><br><span class="line">[mgr.ceph-mgr1]</span><br><span class="line">        key = AQDbRTZlgjXWBBAAGew4Xta+t9vgIWPCWC8EVg==</span><br></pre></td></tr></table></figure><ol><li>启动ceph-mgr服务</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ceph-mgr -i ceph-mgr</span><br><span class="line">ceph-mgr -i ceph-mgr1</span><br><span class="line">systemctl enable ceph-mgr@k8s-ceph-node0</span><br><span class="line">systemctl enable ceph-mgr@k8s-ceph-node1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检查服务是否启动，查看ceph状态</span></span><br><span class="line">ceph -s</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看当前mgr中可用的模块</span></span><br><span class="line">ceph mgr module ls</span><br></pre></td></tr></table></figure><ol><li><h5 id="创建OSD"><a href="#创建OSD" class="headerlink" title="创建OSD"></a>创建OSD</h5></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ceph-volume lvm create --data /dev/sda8</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看当前的lvm逻辑卷</span></span><br><span class="line">ceph-volume lvm list</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看ceph状态</span></span><br><span class="line">ceph -s</span><br></pre></td></tr></table></figure><ol><li><h5 id="安装配置Ceph-dashboard"><a href="#安装配置Ceph-dashboard" class="headerlink" title="安装配置Ceph-dashboard"></a>安装配置Ceph-dashboard</h5></li><li><p>开启dashboard功能</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph mgr module enable dashboard</span><br></pre></td></tr></table></figure><ol><li>创建证书</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph dashboard create-self-signed-cert</span><br></pre></td></tr></table></figure><ol><li>配置web登录的用户名和密码</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建/etc/ceph/dashboard.key，并将密码写入</span></span><br><span class="line">echo &quot;qishi#09319&quot; &gt;/etc/ceph/dashboard.key</span><br><span class="line">ceph dashboard ac-user-create k8s administrator -i /etc/ceph/dashboard.key</span><br></pre></td></tr></table></figure><ol><li>修改dashboard默认端口(可选)</li></ol><p>配置端口，默认端口是8443，修改为18443，修改后需重启mgr，修改端口才生效。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ceph config set mgr mgr/dashboard/server_port 18443</span><br><span class="line">systemctl restart ceph-mgr.target</span><br></pre></td></tr></table></figure><ol><li>查看发布服务地址并登录</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph mgr services</span><br></pre></td></tr></table></figure><blockquote><p>{</p><p>​    “dashboard”: “<a href="https://k8s-ceph-node0:8443/">https://k8s-ceph-node0:8443/</a>“</p><p>}</p></blockquote><img src="/yyg/57e2a956/image-20240323222910679-1711204151978-5.png" class="" title="image-20240323222910679"><ol><li><h4 id="node节点"><a href="#node节点" class="headerlink" title="node节点"></a>node节点</h4></li><li><h5 id="扩展Monitor"><a href="#扩展Monitor" class="headerlink" title="扩展Monitor"></a>扩展Monitor</h5></li><li><p>修改master节点上的配置</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ceph/ceph.conf</span><br><span class="line">[global]</span><br><span class="line">fsid = 30912204-0c26-413f-8e00-6d55c9c0af03     # 生成的FSID</span><br><span class="line">mon initial members =k8s-ceph-node0,k8s-ceph-node1,k8s-ceph-node2,k8s-ceph-node3            # 主机名</span><br><span class="line">mon host = 10.10.1.16,10.10.1.17,10.10.1.18,10.10.1.15                       # 对应的IP</span><br><span class="line">public network = 10.10.1.0/24</span><br><span class="line">auth cluster required = cephx</span><br><span class="line">auth service required = cephx</span><br><span class="line">auth client required = cephx</span><br><span class="line">osd journal size = 1024</span><br><span class="line">osd pool default size = 3</span><br><span class="line">osd pool default min size = 2</span><br><span class="line">osd pool default pg num = 333</span><br><span class="line">osd pool default pgp num = 333</span><br><span class="line">osd crush chooseleaf type = 1</span><br><span class="line">[mon]</span><br><span class="line">mon allow pool delete = true</span><br><span class="line"></span><br><span class="line">[mds.k8s-ceph-node0]</span><br><span class="line">host = k8s-ceph-node0</span><br></pre></td></tr></table></figure><ol><li>将配置和密钥文件分发到其它的节点上（master节点）</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">生成公钥，复制到node节点主机上</span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">ssh-copy-id 10.10.1.17</span><br><span class="line">ssh-copy-id 10.10.1.18</span><br><span class="line">ssh-copy-id 10.10.1.15</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">复制认证密钥</span></span><br><span class="line">scp /etc/ceph/*  10.10.1.17:/etc/ceph/</span><br><span class="line">scp /etc/ceph/*  10.10.1.18:/etc/ceph/</span><br><span class="line">scp /etc/ceph/*  10.10.1.15:/etc/ceph/</span><br></pre></td></tr></table></figure><ol><li>在node节点创建ceph相关目录，并添加权限：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p  /var/lib/ceph/&#123;bootstrap-mds,bootstrap-mgr,bootstrap-osd,bootstrap-rbd,bootstrap-rgw,mds,mgr,mon,osd&#125;</span><br><span class="line">chown  -R ceph:ceph /var/lib/ceph</span><br><span class="line"></span><br><span class="line">sudo -u ceph mkdir /var/lib/ceph/mon/ceph-k8s-ceph-node1</span><br><span class="line">sudo -u ceph mkdir /var/lib/ceph/mon/ceph-k8s-ceph-node2</span><br></pre></td></tr></table></figure><ol><li>修改node节点的配置文件,以node1为例（其他节点相似）</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">fsid = 30912204-0c26-413f-8e00-6d55c9c0af03     # 生成的FSID</span><br><span class="line">mon initial members =k8s-ceph-node0,k8s-ceph-node1,k8s-ceph-node2,k8s-ceph-node3           # 主机名</span><br><span class="line">mon host = 10.10.1.16,10.10.1.17,10.10.1.18,10.10.1.15                       # 对应的IP</span><br><span class="line">public network = 10.10.1.0/24</span><br><span class="line">auth cluster required = cephx</span><br><span class="line">auth service required = cephx</span><br><span class="line">auth client required = cephx</span><br><span class="line">osd journal size = 1024</span><br><span class="line">osd pool default size = 3</span><br><span class="line">osd pool default min size = 2</span><br><span class="line">osd pool default pg num = 333</span><br><span class="line">osd pool default pgp num = 333</span><br><span class="line">osd crush chooseleaf type = 1</span><br><span class="line">[mon]</span><br><span class="line">mon allow pool delete = true</span><br><span class="line"></span><br><span class="line">[mon.k8s-ceph-node1]</span><br><span class="line">mon_addr = 10.10.1.17:6789</span><br><span class="line">host = k8s-ceph-node1</span><br></pre></td></tr></table></figure><ol><li>获取集群中的密钥和map,以node1为例（其他节点相似）</li></ol><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ceph</span> <span class="string">auth get mon. -o /tmp/monkeyring</span></span><br><span class="line"><span class="attr">ceph</span> <span class="string">mon getmap -o /tmp/monmap</span></span><br></pre></td></tr></table></figure><ol><li>使用已有的密钥和map添加一个新的Monitor,指定主机名,以node1为例（其他节点相似）</li></ol><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u ceph ceph-mon --mkfs -i k8s-ceph-node1 --monmap /tmp/monmap --keyring /tmp/monkeyring</span><br></pre></td></tr></table></figure><ol><li>启动服务,以node1为例（其他节点相似）</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">systemctl</span> start ceph-mon<span class="variable">@k8s</span>-ceph-node1</span><br><span class="line">systemctl enable ceph-mon<span class="variable">@k8s</span>-ceph-node1</span><br><span class="line"><span class="comment">#查看mon状态</span></span><br><span class="line">ceph -s</span><br><span class="line">ceph mon stat</span><br></pre></td></tr></table></figure><ol><li><h5 id="添加OSD"><a href="#添加OSD" class="headerlink" title="添加OSD"></a>添加OSD</h5></li></ol><p>从已经存在的osd的master节点上拷贝初始化的密钥文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp -p  /var/lib/ceph/bootstrap-osd/ceph.keyring  10.10.1.17:/var/lib/ceph/bootstrap-osd/</span><br><span class="line">scp -p  /var/lib/ceph/bootstrap-osd/ceph.keyring  10.10.1.18:/var/lib/ceph/bootstrap-osd/</span><br><span class="line">scp -p  /var/lib/ceph/bootstrap-osd/ceph.keyring  10.10.1.15:/var/lib/ceph/bootstrap-osd/</span><br></pre></td></tr></table></figure><p>在node节点添加osd</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ceph-volume lvm create --data /dev/sdb</span><br><span class="line"></span><br><span class="line">systemctl enable ceph-osd@k8s-ceph-node1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看状态</span></span><br><span class="line">ceph -s</span><br></pre></td></tr></table></figure><ol><li><h4 id="添加Mds（以node0为例）"><a href="#添加Mds（以node0为例）" class="headerlink" title="添加Mds（以node0为例）"></a>添加Mds（以node0为例）</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建目录</span></span><br><span class="line">sudo -u ceph mkdir -p /var/lib/ceph/mds/ceph-k8s-ceph-node0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建密钥</span></span><br><span class="line">ceph-authtool --create-keyring /var/lib/ceph/mds/ceph-k8s-ceph-node0/keyring --gen-key -n mds.k8s-ceph-node0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">导入密钥，并设置caps</span></span><br><span class="line">ceph auth add mds.k8s-ceph-node0 osd &quot;allow rwx&quot; mds &quot;allow&quot; mon &quot;allow profile mds&quot; -i /var/lib/ceph/mds/ceph-k8s-ceph-node0/keyring</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">手动启动服务</span></span><br><span class="line">ceph-mds --cluster ceph -i k8s-ceph-node0 -m k8s-ceph-node0:6789</span><br><span class="line"> chown -R ceph:ceph /var/lib/ceph/mds/</span><br><span class="line"> systemctl start ceph-mds@k8s-ceph-node0</span><br><span class="line"> systemctl enable ceph-mds@k8s-ceph-node0</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">检查服务是否启动</span></span><br><span class="line"> ps -ef|grep ceph-mds</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">检查ceph 集群状态</span></span><br><span class="line"> ceph -s</span><br></pre></td></tr></table></figure><ol><li><h4 id="创建CephFS"><a href="#创建CephFS" class="headerlink" title="创建CephFS"></a>创建CephFS</h4></li></ol><p>创建pools</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">存储数据</span></span><br><span class="line">ceph osd pool create cephfs_data 64</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">存储元数据</span></span><br><span class="line">ceph osd pool create cephfs_metadata 64</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启用cephfs文件系统</span></span><br><span class="line">ceph fs new cephfs cephfs_metadata cephfs_data</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看文件系统状态</span></span><br><span class="line">ceph fs ls</span><br><span class="line">ceph mds stat</span><br></pre></td></tr></table></figure><ol><li><h4 id="创建rbd池"><a href="#创建rbd池" class="headerlink" title="创建rbd池"></a>创建rbd池</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建rbd池</span></span><br><span class="line">ceph osd pool create rbd-k8s 64 64</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启用</span> </span><br><span class="line">ceph osd pool application enable rbd-k8s rbd</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">初始化</span></span><br><span class="line">rbd pool init rbd-k8s</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看</span></span><br><span class="line">ceph osd lspools</span><br></pre></td></tr></table></figure><h2 id="二：部署高可用k8s集群"><a href="#二：部署高可用k8s集群" class="headerlink" title="二：部署高可用k8s集群"></a>二：部署高可用k8s集群</h2><h3 id="任务一：配置准备（与ceph集群一样）"><a href="#任务一：配置准备（与ceph集群一样）" class="headerlink" title="任务一：配置准备（与ceph集群一样）"></a>任务一：配置准备（与ceph集群一样）</h3><h3 id="任务二：安装docker"><a href="#任务二：安装docker" class="headerlink" title="任务二：安装docker"></a>任务二：安装docker</h3><ol><li>配置Docker CE的yum存储库。打开<code>docker-ce.repo</code>的文件，并将以下内容复制到文件中：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">[docker-ce-stable]</span><br><span class="line">name=Docker CE Stable - $basearch</span><br><span class="line">baseurl=https://download.docker.com/linux/centos/7/$basearch/stable</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://download.docker.com/linux/centos/gpg &#x27; &gt; /etc/yum.repos.d/docker-ce.repo</span><br></pre></td></tr></table></figure><p>保存并退出文件。</p><ol><li>安装Docker CE。运行以下命令来安装Docker CE：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> yum -y install docker-ce docker-ce-cli  containerd.io</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动docker并设置开机自启</span></span><br><span class="line">systemctl start docker  </span><br><span class="line">systemctl enable docker</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看版本</span></span><br><span class="line">docker -v</span><br><span class="line">docker compose version</span><br></pre></td></tr></table></figure><ol><li>Docker配置修改，设置cgroup驱动，使用systemd，配置修改为如下。</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将配置写入daemon.json文件</span></span><br><span class="line">echo &#x27;&#123;</span><br><span class="line">  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],</span><br><span class="line">  &quot;data-root&quot;: &quot;/data/docker&quot;</span><br><span class="line">&#125; &#x27; &gt; /etc/docker/daemon.json</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看</span></span><br><span class="line">cat /etc/docker/daemon.json</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br><span class="line">docker info</span><br></pre></td></tr></table></figure><ol><li>创建所需目录</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /data</span><br><span class="line">mkdir  cri-dockerd calico    dashboard   metrics-server  script  ingress-nginx</span><br></pre></td></tr></table></figure><h3 id="任务三：安装cri-dockerd-（k8s-1-24及以上版本）"><a href="#任务三：安装cri-dockerd-（k8s-1-24及以上版本）" class="headerlink" title="任务三：安装cri-dockerd （k8s 1.24及以上版本）"></a>任务三：安装cri-dockerd （k8s 1.24及以上版本）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cd /data/cri-dockerd</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载cri-dockerd安装包</span></span><br><span class="line">wget https://github.com/Mirantis/cri-dockerd/releases/download/v0.3.4/cri-dockerd-0.3.4-3.el8.x86_64.rpm</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装cri-dockerd</span></span><br><span class="line">rpm -ivh cri-dockerd-0.3.4-3.el8.x86_64.rpm</span><br><span class="line">docker pull registry.aliyuncs.com/google_containers/pause:3.9</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改镜像地址为国内，否则kubelet拉取不了镜像导致启动失败</span></span><br><span class="line">sed -i.bak &#x27;s|ExecStart=.*$|ExecStart=/usr/bin/cri-dockerd --container-runtime-endpoint fd:// --pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.9|g&#x27; /usr/lib/systemd/system/cri-docker.service</span><br><span class="line">cat /usr/lib/systemd/system/cri-docker.service</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动cri-dockerd</span></span><br><span class="line">systemctl daemon-reload </span><br><span class="line">systemctl start cri-docker.service</span><br><span class="line">systemctl enable cri-docker.service</span><br></pre></td></tr></table></figure><h3 id="任务四：安装高可用组件"><a href="#任务四：安装高可用组件" class="headerlink" title="任务四：安装高可用组件"></a>任务四：安装高可用组件</h3><p>部署高可用集群需要安装<strong>keepalived和haproxy，实现**</strong>master<strong><strong>节点高可用，</strong></strong>在各master节点操作**</p><ol><li>安装keepalived与haproxy</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install keepalived haproxy -y</span><br></pre></td></tr></table></figure><ol><li>备份keepalived与haproxy配置文件</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.conf.bak</span><br><span class="line">cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.bak</span><br></pre></td></tr></table></figure><ol><li><p>修改各master节点的<code>/etc/keepalived/keepalived.conf</code>文件</p><ol><li>future-k8s-master0</li><li><p>```Shell<br>echo ‘<br>global_defs {<br>   router_id k8s<br>}</p><p>vrrp_script check_haproxy {</p><pre><code>script &quot;killall -0 haproxy&quot;interval 3weight -2fall 10rise 2</code></pre><p>}</p><p>vrrp_instance VI_1 {</p><pre><code>state MASTER  #主节点 则为MASTER ,其他则为 BACKUPinterface ens192  #网卡名称virtual_router_id 51priority 250   #优先级nopreempt   #设置非抢占模式advert_int 1authentication &#123;    auth_type PASS    auth_pass ceb1b3ec013d66163d6ab&#125;virtual_ipaddress &#123;    10.10.1.83/24   #虚拟ip&#125;track_script &#123;    check_haproxy&#125;</code></pre><p>}<br>‘ &gt; /etc/keepalived/keepalived.conf<br>cat /etc/keepalived/keepalived.conf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. future-k8s-master1</span><br><span class="line">4. ```Shell</span><br><span class="line">   echo &#x27;</span><br><span class="line">   global_defs &#123;</span><br><span class="line">      router_id k8s</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   vrrp_script check_haproxy &#123;</span><br><span class="line">       script &quot;killall -0 haproxy&quot;</span><br><span class="line">       interval 3</span><br><span class="line">       weight -2</span><br><span class="line">       fall 10</span><br><span class="line">       rise 2</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   vrrp_instance VI_1 &#123;</span><br><span class="line">       state BACKUP  #主节点 则为MASTER ,其他则为 BACKUP</span><br><span class="line">       interface ens192  #网卡名称</span><br><span class="line">       virtual_router_id 51</span><br><span class="line">       priority 200   #优先级</span><br><span class="line">       nopreempt   #设置非抢占模式</span><br><span class="line">       advert_int 1</span><br><span class="line">       authentication &#123;</span><br><span class="line">           auth_type PASS</span><br><span class="line">           auth_pass ceb1b3ec013d66163d6ab</span><br><span class="line">       &#125;</span><br><span class="line">       virtual_ipaddress &#123;</span><br><span class="line">           10.10.1.83/24   #虚拟ip</span><br><span class="line">       &#125;</span><br><span class="line">       track_script &#123;</span><br><span class="line">           check_haproxy</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;    </span><br><span class="line">   &#x27; &gt; /etc/keepalived/keepalived.conf</span><br><span class="line">   cat  /etc/keepalived/keepalived.conf</span><br></pre></td></tr></table></figure></li><li><p>future-k8s-master2</p></li><li><p>```Shell<br>echo ‘<br>global_defs {<br>   router_id k8s<br>}</p><p>vrrp_script check_haproxy {</p><pre><code>script &quot;killall -0 haproxy&quot;interval 3weight -2fall 10rise 2</code></pre><p>}</p><p>vrrp_instance VI_1 {</p><pre><code>state BACKUP  #主节点 则为MASTER ,其他则为 BACKUPinterface ens192  #网卡名称virtual_router_id 51priority 150   #优先级nopreempt   #设置非抢占模式advert_int 1authentication &#123;    auth_type PASS    auth_pass ceb1b3ec013d66163d6ab&#125;virtual_ipaddress &#123;    10.10.1.83/24   #虚拟ip&#125;track_script &#123;    check_haproxy&#125;</code></pre><p>}<br>‘ &gt; /etc/keepalived/keepalived.conf<br>cat  /etc/keepalived/keepalived.conf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">2. 修改各master节点的`/etc/haproxy/haproxy.cfg`文件，（三个master节点的配置文件相同）</span><br><span class="line"></span><br><span class="line">```Shell</span><br><span class="line">echo &quot;</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># Global settings</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">global</span><br><span class="line">    # to have these messages end up in /var/log/haproxy.log you will</span><br><span class="line">    # need to:</span><br><span class="line">    # 1) configure syslog to accept network log events.  This is done</span><br><span class="line">    #    by adding the &#x27;-r&#x27; option to the SYSLOGD_OPTIONS in</span><br><span class="line">    #    /etc/sysconfig/syslog</span><br><span class="line">    # 2) configure local2 events to go to the /var/log/haproxy.log</span><br><span class="line">    #   file. A line like the following can be added to</span><br><span class="line">    #   /etc/sysconfig/syslog</span><br><span class="line">    #</span><br><span class="line">    #    local2.*                       /var/log/haproxy.log</span><br><span class="line">    #</span><br><span class="line">    log         127.0.0.1 local2</span><br><span class="line"></span><br><span class="line">    chroot      /var/lib/haproxy</span><br><span class="line">    pidfile     /var/run/haproxy.pid</span><br><span class="line">    maxconn     4000</span><br><span class="line">    user        haproxy</span><br><span class="line">    group       haproxy</span><br><span class="line">    daemon</span><br><span class="line"></span><br><span class="line">    # turn on stats unix socket</span><br><span class="line">    stats socket /var/lib/haproxy/stats</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># common defaults that all the &#x27;listen&#x27; and &#x27;backend&#x27; sections will</span><br><span class="line"># use if not designated in their block</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">defaults</span><br><span class="line">    mode                    http</span><br><span class="line">    log                     global</span><br><span class="line">    option                  httplog</span><br><span class="line">    option                  dontlognull</span><br><span class="line">    option http-server-close</span><br><span class="line">    option forwardfor       except 127.0.0.0/8</span><br><span class="line">    option                  redispatch</span><br><span class="line">    retries                 3</span><br><span class="line">    timeout http-request    10s</span><br><span class="line">    timeout queue           1m</span><br><span class="line">    timeout connect         10s</span><br><span class="line">    timeout client          1m</span><br><span class="line">    timeout server          1m</span><br><span class="line">    timeout http-keep-alive 10s</span><br><span class="line">    timeout check           10s</span><br><span class="line">    maxconn                 3000</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># kubernetes apiserver frontend which proxys to the backends</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">frontend kubernetes-apiserver</span><br><span class="line">    mode                 tcp</span><br><span class="line">    bind                 *:16443 #高可用监控端口，初始化k8s集群时会用</span><br><span class="line">    option               tcplog</span><br><span class="line">    default_backend      kubernetes-apiserver</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># round robin balancing between the various backends</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">backend kubernetes-apiserver</span><br><span class="line">    mode        tcp</span><br><span class="line">    balance     roundrobin</span><br><span class="line">    server      future-k8s-master0   10.10.1.80:6443 check</span><br><span class="line">    server      future-k8s-master1   10.10.1.81:6443 check</span><br><span class="line">    server      future-k8s-master2   10.10.1.82:6443 check</span><br><span class="line"></span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># collection haproxy statistics message</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">listen stats</span><br><span class="line">    bind                 *:1080</span><br><span class="line">    stats auth           admin:awesomePassword</span><br><span class="line">    stats refresh        5s</span><br><span class="line">    stats realm          HAProxy\ Statistics</span><br><span class="line">    stats uri            /admin?stats</span><br><span class="line"></span><br><span class="line">&quot; &gt; /etc/haproxy/haproxy.cfg</span><br><span class="line"></span><br><span class="line">cat /etc/haproxy/haproxy.cfg</span><br></pre></td></tr></table></figure></li></ol></li><li><p>启动（各master节点按顺序启动）</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动keepalived</span>  </span><br><span class="line">systemctl enable keepalived  &amp;&amp; systemctl start keepalived  </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动haproxy</span> </span><br><span class="line">systemctl enable haproxy &amp;&amp; systemctl start haproxy</span><br><span class="line">systemctl status keepalived</span><br><span class="line">systemctl status haproxy</span><br></pre></td></tr></table></figure><ol><li>在future-k8s-master0查看绑定的vip地址  </li></ol><blockquote><p>ip add 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00    inet 127.0.0.1/8 scope host lo       valid_lft forever preferred_lft forever    inet6 ::1/128 scope host       valid_lft forever preferred_lft forever 2: ens192: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000    link/ether 00:50:56:9a:eb:48 brd ff:ff:ff:ff:ff:ff    inet 10.10.1.80/24 brd 10.10.3.255 scope global noprefixroute ens192       valid_lft forever preferred_lft forever    inet 10.10.1.83/24 scope global ens192       valid_lft forever preferred_lft forever    inet6 fe80::250:56ff:fe9a:eb48/64 scope link noprefixroute       valid_lft forever preferred_lft forever</p></blockquote><h3 id="任务五：部署k8s集群"><a href="#任务五：部署k8s集群" class="headerlink" title="任务五：部署k8s集群"></a>任务五：部署k8s集群</h3><ol><li><h4 id="添加yum软件源"><a href="#添加yum软件源" class="headerlink" title="添加yum软件源"></a>添加yum软件源</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/yum.repos.d/kubernetes.repo &lt;&lt; EOF</span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">repo_gpgcheck=0</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><ol><li><h4 id="安装kubeadm，kubelet和kubectl"><a href="#安装kubeadm，kubelet和kubectl" class="headerlink" title="安装kubeadm，kubelet和kubectl"></a>安装kubeadm，kubelet和kubectl</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装kubelet、kubeadm、kubectl</span></span><br><span class="line">yum install -y kubelet-1.28.0 kubeadm-1.28.0 kubectl-1.28.0 --disableexcludes=kubernetes</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将cgroup改为systemd</span></span><br><span class="line">echo &#x27;KUBELET_EXTRA_ARGS=&quot;--cgroup-driver=systemd&quot;&#x27; &gt; /etc/sysconfig/kubelet</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看</span></span><br><span class="line">cat /etc/sysconfig/kubelet</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置开机启动</span></span><br><span class="line">systemctl start kubelet.service</span><br><span class="line">systemctl enable kubelet.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看版本</span></span><br><span class="line"> kubeadm version</span><br><span class="line"> kubelet --version</span><br><span class="line"> kubectl version </span><br></pre></td></tr></table></figure><ol><li><h4 id="初始化k8s集群（future-k8s-master0节点）"><a href="#初始化k8s集群（future-k8s-master0节点）" class="headerlink" title="初始化k8s集群（future-k8s-master0节点）"></a>初始化k8s集群（future-k8s-master0节点）</h4><h5 id="方式一：使用配置文件初始化"><a href="#方式一：使用配置文件初始化" class="headerlink" title="方式一：使用配置文件初始化"></a>方式一：使用配置文件初始化</h5><blockquote><ol><li>导出默认配置文件 (可选)</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm config print init-defaults &gt; kubeadm-config.yaml</span><br></pre></td></tr></table></figure></blockquote><ol><li>配置文件</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: kubeadm.k8s.io/v1beta3</span><br><span class="line">kind: InitConfiguration</span><br><span class="line">localAPIEndpoint:</span><br><span class="line">  advertiseAddress: 10.10.1.83  #虚拟ip</span><br><span class="line">  bindPort: 6443</span><br><span class="line">nodeRegistration:</span><br><span class="line">  criSocket: unix:///var/run/cri-dockerd.sock</span><br><span class="line">---</span><br><span class="line">apiServer:</span><br><span class="line">  certSANs:    #master节点与对应主机名</span><br><span class="line">    - future-k8s-master0</span><br><span class="line">    - future-k8s-master1</span><br><span class="line">    - future-k8s-master2</span><br><span class="line">    - future-k8s-vip</span><br><span class="line">    - 10.10.1.80</span><br><span class="line">    - 10.10.1.81</span><br><span class="line">    - 10.10.1.82</span><br><span class="line">    - 10.10.1.83</span><br><span class="line">    - 127.0.0.1</span><br><span class="line">  timeoutForControlPlane: 4m0s</span><br><span class="line">apiVersion: kubeadm.k8s.io/v1beta3</span><br><span class="line">certificatesDir: /etc/kubernetes/pki</span><br><span class="line">clusterName: kubernetes</span><br><span class="line">controlPlaneEndpoint: &quot;future-k8s-vip:16443&quot; #虚拟ip及高可用配置的端口号</span><br><span class="line">controllerManager: &#123;&#125;</span><br><span class="line">dns: &#123;&#125;</span><br><span class="line">etcd:</span><br><span class="line">  local:</span><br><span class="line">    dataDir: /var/lib/etcd</span><br><span class="line">imageRepository: registry.aliyuncs.com/google_containers</span><br><span class="line">kind: ClusterConfiguration</span><br><span class="line">kubernetesVersion: 1.28.0</span><br><span class="line">networking:</span><br><span class="line">  dnsDomain: cluster.local</span><br><span class="line">  podSubnet: 10.244.0.0/16</span><br><span class="line">  serviceSubnet: 10.96.0.0/12</span><br><span class="line">scheduler: &#123;&#125;</span><br><span class="line">&#x27; &gt; /data/script/kubeadm-config.yaml</span><br><span class="line">cat /data/script/kubeadm-config.yaml</span><br></pre></td></tr></table></figure><ol><li>集群初始化</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init --config kubeadm-config.yaml --upload-certs</span><br><span class="line"></span><br><span class="line">mkdir -p $HOME/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure><h5 id="方式二：使用命令初始化"><a href="#方式二：使用命令初始化" class="headerlink" title="方式二：使用命令初始化"></a>方式二：使用命令初始化</h5><ol><li>部署master节点，在10.10.1.80执行，初始化master节点</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init \</span><br><span class="line">  --apiserver-advertise-address=10.10.1.80 \</span><br><span class="line">  --image-repository registry.aliyuncs.com/google_containers \</span><br><span class="line">  --kubernetes-version v1.28.0 \</span><br><span class="line">  --control-plane-endpoint=future-k8s-vip:16443 \  #虚拟ip（未定）</span><br><span class="line">  --control-plane-endpoint=future-k8s-vip \  #虚拟ip（未定）</span><br><span class="line">  --service-cidr=10.96.0.0/12 \</span><br><span class="line">  --pod-network-cidr=10.244.0.0/16 \</span><br><span class="line">  --cri-socket=unix:///var/run/cri-dockerd.sock \</span><br><span class="line">  --ignore-preflight-errors=all </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">mkdir -p $HOME/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure><ol><li>配置ssh免密码</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在10.10.1.80上生成公钥，复制到其他master节点上</span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">ssh-copy-id 10.10.1.81</span><br><span class="line">ssh-copy-id 10.10.1.82</span><br></pre></td></tr></table></figure><ol><li>将10.10.1.80上的证书拷贝到其他master节点</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在其他master节点创建证书存放目录</span></span><br><span class="line">cd /root &amp;&amp; mkdir -p /etc/kubernetes/pki/etcd &amp;&amp;mkdir -p ~/.kube/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将future-k8s-master0的证书复制到future-k8s-master1</span></span><br><span class="line">scp /etc/kubernetes/pki/ca.crt 10.10.1.81:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/ca.key 10.10.1.81:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/sa.key 10.10.1.81:/etc/kubernetes/pki/</span><br><span class="line">scp /etc/kubernetes/pki/sa.pub 10.10.1.81:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/front-proxy-ca.crt 10.10.1.81:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/front-proxy-ca.key 10.10.1.81:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/etcd/ca.crt 10.10.1.81:/etc/kubernetes/pki/etcd/</span><br><span class="line">scp /etc/kubernetes/pki/etcd/ca.key 10.10.1.81:/etc/kubernetes/pki/etcd/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将future-k8s-master0的证书复制到future-k8s-master2</span></span><br><span class="line">scp /etc/kubernetes/pki/ca.crt 10.10.1.82:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/ca.key 10.10.1.82:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/sa.key 10.10.1.82:/etc/kubernetes/pki/</span><br><span class="line">scp /etc/kubernetes/pki/sa.pub 10.10.1.82:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/front-proxy-ca.crt 10.10.1.82:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/front-proxy-ca.key 10.10.1.82:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/etcd/ca.crt 10.10.1.82:/etc/kubernetes/pki/etcd/</span><br><span class="line">scp /etc/kubernetes/pki/etcd/ca.key 10.10.1.82:/etc/kubernetes/pki/etcd/</span><br></pre></td></tr></table></figure></li><li><h4 id="初始化其他master节点"><a href="#初始化其他master节点" class="headerlink" title="初始化其他master节点"></a>初始化其他master节点</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> kubeadm join future-k8s-vip:16443 --token yjphdh.guefcomqw3am4ask \</span><br><span class="line">        --discovery-token-ca-cert-hash sha256:ed44c7deada0ea0fe5a54212ab4e5aa6fc34672ffe2a2c87a31ba73306e75c21 \</span><br><span class="line">        --control-plane --certificate-key 4929b83577eafcd5933fc0b6506cb6d82e7bc481751e442888c4c2b32b5d0c9c  --cri-socket=unix:///var/run/cri-dockerd.sock</span><br><span class="line">mkdir -p $HOME/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure><ol><li><h4 id="初始化node节点"><a href="#初始化node节点" class="headerlink" title="初始化node节点"></a>初始化node节点</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubeadm join future-k8s-vip:16443 --token yjphdh.guefcomqw3am4ask \</span><br><span class="line">        --discovery-token-ca-cert-hash sha256:ed44c7deada0ea0fe5a54212ab4e5aa6fc34672ffe2a2c87a31ba73306e75c21 --cri-socket=unix:///var/run/cri-dockerd.sock</span><br></pre></td></tr></table></figure><ol><li><h4 id="设置master节点允许调度POD-（可选）"><a href="#设置master节点允许调度POD-（可选）" class="headerlink" title="设置master节点允许调度POD （可选）"></a>设置master节点允许调度POD （可选）</h4></li></ol><p>默认配置下Kubernetes不会将Pod调度到Master节点。如果希望将k8s-master也当作Node使用，需去除污点，开启调度。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看默认配置的污点</span></span><br><span class="line">kubectl describe node future-k8s-master2 |grep Taints</span><br></pre></td></tr></table></figure><blockquote><p>Taints:             node-role.kubernetes.io/control-plane:NoSchedule</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">去除污点</span></span><br><span class="line">kubectl taint nodes future-k8s-master2 node-role.kubernetes.io/control-plane-</span><br></pre></td></tr></table></figure><p>添加woker标记</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加worker标记</span></span><br><span class="line">kubectl label nodes future-k8s-master2 node-role.kubernetes.io/worker=</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除worker标记</span></span><br><span class="line">kubectl label nodes future-k8s-master2 node-role.kubernetes.io/worker-</span><br></pre></td></tr></table></figure><h3 id="任务六：安装网络插件-master"><a href="#任务六：安装网络插件-master" class="headerlink" title="任务六：安装网络插件(master)"></a>任务六：安装网络插件(master)</h3><p>安装calico</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mkdir /data/calico</span><br><span class="line">wget https://docs.tigera.io/archive/v3.25/manifests/calico.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改calico.yaml找到CALICO_IPV4POOL_CIDR</span></span><br><span class="line">vi calico.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############修改内容###################</span></span></span><br><span class="line"> value: &quot;10.244.0.0/16&quot;</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash"><span class="comment">#############修改内容###################</span></span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">在master节点上安装calico</span></span><br><span class="line"> kubectl apply -f calico.yaml</span><br></pre></td></tr></table></figure><p>查看节点状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看所有的节点</span></span><br><span class="line">kubectl get nodes</span><br><span class="line">kubectl get nodes -o wide</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看集群健康情况</span></span><br><span class="line"> kubectl get cs</span><br></pre></td></tr></table></figure><h3 id="任务七：安装nginx进行测试"><a href="#任务七：安装nginx进行测试" class="headerlink" title="任务七：安装nginx进行测试"></a>任务七：安装nginx进行测试</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建Nginx程序</span></span><br><span class="line">kubectl create deployment nginx --image=nginx</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开放80端口</span></span><br><span class="line">kubectl expose deployment nginx --port=80 --type=NodePort</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看pod状态</span></span><br><span class="line">kubectl get pod</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看service状态</span></span><br><span class="line">kubectl get service</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#########################################################################</span></span></span><br><span class="line">NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE</span><br><span class="line">kubernetes   ClusterIP   10.96.0.1       &lt;none&gt;        443/TCP        5d1h</span><br><span class="line">nginx        NodePort    10.98.221.224   &lt;none&gt;        80:32743/TCP   23s</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#########################################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">访问网页测试(端口号以查看service状态得到的为准)</span></span><br><span class="line">http://10.10.1.80:32743/</span><br></pre></td></tr></table></figure><h3 id="任务八：安装Dashboard界面"><a href="#任务八：安装Dashboard界面" class="headerlink" title="任务八：安装Dashboard界面"></a>任务八：安装<strong>Dashboard界面</strong></h3><ol><li>下载yaml文件</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建存放目录</span></span><br><span class="line">mkdir dashboard</span><br><span class="line">cd dashboard/</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.7</span></span><br><span class="line">wget https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml</span><br></pre></td></tr></table></figure><ol><li>修改yaml文件</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vi recommended.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将副本设置为2</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################修改内容#######################</span></span></span><br><span class="line">kind: Service</span><br><span class="line">apiVersion: v1</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    k8s-app: kubernetes-dashboard</span><br><span class="line">  name: kubernetes-dashboard</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line">spec:</span><br><span class="line">  ports:</span><br><span class="line">    - port: 443</span><br><span class="line">      targetPort: 8443</span><br><span class="line">      nodePort: 32009   #添加这一行，注意缩进对齐</span><br><span class="line">  selector:</span><br><span class="line">    k8s-app: kubernetes-dashboard</span><br><span class="line">  type: NodePort          #添加这一行，注意缩进对齐</span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash"><span class="comment">################修改内容#######################</span></span></span><br></pre></td></tr></table></figure><ol><li>应用安装，查看pod和svc</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装</span></span><br><span class="line">kubectl apply -f recommended.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看pod和svc</span></span><br><span class="line">kubectl get pod,svc -o wide -n kubernetes-dashboard</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">########################################################</span></span></span><br><span class="line">NAME                                             READY   STATUS              RESTARTS   AGE   IP       NODE    NOMINATED NODE   READINESS GATES</span><br><span class="line">pod/dashboard-metrics-scraper-5cb4f4bb9c-mg569   0/1     ContainerCreating   0          9s    &lt;none&gt;   node1   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">pod/kubernetes-dashboard-6967859bff-2968p        0/1     ContainerCreating   0          9s    &lt;none&gt;   node1   &lt;none&gt;           &lt;none&gt;</span><br><span class="line"></span><br><span class="line">NAME                                TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)         AGE   SELECTOR</span><br><span class="line">service/dashboard-metrics-scraper   ClusterIP   10.100.129.191   &lt;none&gt;        8000/TCP        9s    k8s-app=dashboard-metrics-scraper</span><br><span class="line">service/kubernetes-dashboard        NodePort    10.106.130.53    &lt;none&gt;        443:31283/TCP   9s    k8s-app=kubernetes-dashboard</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#######################################################</span></span></span><br></pre></td></tr></table></figure><p>使用所查看的svc，所提供的端口访问<strong>Dashboard</strong></p><ol><li>创建dashboard服务账户</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建一个admin-user的服务账户并与集群绑定</span></span><br><span class="line">vi dashboard-adminuser.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#################内容####################</span></span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: ServiceAccount</span><br><span class="line">metadata:</span><br><span class="line">  name: admin-user</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">apiVersion: rbac.authorization.k8s.io/v1</span><br><span class="line">kind: ClusterRoleBinding</span><br><span class="line">metadata:</span><br><span class="line">  name: admin-user</span><br><span class="line">roleRef:</span><br><span class="line">  apiGroup: rbac.authorization.k8s.io</span><br><span class="line">  kind: ClusterRole</span><br><span class="line">  name: cluster-admin</span><br><span class="line">subjects:</span><br><span class="line">- kind: ServiceAccount</span><br><span class="line">  name: admin-user</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line">  </span><br><span class="line">---</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建密钥，获取服务帐户的长期持有者令牌</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Secret</span><br><span class="line">metadata:</span><br><span class="line">  name: admin-user</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line">  annotations:</span><br><span class="line">    kubernetes.io/service-account.name: &quot;admin-user&quot;</span><br><span class="line">type: kubernetes.io/service-account-token</span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash"><span class="comment">#################内容####################</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash">执行生效</span></span><br><span class="line">  kubectl apply -f dashboard-adminuser.yaml</span><br></pre></td></tr></table></figure><ol><li>登录方式</li></ol><p>方案一：获取长期可用token</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将其保存在/data/dashboard/的admin-user.token文件中</span></span><br><span class="line">cd /data/dashboard/</span><br><span class="line">kubectl get secret admin-user -n kubernetes-dashboard -o jsonpath=&#123;&quot;.data.token&quot;&#125; | base64 -d &gt; admin-user.token </span><br></pre></td></tr></table></figure><p>获取长期可用token脚本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">作者：云</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">############描述#############</span></span></span><br><span class="line">:&lt;&lt;!</span><br><span class="line">获取长期可用token脚本</span><br><span class="line">将token存放在admin-user.token文件中</span><br><span class="line">!</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">############描述#############</span></span></span><br><span class="line">kubectl get secret admin-user -n kubernetes-dashboard -o jsonpath=&#123;&quot;.data.token&quot;&#125; | base64 -d &gt; admin-user.token</span><br><span class="line"></span><br><span class="line">echo -e &quot;\033[1;32m创建token成功，请在admin-user.token文件中查看\033[m&quot;</span><br></pre></td></tr></table></figure><p>方案二：使用使用 Kubeconfig 文件登录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">定义 token 变量</span></span><br><span class="line">DASH_TOCKEN=$(kubectl get secret admin-user -n kubernetes-dashboard -o jsonpath=&#123;&quot;.data.token&quot;&#125; | base64 -d)</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置 kubeconfig 集群条目</span></span><br><span class="line">kubectl config set-cluster kubernetes --server=10.10.1.80:6433 --kubeconfig=/root/dashbord-admin.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置 kubeconfig 用户条目</span></span><br><span class="line">kubectl config set-credentials admin-user --token=$DASH_TOCKEN --kubeconfig=/root/dashbord-admin.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置 kubeconfig 上下文条目</span></span><br><span class="line">kubectl config set-context admin-user@kubernetes --cluster=kubernetes --user=admin-user --kubeconfig=/root/dashbord-admin.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置 kubeconfig 当前上下文</span></span><br><span class="line">kubectl config use-context admin-user@kubernetes  --kubeconfig=/root/dashbord-admin.conf</span><br></pre></td></tr></table></figure><p>将生成的dashbord-admin.conf文件放到本地主机上，登录时选择<code>Kubeconfig</code>选项，选择 kubeconfig 文件登录</p><h3 id="任务九：安装metrics-server"><a href="#任务九：安装metrics-server" class="headerlink" title="任务九：安装metrics-server"></a>任务九：安装metrics-server</h3><p>下载部署文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml -O metrics-server-components.yaml</span><br></pre></td></tr></table></figure><p>修改yaml文件中的Deployment内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    k8s-app: metrics-server</span><br><span class="line">  name: metrics-server</span><br><span class="line">  namespace: kube-system</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      k8s-app: metrics-server</span><br><span class="line">  strategy:</span><br><span class="line">    rollingUpdate:</span><br><span class="line">      maxUnavailable: 0</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        k8s-app: metrics-server</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - args:</span><br><span class="line">        - --cert-dir=/tmp</span><br><span class="line">        - --secure-port=4443</span><br><span class="line">        - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname</span><br><span class="line">        - --kubelet-use-node-status-port</span><br><span class="line">        - --metric-resolution=15s</span><br><span class="line">        - --kubelet-insecure-tls  #添加</span><br><span class="line">        image: registry.cn-hangzhou.aliyuncs.com/google_containers/metrics-server:v0.6.4 #修改</span><br><span class="line">        imagePullPolicy: IfNotPresent</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装</span></span><br><span class="line">kubectl apply -f metrics-server-components.yaml</span><br></pre></td></tr></table></figure><p>查看metrics-server的pod状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods --all-namespaces | grep metrics</span><br></pre></td></tr></table></figure><p>等待一些时间，查看查看各类监控图像已成功显示。</p><img src="/yyg/57e2a956/image-20240323222707075-1711204031457-1.png" class="" title="image-20240323222707075"><h3 id="任务十：kubectl命令自动补全"><a href="#任务十：kubectl命令自动补全" class="headerlink" title="任务十：kubectl命令自动补全"></a>任务十：kubectl命令自动补全</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum -y install bash-completion</span><br><span class="line">source /usr/share/bash-completion/bash_completion</span><br><span class="line">echo &#x27;source &lt;(kubectl completion bash)&#x27; &gt;&gt;  ~/.bashrc</span><br><span class="line">bash</span><br></pre></td></tr></table></figure><h3 id="任务十一：ingress-nginx控制器安装"><a href="#任务十一：ingress-nginx控制器安装" class="headerlink" title="任务十一：ingress-nginx控制器安装"></a>任务十一：ingress-nginx控制器安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">下载yaml文件</span></span><br><span class="line">wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.0.0/deploy/static/provider/baremetal/deploy.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改yaml文件中拉取镜像的地址</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################修改内容######################</span></span></span><br><span class="line">willdockerhub/ingress-nginx-controller:v1.0.0</span><br><span class="line">hzde0128/kube-webhook-certgen:v1.0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################修改内容######################</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改Deployment修改成DaemonSet</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改网络模式为host network</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################修改内容######################</span></span></span><br><span class="line">template:</span><br><span class="line">  spec:</span><br><span class="line">    hostNetwork: true</span><br><span class="line">    dnsPolicy: ClusterFirstWithHostNet</span><br><span class="line">    tolerations:  #使用亲和性配置可在所有节点部署</span><br><span class="line">      - key: node-role.kubernetes.io/control-plane</span><br><span class="line">        operator: Exists</span><br><span class="line">        effect: NoSchedule</span><br><span class="line">     nodeSelector:</span><br><span class="line">          kubernetes.io/os: linux</span><br><span class="line">          custem/ingress-controller-ready: &#x27;true&#x27;</span><br><span class="line">      containers:</span><br><span class="line">        - name: controller</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################修改内容######################</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">为工作节点设置标签（必需）</span></span><br><span class="line">kubectl label nodes future-k8s-master0 custem/ingress-controller-ready=true</span><br><span class="line">kubectl label nodes future-k8s-master1 custem/ingress-controller-ready=true</span><br><span class="line">kubectl label nodes future-k8s-master2 custem/ingress-controller-ready=true</span><br><span class="line">kubectl label nodes future-k8s-node3 custem/ingress-controller-ready=true</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装</span></span><br><span class="line">kubectl apply -f deploy.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看状态</span></span><br><span class="line">kubectl get pods -n ingress-nginx</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">###############状态##################</span></span></span><br><span class="line">NAME                                       READY   STATUS      RESTARTS   AGE</span><br><span class="line">ingress-nginx-admission-create-2lz4v       0/1     Completed   0          5m46s</span><br><span class="line">ingress-nginx-admission-patch-c6896        0/1     Completed   0          5m46s</span><br><span class="line">ingress-nginx-controller-7575fb546-q29qn   1/1     Running     0          5m46s</span><br></pre></td></tr></table></figure><h3 id="任务十二：配置Dashboard代理"><a href="#任务十二：配置Dashboard代理" class="headerlink" title="任务十二：配置Dashboard代理"></a>任务十二：配置<strong>Dashboard代理</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: Ingress</span><br><span class="line">metadata:</span><br><span class="line">  name: k8s-dashboard</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line">  labels:</span><br><span class="line">    ingress: k8s-dashboard</span><br><span class="line">  annotations:</span><br><span class="line">    nginx.ingress.kubernetes.io/rewrite-target: /  #重写路径</span><br><span class="line">    nginx.ingress.kubernetes.io/force-ssl-redirect: &quot;true&quot;   #http自动转https</span><br><span class="line">    nginx.ingress.kubernetes.io/use-regex: &quot;true&quot;</span><br><span class="line">    nginx.ingress.kubernetes.io/backend-protocol: &quot;HTTPS&quot;</span><br><span class="line">spec:</span><br><span class="line">  ingressClassName: nginx </span><br><span class="line">  rules:</span><br><span class="line">    - host: k8s.yjs.51xueweb.cn</span><br><span class="line">      http:</span><br><span class="line">        paths:</span><br><span class="line">          - path: /</span><br><span class="line">            pathType: Prefix</span><br><span class="line">            backend:</span><br><span class="line">              service:</span><br><span class="line">                name: kubernetes-dashboard</span><br><span class="line">                port:</span><br><span class="line">                  number: 443</span><br><span class="line">&#x27; &gt; /data/dashboard/dashboard-ingress.yaml</span><br></pre></td></tr></table></figure><h2 id="三：对接k8s集群与ceph集群"><a href="#三：对接k8s集群与ceph集群" class="headerlink" title="三：对接k8s集群与ceph集群"></a>三：对接k8s集群与ceph集群</h2><h3 id="任务一：安装ceph客户端（ceph-common）"><a href="#任务一：安装ceph客户端（ceph-common）" class="headerlink" title="任务一：安装ceph客户端（ceph-common）"></a>任务一：安装ceph客户端（ceph-common）</h3><p>在k8s集群的每个节点安装ceph-common</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install ceph-common -y</span><br></pre></td></tr></table></figure><h3 id="任务二：同步cpeh集群配置文件"><a href="#任务二：同步cpeh集群配置文件" class="headerlink" title="任务二：同步cpeh集群配置文件"></a>任务二：同步cpeh集群配置文件</h3><p>将 ceph 集群的 /etc/ceph/{ceph.conf,ceph.client.admin.keyring} 文件同步到 k8s 所有节点上</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">配置ssh免密</span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">ssh-copy-id 10.10.1.80</span><br><span class="line">ssh-copy-id 10.10.1.81</span><br><span class="line">ssh-copy-id 10.10.1.82</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拷贝文件</span></span><br><span class="line">scp -r /etc/ceph/&#123;ceph.conf,ceph.client.admin.keyring&#125; 10.10.1.80:/etc/ceph</span><br><span class="line">scp -r /etc/ceph/&#123;ceph.conf,ceph.client.admin.keyring&#125; 10.10.1.81:/etc/ceph</span><br><span class="line">scp -r /etc/ceph/&#123;ceph.conf,ceph.client.admin.keyring&#125; 10.10.1.82:/etc/ceph</span><br></pre></td></tr></table></figure><h3 id="任务三：部署ceph-csi（使用rbd）"><a href="#任务三：部署ceph-csi（使用rbd）" class="headerlink" title="任务三：部署ceph-csi（使用rbd）"></a>任务三：部署ceph-csi（使用rbd）</h3><ol><li>下载ceph-csi组件(k8s中的一个master节点)</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">下载文件</span></span><br><span class="line">wget https://github.com/ceph/ceph-csi/archive/refs/tags/v3.9.0.tar.gz</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">解压</span></span><br><span class="line">mv v3.9.0.tar.gz ceph-csi-v3.9.0.tar.gz</span><br><span class="line">tar -xzf ceph-csi-v3.9.0.tar.gz</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进入目录</span></span><br><span class="line">cd  ceph-csi-3.9.0/deploy/rbd/kubernetes</span><br><span class="line">mkdir /data/cephfs/csi</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拷进csi中，共6六个文件</span></span><br><span class="line">cp * /data/cephfs/csi</span><br></pre></td></tr></table></figure><ol><li>拉取csi组件所需镜像</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看所需镜像</span></span><br><span class="line">grep image csi-rbdplugin-provisioner.yaml</span><br><span class="line">grep image csi-rbdplugin.yaml</span><br></pre></td></tr></table></figure><p>在所有k8s节点上拉取所需的镜像</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /data/script</span><br><span class="line">./pull-images.sh registry.k8s.io/sig-storage/csi-provisioner:v3.5.0</span><br><span class="line">./pull-images.sh registry.k8s.io/sig-storage/csi-resizer:v1.8.0</span><br><span class="line">./pull-images.sh registry.k8s.io/sig-storage/csi-snapshotter:v6.2.2</span><br><span class="line">docker pull  quay.io/cephcsi/cephcsi:v3.9.0</span><br><span class="line">./pull-images.sh registry.k8s.io/sig-storage/csi-attacher:v4.3.0</span><br><span class="line">./pull-images.sh registry.k8s.io/sig-storage/csi-node-driver-registrar:v2.8.0</span><br></pre></td></tr></table></figure><ol><li>创建命名空间<code>cephfs</code></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Namespace</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    kubernetes.io/metadata.name: cephfs</span><br><span class="line">  name: cephfs</span><br><span class="line">  &#x27; &gt; ceph-namespace.yaml</span><br><span class="line">  </span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">执行</span></span><br><span class="line">  kubectl apply -f ceph-namespace.yaml </span><br></pre></td></tr></table></figure><ol><li>创建连接 ceph 集群的秘钥文件csi-rbd-secret.yaml</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Secret</span><br><span class="line">metadata:</span><br><span class="line">  name: csi-rbd-secret</span><br><span class="line">  namespace: cephfs</span><br><span class="line">stringData:</span><br><span class="line">  adminID: admin </span><br><span class="line">  adminKey: AQANDD9lfWg2LBAAHY0mprdbuKFBPJDkE7/I5Q==</span><br><span class="line">  userID: admin  </span><br><span class="line">  userKey: AQANDD9lfWg2LBAAHY0mprdbuKFBPJDkE7/I5Q==</span><br><span class="line">  &#x27; &gt; csi-rbd-secret.yaml</span><br><span class="line">  </span><br><span class="line"><span class="meta prompt_">   #</span><span class="language-bash">执行</span></span><br><span class="line">    kubectl apply -f csi-rbd-secret.yaml</span><br></pre></td></tr></table></figure><ol><li>创建ceph-config-map.yaml </li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: ConfigMap</span><br><span class="line">data:</span><br><span class="line">  ceph.conf: |</span><br><span class="line">     [global]</span><br><span class="line">     fsid = 30912204-0c26-413f-8e00-6d55c9c0af03     # 生成的FSID</span><br><span class="line">     mon initial members =k8s-ceph-node0,k8s-ceph-node1,k8s-ceph-node2            # 主机名</span><br><span class="line">     mon host = 10.10.1.16,10.10.1.17,10.10.1.18                       # 对应的IP</span><br><span class="line">     public network = 10.10.1.0/24</span><br><span class="line">     auth cluster required = cephx</span><br><span class="line">     auth service required = cephx</span><br><span class="line">     auth client required = cephx</span><br><span class="line">     osd journal size = 1024</span><br><span class="line">     osd pool default size = 3</span><br><span class="line">     osd pool default min size = 2</span><br><span class="line">     osd pool default pg num = 333</span><br><span class="line">     osd pool default pgp num = 333</span><br><span class="line">     osd crush chooseleaf type = 1</span><br><span class="line">     [mon]</span><br><span class="line">     mon allow pool delete = true</span><br><span class="line"></span><br><span class="line">     [mds.k8s-ceph-node0]    </span><br><span class="line">     host = k8s-ceph-node0</span><br><span class="line">  keyring: |</span><br><span class="line">metadata:</span><br><span class="line">  name: ceph-config</span><br><span class="line">  namespace: cephfs</span><br><span class="line">&#x27; &gt; ceph-config-map.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">执行</span></span><br><span class="line"> kubectl apply -f ceph-config-map.yaml  </span><br></pre></td></tr></table></figure><ol><li>修改csi-config-map.yaml，配置连接 ceph 集群的信息</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: ConfigMap</span><br><span class="line">metadata:</span><br><span class="line">  name: ceph-csi-config</span><br><span class="line">  namespace: cephfs</span><br><span class="line">  labels:</span><br><span class="line">    addonmanager.kubernetes.io/mode: Reconcile</span><br><span class="line">data:</span><br><span class="line">  config.json: |-</span><br><span class="line">    [&#123;&quot;clusterID&quot;:&quot;30912204-0c26-413f-8e00-6d55c9c0af03&quot;,&quot;monitors&quot;:[&quot;10.10.1.16:6789&quot;,&quot;10.10.1.17:6789&quot;,&quot;10.10.1.18:6789&quot;]&#125;]</span><br><span class="line">&#x27; &gt; csi-config-map.yaml</span><br></pre></td></tr></table></figure><ol><li><p>修改csi组件配置文件</p><ol><li><p>拷贝进<code>/data/cephfs/csi</code>目录中的所有yaml文件中的命名空间由<code>default</code>改为<code>cephfs</code></p></li><li><p>```Shell<br>cd /data/cephfs/csi<br>sed -i “s/namespace: default/namespace: cephfs/g” $(grep -rl “namespace: default” ./)<br>sed -i -e “/^kind: ServiceAccount/{N;N;a\  namespace: cephfs}” $(egrep -rl “^kind: ServiceAccount” ./)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   3. 将`csi-rbdplugin-provisioner.yaml` 和 `csi-rbdplugin.yaml` 中的 kms 部分配置注释掉</span><br><span class="line"></span><br><span class="line">   4. &gt;    \# - name: KMS_CONFIGMAP_NAME</span><br><span class="line">      &gt;</span><br><span class="line">      &gt; ​            \#   value: encryptionConfig</span><br><span class="line">      &gt;</span><br><span class="line">      &gt; </span><br><span class="line">      &gt;</span><br><span class="line">      &gt; \#- name: ceph-csi-encryption-kms-config</span><br><span class="line">      &gt;</span><br><span class="line">      &gt; ​        \#  configMap:</span><br><span class="line">      &gt;</span><br><span class="line">      &gt; ​        \#    name: ceph-csi-encryption-kms-config</span><br><span class="line">      &gt;</span><br><span class="line">      &gt; </span><br><span class="line"></span><br><span class="line">```Shell</span><br><span class="line"> #执行，安装csi组件</span><br><span class="line"> kubectl apply -f csi-config-map.yaml</span><br><span class="line"> kubectl apply -f csi-nodeplugin-rbac.yaml</span><br><span class="line"> kubectl apply -f csidriver.yaml</span><br><span class="line"> kubectl apply -f csi-provisioner-rbac.yaml</span><br><span class="line"> kubectl apply -f csi-rbdplugin-provisioner.yaml</span><br><span class="line"> kubectl apply -f csi-rbdplugin.yaml</span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="任务四：创建storageclass"><a href="#任务四：创建storageclass" class="headerlink" title="任务四：创建storageclass"></a>任务四：创建storageclass</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: storage.k8s.io/v1</span><br><span class="line">kind: StorageClass</span><br><span class="line">metadata:</span><br><span class="line">  annotations:</span><br><span class="line">    k8s.kuboard.cn/storageType: cephfs_provisioner</span><br><span class="line">  name: csi-rbd-sc</span><br><span class="line">provisioner: rbd.csi.ceph.com</span><br><span class="line">parameters:</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">fsName: cephfs  （cephfs方式使用）</span></span><br><span class="line">  clusterID: 30912204-0c26-413f-8e00-6d55c9c0af03 </span><br><span class="line">  pool: rbd-k8s </span><br><span class="line">  imageFeatures: layering</span><br><span class="line">  csi.storage.k8s.io/provisioner-secret-name: csi-rbd-secret</span><br><span class="line">  csi.storage.k8s.io/provisioner-secret-namespace: cephfs</span><br><span class="line">  csi.storage.k8s.io/controller-expand-secret-name: csi-rbd-secret</span><br><span class="line">  csi.storage.k8s.io/controller-expand-secret-namespace: cephfs</span><br><span class="line">  csi.storage.k8s.io/node-stage-secret-name: csi-rbd-secret</span><br><span class="line">  csi.storage.k8s.io/node-stage-secret-namespace: cephfs</span><br><span class="line">  csi.storage.k8s.io/fstype: xfs</span><br><span class="line">reclaimPolicy: Delete</span><br><span class="line">volumeBindingMode: Immediate</span><br><span class="line">allowVolumeExpansion: true</span><br><span class="line">mountOptions:</span><br><span class="line">  - discard</span><br><span class="line"> &#x27; &gt; storageclass.yaml</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">执行</span></span><br><span class="line">  kubectl apply -f storageclass.yaml</span><br></pre></td></tr></table></figure><h3 id="任务五：创建PVC"><a href="#任务五：创建PVC" class="headerlink" title="任务五：创建PVC"></a>任务五：创建PVC</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line">  name: rbd-pvc </span><br><span class="line">  namespace: cephfs</span><br><span class="line">spec:</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 1Gi </span><br><span class="line">  storageClassName: csi-rbd-sc</span><br><span class="line">  &#x27; &gt; pvc.yaml</span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">执行</span></span><br><span class="line"> kubectl apply -f pvc.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看PVC是否创建成功</span></span><br><span class="line">kubectl get pvc -n cephfs</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看PV是否创建成功</span></span><br><span class="line">kubectl get pv -n cephfs</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看ceph集群中的cephfs_data存储池中是否创建了image</span></span><br><span class="line"> rbd ls -p rbd-k8s</span><br></pre></td></tr></table></figure><h3 id="任务六：创建pod，进行测试验证"><a href="#任务六：创建pod，进行测试验证" class="headerlink" title="任务六：创建pod，进行测试验证"></a>任务六：创建pod，进行测试验证</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: csi-rbd-demo-pod</span><br><span class="line">  namespace: cephfs</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">    - name: web-server</span><br><span class="line">      image: nginx:latest</span><br><span class="line">      volumeMounts:</span><br><span class="line">        - name: mypvc</span><br><span class="line">          mountPath: /var/lib/www/html</span><br><span class="line">  volumes:</span><br><span class="line">    - name: mypvc</span><br><span class="line">      persistentVolumeClaim:</span><br><span class="line">        claimName: rbd-pvc </span><br><span class="line">        readOnly: false</span><br><span class="line">&#x27; &gt; pod.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">执行</span></span><br><span class="line"> kubectl apply -f pod.yaml</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">进入容器查看挂载信息</span></span><br><span class="line">kubectl exec -it csi-rbd-demo-pod -n cephfs -- bash</span><br><span class="line"> lsblk -l|grep rbd</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;高可用容器云建设（K8s集群-ceph集群）&quot;&gt;&lt;a href=&quot;#高可用容器云建设（K8s集群-ceph集群）&quot; class=&quot;headerlink&quot; title=&quot;高可用容器云建设（K8s集群+ceph集群）&quot;&gt;&lt;/a&gt;高可用容器云建设（K8s集群+ceph集</summary>
      
    
    
    
    <category term="容器化" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/"/>
    
    <category term="k8s" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/k8s/"/>
    
    <category term="存储系统" scheme="https://marsperl.github.io/categories/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="ceph" scheme="https://marsperl.github.io/categories/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/ceph/"/>
    
    
    <category term="docker" scheme="https://marsperl.github.io/tags/docker/"/>
    
    <category term="k8s" scheme="https://marsperl.github.io/tags/k8s/"/>
    
    <category term="ceph" scheme="https://marsperl.github.io/tags/ceph/"/>
    
    <category term="共享存储" scheme="https://marsperl.github.io/tags/%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8/"/>
    
    <category term="ceph集群" scheme="https://marsperl.github.io/tags/ceph%E9%9B%86%E7%BE%A4/"/>
    
    <category term="容器云" scheme="https://marsperl.github.io/tags/%E5%AE%B9%E5%99%A8%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>高可用k8s集群部署指南</title>
    <link href="https://marsperl.github.io/yyg/612a796b/"/>
    <id>https://marsperl.github.io/yyg/612a796b/</id>
    <published>2024-07-18T15:55:36.808Z</published>
    <updated>2024-07-21T13:38:39.627Z</updated>
    
    <content type="html"><![CDATA[<h1 id="高可用k8s集群部署指南"><a href="#高可用k8s集群部署指南" class="headerlink" title="高可用k8s集群部署指南"></a>高可用k8s集群部署指南</h1><h2 id="任务目标"><a href="#任务目标" class="headerlink" title="任务目标"></a>任务目标</h2><ol><li>完成高可用k8s集群安装部署</li></ol><h2 id="任务平台"><a href="#任务平台" class="headerlink" title="任务平台"></a>任务平台</h2><ol><li>物理设备—</li><li>操作系统：openEuler 22.03 LTS SP2</li></ol><h2 id="部署指南"><a href="#部署指南" class="headerlink" title="部署指南"></a>部署指南</h2><p>集群拓扑图</p><img src="/yyg/612a796b/image-20240323222414360.png" class="" title="image-20240323222414360"><h3 id="任务一：配置准备"><a href="#任务一：配置准备" class="headerlink" title="任务一：配置准备"></a>任务一：配置准备</h3><ol><li>重命名hostname</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.3.121的主机名改为future-k8s-node0</span></span><br><span class="line">hostnamectl set-hostname future-k8s-node0 &amp;&amp; bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.3.122的主机名改为future-k8s-node1</span></span><br><span class="line">hostnamectl set-hostname future-k8s-node1 &amp;&amp; bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.3.123的主机名改为future-k8s-node2</span></span><br><span class="line">hostnamectl set-hostname future-k8s-node2 &amp;&amp; bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.3.124的主机名改为future-k8s-node3</span></span><br><span class="line">hostnamectl set-hostname future-k8s-node3 &amp;&amp; bash</span><br></pre></td></tr></table></figure><ol><li>安装前的配置修改</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关闭防火墙</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line">firewall-cmd --state</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">selinux永久关闭</span></span><br><span class="line">setenforce 0</span><br><span class="line"> sed -i &#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27; /etc/selinux/config</span><br><span class="line">cat /etc/selinux/config</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">swap永久关闭</span></span><br><span class="line">swapoff --all</span><br><span class="line">swapoff -a</span><br><span class="line">sed -ri &#x27;s/.*swap.*/#&amp;/&#x27; /etc/fstab</span><br><span class="line">cat /etc/fstab</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加hosts</span></span><br><span class="line">cat &gt;&gt; /etc/hosts &lt;&lt; EOF</span><br><span class="line">10.10.3.121 future-k8s-node0</span><br><span class="line">10.10.3.122 future-k8s-node1</span><br><span class="line">10.10.3.123 future-k8s-node2</span><br><span class="line">10.10.3.124 future-k8s-node3</span><br><span class="line">10.10.3.125 future-k8s-vip</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看</span></span><br><span class="line">cat /etc/hosts</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加网桥过滤及内核转发配置文件</span></span><br><span class="line">cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF</span><br><span class="line"> net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line"> net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line"> net.ipv4.ip_forward = 1</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看</span></span><br><span class="line">cat /etc/sysctl.d/k8s.conf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加载br_netfilter模块</span></span><br><span class="line">modprobe br_netfilter</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看是否加载</span></span><br><span class="line">lsmod | grep br_netfilter</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加载网桥过滤及内核转发配置文件</span></span><br><span class="line">sysctl -p /etc/sysctl.d/k8s.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">同步时间</span></span><br><span class="line">yum install ntp -y</span><br><span class="line">systemctl start ntpd</span><br><span class="line">systemctl enable ntpd</span><br><span class="line">yum install chrony  -y</span><br><span class="line">systemctl start chrony</span><br><span class="line">systemctl enable chronyd</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改配置，添加内容</span></span><br><span class="line">echo &quot;</span><br><span class="line">server 10.10.3.70 iburst</span><br><span class="line">allow 10.10.3.0/24</span><br><span class="line">&quot; &gt;&gt; /etc/chrony.conf</span><br><span class="line">timedatectl set-ntp true</span><br><span class="line">systemctl restart chronyd</span><br><span class="line">timedatectl status</span><br><span class="line">date</span><br></pre></td></tr></table></figure><ol><li>安装ipset及ipvsadm</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">安装ipset及ipvsadm</span></span><br><span class="line"> yum -y install ipset ipvsadm</span><br><span class="line"> 配置ipvsadm模块加载方式</span><br><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">添加需要加载的模块</span></span><br><span class="line">echo &#x27; #!/bin/bash</span><br><span class="line"> modprobe -- ip_vs</span><br><span class="line"> modprobe -- ip_vs_rr</span><br><span class="line"> modprobe -- ip_vs_wrr</span><br><span class="line"> modprobe -- ip_vs_sh</span><br><span class="line"> modprobe -- nf_conntrack</span><br><span class="line">&#x27; &gt; /etc/sysconfig/modules/ipvs.modules</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看</span></span><br><span class="line">cat /etc/sysconfig/modules/ipvs.modules</span><br><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">授权、运行、检查是否加载</span></span><br><span class="line">chmod 755 /etc/sysconfig/modules/ipvs.modules </span><br><span class="line">bash /etc/sysconfig/modules/ipvs.modules </span><br><span class="line">lsmod | grep -e ip_vs -e nf_conntrack</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><p>配置准备完成后，所有节点都需重启</p><h3 id="任务二：安装docker"><a href="#任务二：安装docker" class="headerlink" title="任务二：安装docker"></a>任务二：安装docker</h3><ol><li>配置Docker CE的yum存储库。打开<code>docker-ce.repo</code>的文件，并将以下内容复制到文件中：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">[docker-ce-stable]</span><br><span class="line">name=Docker CE Stable - $basearch</span><br><span class="line">baseurl=https://download.docker.com/linux/centos/7/$basearch/stable</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://download.docker.com/linux/centos/gpg &#x27; &gt; /etc/yum.repos.d/docker-ce.repo</span><br></pre></td></tr></table></figure><p>保存并退出文件。</p><ol><li>安装Docker CE。运行以下命令来安装Docker CE：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> yum -y install docker-ce docker-ce-cli  containerd.io</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动docker并设置开机自启</span></span><br><span class="line">systemctl start docker  </span><br><span class="line">systemctl enable docker</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看版本</span></span><br><span class="line">docker -v</span><br><span class="line">docker compose version</span><br></pre></td></tr></table></figure><ol><li>Docker配置修改，设置cgroup驱动，使用systemd，配置修改为如下。</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将配置写入daemon.json文件</span></span><br><span class="line">echo &#x27;&#123;</span><br><span class="line">  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],</span><br><span class="line">  &quot;data-root&quot;: &quot;/data/docker&quot;</span><br><span class="line">&#125; &#x27; &gt; /etc/docker/daemon.json</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看</span></span><br><span class="line">cat /etc/docker/daemon.json</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br><span class="line">docker info</span><br></pre></td></tr></table></figure><ol><li>创建所需目录</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir  cri-dockerd   calico dashboard  docker  metrics-server  script  ingress-nginx</span><br></pre></td></tr></table></figure><h3 id="任务三：安装cri-dockerd-（k8s-1-24及以上版本）"><a href="#任务三：安装cri-dockerd-（k8s-1-24及以上版本）" class="headerlink" title="任务三：安装cri-dockerd （k8s 1.24及以上版本）"></a>任务三：安装cri-dockerd （k8s 1.24及以上版本）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cd /data/cri-dockerd</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载cri-dockerd安装包</span></span><br><span class="line">wget https://github.com/Mirantis/cri-dockerd/releases/download/v0.3.4/cri-dockerd-0.3.4-3.el8.x86_64.rpm</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装cri-dockerd</span></span><br><span class="line">rpm -ivh cri-dockerd-0.3.4-3.el8.x86_64.rpm</span><br><span class="line">docker pull registry.aliyuncs.com/google_containers/pause:3.9</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改镜像地址为国内，否则kubelet拉取不了镜像导致启动失败</span></span><br><span class="line">sed -i.bak &#x27;s|ExecStart=.*$|ExecStart=/usr/bin/cri-dockerd --container-runtime-endpoint fd:// --pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.9|g&#x27; /usr/lib/systemd/system/cri-docker.service</span><br><span class="line">cat /usr/lib/systemd/system/cri-docker.service</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动cri-dockerd</span></span><br><span class="line">systemctl daemon-reload </span><br><span class="line">systemctl start cri-docker.service</span><br><span class="line">systemctl enable cri-docker.service</span><br></pre></td></tr></table></figure><h3 id="任务四：安装高可用组件"><a href="#任务四：安装高可用组件" class="headerlink" title="任务四：安装高可用组件"></a>任务四：安装高可用组件</h3><p>部署高可用集群需要安装<strong>keepalived和haproxy，实现**</strong>master<strong><strong>节点高可用，</strong></strong>在各master节点操作**</p><ol><li>安装keepalived与haproxy</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install keepalived haproxy -y</span><br></pre></td></tr></table></figure><ol><li>备份keepalived与haproxy配置文件</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.conf.bak</span><br><span class="line">cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.bak</span><br></pre></td></tr></table></figure><ol><li><p>修改各master节点的<code>/etc/keepalived/keepalived.conf</code>文件</p><ol><li>future-k8s-node0</li><li><p>```Shell<br>echo ‘<br>global_defs {<br>   router_id k8s<br>}</p><p>vrrp_script check_haproxy {</p><pre><code>script &quot;killall -0 haproxy&quot;interval 3weight -2fall 10rise 2</code></pre><p>}</p><p>vrrp_instance VI_1 {</p><pre><code>state MASTER  #主节点 则为MASTER ,其他则为 BACKUPinterface ens192  #网卡名称virtual_router_id 51priority 250   #优先级nopreempt   #设置非抢占模式advert_int 1authentication &#123;    auth_type PASS    auth_pass ceb1b3ec013d66163d6ab&#125;virtual_ipaddress &#123;    10.10.3.125/24   #虚拟ip&#125;track_script &#123;    check_haproxy&#125;</code></pre><p>}<br>‘ &gt; /etc/keepalived/keepalived.conf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. future-k8s-node1</span><br><span class="line">4. ```Shell</span><br><span class="line">   echo &#x27;</span><br><span class="line">   global_defs &#123;</span><br><span class="line">      router_id k8s</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   vrrp_script check_haproxy &#123;</span><br><span class="line">       script &quot;killall -0 haproxy&quot;</span><br><span class="line">       interval 3</span><br><span class="line">       weight -2</span><br><span class="line">       fall 10</span><br><span class="line">       rise 2</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   vrrp_instance VI_1 &#123;</span><br><span class="line">       state BACKUP  #主节点 则为MASTER ,其他则为 BACKUP</span><br><span class="line">       interface ens192  #网卡名称</span><br><span class="line">       virtual_router_id 51</span><br><span class="line">       priority 200   #优先级</span><br><span class="line">       nopreempt   #设置非抢占模式</span><br><span class="line">       advert_int 1</span><br><span class="line">       authentication &#123;</span><br><span class="line">           auth_type PASS</span><br><span class="line">           auth_pass ceb1b3ec013d66163d6ab</span><br><span class="line">       &#125;</span><br><span class="line">       virtual_ipaddress &#123;</span><br><span class="line">           10.10.3.125/24   #虚拟ip</span><br><span class="line">       &#125;</span><br><span class="line">       track_script &#123;</span><br><span class="line">           check_haproxy</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;    </span><br><span class="line">   &#x27; &gt; /etc/keepalived/keepalived.conf</span><br></pre></td></tr></table></figure></li><li><p>future-k8s-node2</p></li><li><p>```Shell<br>echo ‘<br>global_defs {<br>   router_id k8s<br>}</p><p>vrrp_script check_haproxy {</p><pre><code>script &quot;killall -0 haproxy&quot;interval 3weight -2fall 10rise 2</code></pre><p>}</p><p>vrrp_instance VI_1 {</p><pre><code>state BACKUP  #主节点 则为MASTER ,其他则为 BACKUPinterface ens192  #网卡名称virtual_router_id 51priority 150   #优先级nopreempt   #设置非抢占模式advert_int 1authentication &#123;    auth_type PASS    auth_pass ceb1b3ec013d66163d6ab&#125;virtual_ipaddress &#123;    10.10.3.125/24   #虚拟ip&#125;track_script &#123;    check_haproxy&#125;</code></pre><p>}<br>‘ &gt; /etc/keepalived/keepalived.conf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">2. 修改各master节点的`/etc/haproxy/haproxy.cfg`文件，（三个master节点的配置文件相同）</span><br><span class="line"></span><br><span class="line">```Shell</span><br><span class="line">echo &quot;</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># Global settings</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">global</span><br><span class="line">    # to have these messages end up in /var/log/haproxy.log you will</span><br><span class="line">    # need to:</span><br><span class="line">    # 1) configure syslog to accept network log events.  This is done</span><br><span class="line">    #    by adding the &#x27;-r&#x27; option to the SYSLOGD_OPTIONS in</span><br><span class="line">    #    /etc/sysconfig/syslog</span><br><span class="line">    # 2) configure local2 events to go to the /var/log/haproxy.log</span><br><span class="line">    #   file. A line like the following can be added to</span><br><span class="line">    #   /etc/sysconfig/syslog</span><br><span class="line">    #</span><br><span class="line">    #    local2.*                       /var/log/haproxy.log</span><br><span class="line">    #</span><br><span class="line">    log         127.0.0.1 local2</span><br><span class="line"></span><br><span class="line">    chroot      /var/lib/haproxy</span><br><span class="line">    pidfile     /var/run/haproxy.pid</span><br><span class="line">    maxconn     4000</span><br><span class="line">    user        haproxy</span><br><span class="line">    group       haproxy</span><br><span class="line">    daemon</span><br><span class="line"></span><br><span class="line">    # turn on stats unix socket</span><br><span class="line">    stats socket /var/lib/haproxy/stats</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># common defaults that all the &#x27;listen&#x27; and &#x27;backend&#x27; sections will</span><br><span class="line"># use if not designated in their block</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">defaults</span><br><span class="line">    mode                    http</span><br><span class="line">    log                     global</span><br><span class="line">    option                  httplog</span><br><span class="line">    option                  dontlognull</span><br><span class="line">    option http-server-close</span><br><span class="line">    option forwardfor       except 127.0.0.0/8</span><br><span class="line">    option                  redispatch</span><br><span class="line">    retries                 3</span><br><span class="line">    timeout http-request    10s</span><br><span class="line">    timeout queue           1m</span><br><span class="line">    timeout connect         10s</span><br><span class="line">    timeout client          1m</span><br><span class="line">    timeout server          1m</span><br><span class="line">    timeout http-keep-alive 10s</span><br><span class="line">    timeout check           10s</span><br><span class="line">    maxconn                 3000</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># kubernetes apiserver frontend which proxys to the backends</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">frontend kubernetes-apiserver</span><br><span class="line">    mode                 tcp</span><br><span class="line">    bind                 *:16443 #高可用监控端口，初始化k8s集群时会用</span><br><span class="line">    option               tcplog</span><br><span class="line">    default_backend      kubernetes-apiserver</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># round robin balancing between the various backends</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">backend kubernetes-apiserver</span><br><span class="line">    mode        tcp</span><br><span class="line">    balance     roundrobin</span><br><span class="line">    server      future-k8s-node0   10.10.3.121:6443 check</span><br><span class="line">    server      future-k8s-node1   10.10.3.122:6443 check</span><br><span class="line">    server      future-k8s-node2   10.10.3.123:6443 check</span><br><span class="line"></span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># collection haproxy statistics message</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">listen stats</span><br><span class="line">    bind                 *:1080</span><br><span class="line">    stats auth           admin:awesomePassword</span><br><span class="line">    stats refresh        5s</span><br><span class="line">    stats realm          HAProxy\ Statistics</span><br><span class="line">    stats uri            /admin?stats</span><br><span class="line"></span><br><span class="line">&quot; &gt; /etc/haproxy/haproxy.cfg</span><br></pre></td></tr></table></figure></li></ol></li><li><p>启动（各master节点按顺序启动）</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动keepalived</span>  </span><br><span class="line">systemctl enable keepalived  &amp;&amp; systemctl start keepalived  </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动haproxy</span> </span><br><span class="line">systemctl enable haproxy &amp;&amp; systemctl start haproxy</span><br><span class="line">systemctl status keepalived</span><br><span class="line">systemctl status haproxy</span><br></pre></td></tr></table></figure><ol><li>在future-k8s-node0查看绑定的vip地址  </li></ol><blockquote><p>ip add 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00    inet 127.0.0.1/8 scope host lo       valid_lft forever preferred_lft forever    inet6 ::1/128 scope host       valid_lft forever preferred_lft forever 2: ens192: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000    link/ether 00:50:56:9a:eb:48 brd ff:ff:ff:ff:ff:ff    inet 10.10.3.121/24 brd 10.10.3.255 scope global noprefixroute ens192       valid_lft forever preferred_lft forever    inet 10.10.3.125/24 scope global ens192       valid_lft forever preferred_lft forever    inet6 fe80::250:56ff:fe9a:eb48/64 scope link noprefixroute       valid_lft forever preferred_lft forever</p></blockquote><h3 id="任务五：部署k8s集群"><a href="#任务五：部署k8s集群" class="headerlink" title="任务五：部署k8s集群"></a>任务五：部署k8s集群</h3><ol><li><h4 id="添加yum软件源"><a href="#添加yum软件源" class="headerlink" title="添加yum软件源"></a>添加yum软件源</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/yum.repos.d/kubernetes.repo &lt;&lt; EOF</span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">repo_gpgcheck=0</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><ol><li><h4 id="安装kubeadm，kubelet和kubectl"><a href="#安装kubeadm，kubelet和kubectl" class="headerlink" title="安装kubeadm，kubelet和kubectl"></a>安装kubeadm，kubelet和kubectl</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装kubelet、kubeadm、kubectl</span></span><br><span class="line">yum install -y kubelet-1.27.0 kubeadm-1.27.0 kubectl-1.27.0 --disableexcludes=kubernetes</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将cgroup改为systemd</span></span><br><span class="line">echo &#x27;KUBELET_EXTRA_ARGS=&quot;--cgroup-driver=systemd&quot;&#x27; &gt; /etc/sysconfig/kubelet</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看</span></span><br><span class="line">cat /etc/sysconfig/kubelet</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置开机启动</span></span><br><span class="line">systemctl start kubelet.service</span><br><span class="line">systemctl enable kubelet.service</span><br><span class="line">systemctl status kubelet.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看版本</span></span><br><span class="line"> kubeadm version</span><br><span class="line"> kubelet --version</span><br><span class="line"> kubectl version </span><br></pre></td></tr></table></figure><ol><li><h4 id="初始化k8s集群（future-k8s-node0节点）"><a href="#初始化k8s集群（future-k8s-node0节点）" class="headerlink" title="初始化k8s集群（future-k8s-node0节点）"></a>初始化k8s集群（future-k8s-node0节点）</h4><h5 id="方式一：使用配置文件初始化"><a href="#方式一：使用配置文件初始化" class="headerlink" title="方式一：使用配置文件初始化"></a>方式一：使用配置文件初始化</h5><blockquote><ol><li>导出默认配置文件 (可选)</li></ol><p>暂时无法在飞书文档外展示此内容</p></blockquote><ol><li>配置文件</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: kubeadm.k8s.io/v1beta3</span><br><span class="line">kind: InitConfiguration</span><br><span class="line">localAPIEndpoint:</span><br><span class="line">  advertiseAddress: 10.10.3.125  #虚拟ip</span><br><span class="line">  bindPort: 6443</span><br><span class="line">nodeRegistration:</span><br><span class="line">  criSocket: unix:///var/run/cri-dockerd.sock</span><br><span class="line">---</span><br><span class="line">apiServer:</span><br><span class="line">  certSANs:    #master节点与对应主机名</span><br><span class="line">    - future-k8s-node0</span><br><span class="line">    - future-k8s-node1</span><br><span class="line">    - future-k8s-node2</span><br><span class="line">    - future-k8s-vip</span><br><span class="line">    - 10.10.3.121</span><br><span class="line">    - 10.10.3.122</span><br><span class="line">    - 10.10.3.123</span><br><span class="line">    - 10.10.3.125</span><br><span class="line">    - 127.0.0.1</span><br><span class="line">  timeoutForControlPlane: 4m0s</span><br><span class="line">apiVersion: kubeadm.k8s.io/v1beta3</span><br><span class="line">certificatesDir: /etc/kubernetes/pki</span><br><span class="line">clusterName: kubernetes</span><br><span class="line">controlPlaneEndpoint: &quot;future-k8s-vip:16443&quot; #虚拟ip及高可用配置的端口号</span><br><span class="line">controllerManager: &#123;&#125;</span><br><span class="line">dns: &#123;&#125;</span><br><span class="line">etcd:</span><br><span class="line">  local:</span><br><span class="line">    dataDir: /var/lib/etcd</span><br><span class="line">imageRepository: registry.aliyuncs.com/google_containers</span><br><span class="line">kind: ClusterConfiguration</span><br><span class="line">kubernetesVersion: 1.28.0</span><br><span class="line">networking:</span><br><span class="line">  dnsDomain: cluster.local</span><br><span class="line">  podSubnet: 10.244.0.0/16</span><br><span class="line">  serviceSubnet: 10.96.0.0/12</span><br><span class="line">scheduler: &#123;&#125;</span><br><span class="line">&#x27; &gt; /data/script/kubeadm-config.yaml</span><br></pre></td></tr></table></figure><ol><li>集群初始化</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init --config kubeadm-config.yaml --upload-certs</span><br><span class="line"></span><br><span class="line">mkdir -p $HOME/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure><h5 id="方式二：使用命令初始化"><a href="#方式二：使用命令初始化" class="headerlink" title="方式二：使用命令初始化"></a>方式二：使用命令初始化</h5><ol><li>部署master节点，在10.10.3.121执行，初始化master节点</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init \</span><br><span class="line">  --apiserver-advertise-address=10.10.3.121 \</span><br><span class="line">  --image-repository registry.aliyuncs.com/google_containers \</span><br><span class="line">  --kubernetes-version v1.27.0 \</span><br><span class="line">  --control-plane-endpoint=future-k8s-vip:16443 \  #虚拟ip（未定）</span><br><span class="line">  --control-plane-endpoint=future-k8s-vip \  #虚拟ip（未定）</span><br><span class="line">  --service-cidr=10.96.0.0/12 \</span><br><span class="line">  --pod-network-cidr=10.244.0.0/16 \</span><br><span class="line">  --cri-socket=unix:///var/run/cri-dockerd.sock \</span><br><span class="line">  --ignore-preflight-errors=all </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">mkdir -p $HOME/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure><ol><li>配置ssh免密码</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在10.10.3.121上生成公钥，复制到其他master节点上</span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">ssh-copy-id 10.10.3.122</span><br><span class="line">ssh-copy-id 10.10.3.123</span><br></pre></td></tr></table></figure><ol><li>将10.10.3.121上的证书拷贝到其他master节点</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在其他master节点创建证书存放目录</span></span><br><span class="line">cd /root &amp;&amp; mkdir -p /etc/kubernetes/pki/etcd &amp;&amp;mkdir -p ~/.kube/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将future-k8s-node0的证书复制到future-k8s-node1</span></span><br><span class="line">scp /etc/kubernetes/pki/ca.crt 10.10.3.122:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/ca.key 10.10.3.122:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/sa.key 10.10.3.122:/etc/kubernetes/pki/</span><br><span class="line">scp /etc/kubernetes/pki/sa.pub 10.10.3.122:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/front-proxy-ca.crt 10.10.3.122:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/front-proxy-ca.key 10.10.3.122:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/etcd/ca.crt 10.10.3.122:/etc/kubernetes/pki/etcd/</span><br><span class="line">scp /etc/kubernetes/pki/etcd/ca.key 10.10.3.122:/etc/kubernetes/pki/etcd/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将future-k8s-node0的证书复制到future-k8s-node1</span></span><br><span class="line">scp /etc/kubernetes/pki/ca.crt 10.10.3.123:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/ca.key 10.10.3.123:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/sa.key 10.10.3.123:/etc/kubernetes/pki/</span><br><span class="line">scp /etc/kubernetes/pki/sa.pub 10.10.3.123:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/front-proxy-ca.crt 10.10.3.123:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/front-proxy-ca.key 10.10.3.123:/etc/kubernetes/pki/ </span><br><span class="line">scp /etc/kubernetes/pki/etcd/ca.crt 10.10.3.123:/etc/kubernetes/pki/etcd/</span><br><span class="line">scp /etc/kubernetes/pki/etcd/ca.key 10.10.3.123:/etc/kubernetes/pki/etcd/</span><br></pre></td></tr></table></figure></li><li><h4 id="初始化其他master节点"><a href="#初始化其他master节点" class="headerlink" title="初始化其他master节点"></a>初始化其他master节点</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> kubeadm join future-k8s-vip:16443 --token ysl0xr.knx79yu06cldwiy1         --discovery-token-ca-cert-hash sha256:5dd8de94e08a560c7c2424dde0719a9f4e6ac4e5e5fe538ebbab0cbc5866b000         --control-plane  --cri-socket=unix:///var/run/cri-dockerd.sock</span><br><span class="line">mkdir -p $HOME/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure><ol><li><h4 id="初始化node节点"><a href="#初始化node节点" class="headerlink" title="初始化node节点"></a>初始化node节点</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm join 10.10.3.121:6443 --token pzyo37.oaaqt1nrw3u7ijuj   --discovery-token-ca-cert-hash sha256:b8067f74af04b63399af1de28644223178e5d63e8258c25d465e78aca515e887 --cri-socket=unix:///var/run/cri-dockerd.sock</span><br></pre></td></tr></table></figure><ol><li><h4 id="设置master节点允许调度POD-（可选）"><a href="#设置master节点允许调度POD-（可选）" class="headerlink" title="设置master节点允许调度POD （可选）"></a>设置master节点允许调度POD （可选）</h4></li></ol><p>默认配置下Kubernetes不会将Pod调度到Master节点。如果希望将k8s-master也当作Node使用，需去除污点，开启调度。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看默认配置的污点</span></span><br><span class="line">kubectl describe node future-k8s-node2 |grep Taints</span><br></pre></td></tr></table></figure><blockquote><p>Taints:             node-role.kubernetes.io/control-plane:NoSchedule</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">去除污点</span></span><br><span class="line">kubectl taint nodes future-k8s-node2 node-role.kubernetes.io/control-plane-</span><br></pre></td></tr></table></figure><p>添加woker标记</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加worker标记</span></span><br><span class="line">kubectl label nodes future-k8s-node2 node-role.kubernetes.io/worker=</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除worker标记</span></span><br><span class="line">kubectl label nodes future-k8s-node2 node-role.kubernetes.io/worker-</span><br></pre></td></tr></table></figure><h3 id="任务六：安装网络插件-master"><a href="#任务六：安装网络插件-master" class="headerlink" title="任务六：安装网络插件(master)"></a>任务六：安装网络插件(master)</h3><p>安装calico</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mkdir /data/calico</span><br><span class="line">cd  /data/calico</span><br><span class="line">wget https://docs.tigera.io/archive/v3.25/manifests/calico.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改calico.yaml找到CALICO_IPV4POOL_CIDR</span></span><br><span class="line">vi calico.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############修改内容###################</span></span></span><br><span class="line"> value: &quot;10.244.0.0/16&quot;</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash"><span class="comment">#############修改内容###################</span></span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">在master节点上安装calico</span></span><br><span class="line"> kubectl apply -f calico.yaml</span><br></pre></td></tr></table></figure><p>查看节点状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看所有的节点</span></span><br><span class="line">kubectl get nodes</span><br><span class="line">kubectl get nodes -o wide</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看集群健康情况</span></span><br><span class="line"> kubectl get cs</span><br></pre></td></tr></table></figure><h3 id="任务七：安装nginx进行测试"><a href="#任务七：安装nginx进行测试" class="headerlink" title="任务七：安装nginx进行测试"></a>任务七：安装nginx进行测试</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建Nginx程序</span></span><br><span class="line">kubectl create deployment nginx --image=nginx</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开放80端口</span></span><br><span class="line">kubectl expose deployment nginx --port=80 --type=NodePort</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看pod状态</span></span><br><span class="line">kubectl get pod</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看service状态</span></span><br><span class="line">kubectl get service</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#########################################################################</span></span></span><br><span class="line">NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE</span><br><span class="line">kubernetes   ClusterIP   10.96.0.1       &lt;none&gt;        443/TCP        5d1h</span><br><span class="line">nginx        NodePort    10.98.221.224   &lt;none&gt;        80:32743/TCP   23s</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#########################################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">访问网页测试(端口号以查看service状态得到的为准)</span></span><br><span class="line">http://10.10.3.121:32743/</span><br></pre></td></tr></table></figure><h3 id="任务八：安装Dashboard界面"><a href="#任务八：安装Dashboard界面" class="headerlink" title="任务八：安装Dashboard界面"></a>任务八：安装<strong>Dashboard界面</strong></h3><ol><li>下载yaml文件</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建存放目录</span></span><br><span class="line">mkdir dashboard</span><br><span class="line">cd dashboard/</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.7</span></span><br><span class="line">wget https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml</span><br></pre></td></tr></table></figure><ol><li>修改yaml文件</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vi recommended.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将副本设置为2</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################修改内容#######################</span></span></span><br><span class="line">kind: Service</span><br><span class="line">apiVersion: v1</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    k8s-app: kubernetes-dashboard</span><br><span class="line">  name: kubernetes-dashboard</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line">spec:</span><br><span class="line">  ports:</span><br><span class="line">    - port: 443</span><br><span class="line">      targetPort: 8443</span><br><span class="line">      nodePort: 32009   #添加这一行，注意缩进对齐</span><br><span class="line">  selector:</span><br><span class="line">    k8s-app: kubernetes-dashboard</span><br><span class="line">  type: NodePort          #添加这一行，注意缩进对齐</span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash"><span class="comment">################修改内容#######################</span></span></span><br></pre></td></tr></table></figure><ol><li>应用安装，查看pod和svc</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装</span></span><br><span class="line">kubectl apply -f recommended.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看pod和svc</span></span><br><span class="line">kubectl get pod,svc -o wide -n kubernetes-dashboard</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">########################################################</span></span></span><br><span class="line">NAME                                             READY   STATUS              RESTARTS   AGE   IP       NODE    NOMINATED NODE   READINESS GATES</span><br><span class="line">pod/dashboard-metrics-scraper-5cb4f4bb9c-mg569   0/1     ContainerCreating   0          9s    &lt;none&gt;   node1   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">pod/kubernetes-dashboard-6967859bff-2968p        0/1     ContainerCreating   0          9s    &lt;none&gt;   node1   &lt;none&gt;           &lt;none&gt;</span><br><span class="line"></span><br><span class="line">NAME                                TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)         AGE   SELECTOR</span><br><span class="line">service/dashboard-metrics-scraper   ClusterIP   10.100.129.191   &lt;none&gt;        8000/TCP        9s    k8s-app=dashboard-metrics-scraper</span><br><span class="line">service/kubernetes-dashboard        NodePort    10.106.130.53    &lt;none&gt;        443:31283/TCP   9s    k8s-app=kubernetes-dashboard</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#######################################################</span></span></span><br></pre></td></tr></table></figure><p>使用所查看的svc，所提供的端口访问<strong>Dashboard</strong></p><ol><li>创建dashboard服务账户</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建一个admin-user的服务账户并与集群绑定</span></span><br><span class="line">vi dashboard-adminuser.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#################内容####################</span></span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: ServiceAccount</span><br><span class="line">metadata:</span><br><span class="line">  name: admin-user</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">apiVersion: rbac.authorization.k8s.io/v1</span><br><span class="line">kind: ClusterRoleBinding</span><br><span class="line">metadata:</span><br><span class="line">  name: admin-user</span><br><span class="line">roleRef:</span><br><span class="line">  apiGroup: rbac.authorization.k8s.io</span><br><span class="line">  kind: ClusterRole</span><br><span class="line">  name: cluster-admin</span><br><span class="line">subjects:</span><br><span class="line">- kind: ServiceAccount</span><br><span class="line">  name: admin-user</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line">  </span><br><span class="line">---</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建密钥，获取服务帐户的长期持有者令牌</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Secret</span><br><span class="line">metadata:</span><br><span class="line">  name: admin-user</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line">  annotations:</span><br><span class="line">    kubernetes.io/service-account.name: &quot;admin-user&quot;</span><br><span class="line">type: kubernetes.io/service-account-token</span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash"><span class="comment">#################内容####################</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash">执行生效</span></span><br><span class="line">  kubectl apply -f dashboard-adminuser.yaml</span><br></pre></td></tr></table></figure><ol><li>登录方式</li></ol><p>方案一：获取长期可用token</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将其保存在/data/dashboard/的admin-user.token文件中</span></span><br><span class="line">cd /data/dashboard/</span><br><span class="line">kubectl get secret admin-user -n kubernetes-dashboard -o jsonpath=&#123;&quot;.data.token&quot;&#125; | base64 -d &gt; admin-user.token </span><br></pre></td></tr></table></figure><p>获取长期可用token脚本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">作者：云</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">############描述#############</span></span></span><br><span class="line">:&lt;&lt;!</span><br><span class="line">获取长期可用token脚本</span><br><span class="line">将token存放在admin-user.token文件中</span><br><span class="line">!</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">############描述#############</span></span></span><br><span class="line">kubectl get secret admin-user -n kubernetes-dashboard -o jsonpath=&#123;&quot;.data.token&quot;&#125; | base64 -d &gt; admin-user.token</span><br><span class="line"></span><br><span class="line">echo -e &quot;\033[1;32m创建token成功，请在admin-user.token文件中查看\033[m&quot;</span><br></pre></td></tr></table></figure><p>方案二：使用使用 Kubeconfig 文件登录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">定义 token 变量</span></span><br><span class="line">DASH_TOCKEN=$(kubectl get secret admin-user -n kubernetes-dashboard -o jsonpath=&#123;&quot;.data.token&quot;&#125; | base64 -d)</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置 kubeconfig 集群条目</span></span><br><span class="line">kubectl config set-cluster kubernetes --server=10.10.3.121:6433 --kubeconfig=/root/dashbord-admin.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置 kubeconfig 用户条目</span></span><br><span class="line">kubectl config set-credentials admin-user --token=$DASH_TOCKEN --kubeconfig=/root/dashbord-admin.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置 kubeconfig 上下文条目</span></span><br><span class="line">kubectl config set-context admin-user@kubernetes --cluster=kubernetes --user=admin-user --kubeconfig=/root/dashbord-admin.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置 kubeconfig 当前上下文</span></span><br><span class="line">kubectl config use-context admin-user@kubernetes  --kubeconfig=/root/dashbord-admin.conf</span><br></pre></td></tr></table></figure><p>将生成的dashbord-admin.conf文件放到本地主机上，登录时选择<code>Kubeconfig</code>选项，选择 kubeconfig 文件登录</p><h3 id="任务九：安装metrics-server"><a href="#任务九：安装metrics-server" class="headerlink" title="任务九：安装metrics-server"></a>任务九：安装metrics-server</h3><p>下载部署文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml -O metrics-server-components.yaml</span><br></pre></td></tr></table></figure><p>修改yaml文件中的Deployment内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    k8s-app: metrics-server</span><br><span class="line">  name: metrics-server</span><br><span class="line">  namespace: kube-system</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      k8s-app: metrics-server</span><br><span class="line">  strategy:</span><br><span class="line">    rollingUpdate:</span><br><span class="line">      maxUnavailable: 0</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        k8s-app: metrics-server</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - args:</span><br><span class="line">        - --cert-dir=/tmp</span><br><span class="line">        - --secure-port=4443</span><br><span class="line">        - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname</span><br><span class="line">        - --kubelet-use-node-status-port</span><br><span class="line">        - --metric-resolution=15s</span><br><span class="line">        - --kubelet-insecure-tls  #添加</span><br><span class="line">        image: registry.cn-hangzhou.aliyuncs.com/google_containers/metrics-server:v0.6.4 #修改</span><br><span class="line">        imagePullPolicy: IfNotPresent</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装</span></span><br><span class="line">kubectl apply -f metrics-server-components.yaml</span><br></pre></td></tr></table></figure><p>查看metrics-server的pod状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods --all-namespaces | grep metrics</span><br></pre></td></tr></table></figure><p>等待一些时间，查看查看各类监控图像已成功显示。</p><img src="/yyg/612a796b/image-20240323222536472-1711203940377-3.png" class="" title="image-20240323222536472"><h3 id="任务十：kubectl命令自动补全"><a href="#任务十：kubectl命令自动补全" class="headerlink" title="任务十：kubectl命令自动补全"></a>任务十：kubectl命令自动补全</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum -y install bash-completion</span><br><span class="line">source /usr/share/bash-completion/bash_completion</span><br><span class="line">echo &#x27;source &lt;(kubectl completion bash)&#x27; &gt;&gt;  ~/.bashrc</span><br><span class="line">bash</span><br></pre></td></tr></table></figure><h3 id="任务十一：ingress-nginx控制器安装"><a href="#任务十一：ingress-nginx控制器安装" class="headerlink" title="任务十一：ingress-nginx控制器安装"></a>任务十一：ingress-nginx控制器安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">下载yaml文件</span></span><br><span class="line">wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.0.0/deploy/static/provider/baremetal/deploy.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改yaml文件中拉取镜像的地址</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################修改内容######################</span></span></span><br><span class="line">willdockerhub/ingress-nginx-controller:v1.0.0</span><br><span class="line">hzde0128/kube-webhook-certgen:v1.0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################修改内容######################</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改Deployment修改成DaemonSet</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改网络模式为host network</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################修改内容######################</span></span></span><br><span class="line">template:</span><br><span class="line">  spec:</span><br><span class="line">    hostNetwork: true</span><br><span class="line">    dnsPolicy: ClusterFirstWithHostNet</span><br><span class="line">    tolerations:  #使用亲和性配置可在所有节点部署</span><br><span class="line">      - key: node-role.kubernetes.io/control-plane</span><br><span class="line">        operator: Exists</span><br><span class="line">        effect: NoSchedule</span><br><span class="line">     nodeSelector:</span><br><span class="line">          kubernetes.io/os: linux</span><br><span class="line">          custem/ingress-controller-ready: &#x27;true&#x27;</span><br><span class="line">      containers:</span><br><span class="line">        - name: controller</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################修改内容######################</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">为工作节点设置标签（必需）</span></span><br><span class="line">kubectl label nodes future-k8s-node0 custem/ingress-controller-ready=true</span><br><span class="line">kubectl label nodes future-k8s-node1 custem/ingress-controller-ready=true</span><br><span class="line">kubectl label nodes future-k8s-node2 custem/ingress-controller-ready=true</span><br><span class="line">kubectl label nodes future-k8s-node3 custem/ingress-controller-ready=true</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装</span></span><br><span class="line">kubectl apply -f deploy.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看状态</span></span><br><span class="line">kubectl get pods -n ingress-nginx</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">###############状态##################</span></span></span><br><span class="line">NAME                                       READY   STATUS      RESTARTS   AGE</span><br><span class="line">ingress-nginx-admission-create-2lz4v       0/1     Completed   0          5m46s</span><br><span class="line">ingress-nginx-admission-patch-c6896        0/1     Completed   0          5m46s</span><br><span class="line">ingress-nginx-controller-7575fb546-q29qn   1/1     Running     0          5m46s</span><br></pre></td></tr></table></figure><h3 id="任务十二：配置Dashboard代理"><a href="#任务十二：配置Dashboard代理" class="headerlink" title="任务十二：配置Dashboard代理"></a>任务十二：配置<strong>Dashboard代理</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: Ingress</span><br><span class="line">metadata:</span><br><span class="line">  name: k8s-dashboard</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line">  labels:</span><br><span class="line">    ingress: k8s-dashboard</span><br><span class="line">  annotations:</span><br><span class="line">    nginx.ingress.kubernetes.io/rewrite-target: /  #重写路径</span><br><span class="line">    nginx.ingress.kubernetes.io/force-ssl-redirect: &quot;true&quot;  #http自动转https</span><br><span class="line">    nginx.ingress.kubernetes.io/use-regex: &quot;true&quot;</span><br><span class="line">    nginx.ingress.kubernetes.io/backend-protocol: &quot;HTTPS&quot;</span><br><span class="line"></span><br><span class="line">spec:</span><br><span class="line">  ingressClassName: nginx </span><br><span class="line">  rules:</span><br><span class="line">    - host: k8s.yjs.51xueweb.cn</span><br><span class="line">      http:</span><br><span class="line">        paths:</span><br><span class="line">          - path: /</span><br><span class="line">            pathType: Prefix</span><br><span class="line">            backend:</span><br><span class="line">              service:</span><br><span class="line">                name: kubernetes-dashboard</span><br><span class="line">                port:</span><br><span class="line">                  number: 443</span><br><span class="line">&#x27; &gt; /data/dashboard/dashboard-ingress.yaml</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;高可用k8s集群部署指南&quot;&gt;&lt;a href=&quot;#高可用k8s集群部署指南&quot; class=&quot;headerlink&quot; title=&quot;高可用k8s集群部署指南&quot;&gt;&lt;/a&gt;高可用k8s集群部署指南&lt;/h1&gt;&lt;h2 id=&quot;任务目标&quot;&gt;&lt;a href=&quot;#任务目标&quot; cla</summary>
      
    
    
    
    <category term="容器化" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/"/>
    
    <category term="k8s" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/k8s/"/>
    
    
    <category term="docker" scheme="https://marsperl.github.io/tags/docker/"/>
    
    <category term="k8s" scheme="https://marsperl.github.io/tags/k8s/"/>
    
    <category term="Kubeadm" scheme="https://marsperl.github.io/tags/Kubeadm/"/>
    
    <category term="k8s集群" scheme="https://marsperl.github.io/tags/k8s%E9%9B%86%E7%BE%A4/"/>
    
    <category term="高可用" scheme="https://marsperl.github.io/tags/%E9%AB%98%E5%8F%AF%E7%94%A8/"/>
    
  </entry>
  
  <entry>
    <title>项目问题总结</title>
    <link href="https://marsperl.github.io/yyg/2855a772/"/>
    <id>https://marsperl.github.io/yyg/2855a772/</id>
    <published>2024-07-18T15:55:36.805Z</published>
    <updated>2024-07-21T13:20:11.247Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="e0d531433bcb483cccc103e1ff324b2173c4ec33fd7338969678b536d9fd335a">e720fb8297af95c5ceb1b2b23a1416611470b0df9ee00f115a8f160d91bc4bf1bb202084b6d5da6692e1f50c351cbb81c7fea92793db015ef5c8665f3da2e8350cbf205c23ab0948fe598d3388cfcc94ac5d9c5b2762d27c60d4967383e5ed0fa3ec7c74f90741dbd398ce1c879a1942f9d094a44be7a663c1f1aac9e7d49abd9fe79f9cfda32788e1da2358aa41136fa94faa239fe41e055611f10232bba634d0b2dfcdee4caa8f44ec5e8c8e5df0681595b2d00147279c255ecfec2842a6d4c2969965350d0bc9b5971162b80d9828ab8092adfe0aa2218587f711e258cc7a88db4157f9c2e61d15aa6f87e3518db5d9f568b0e89915269001c13e2b30b7b70a7585660235de6ba2687fc37836a3cf7527fae211378b668c26cb7d036ffddbc3697e7f4507ff66df7177b66442e227f00c3ca235744789bbb00f471b38dfe1ed40dadf2e43a15bf92cb42850f0310e889957183bdfbd4ef867c449dbf97fa903de13261ddcbf5335151b528703cca8c1bdeb2c7a38aba2094be1fbb260147523d89534dfc351ec0dbfc35996064d5ec60be08bfd9697a523b7b629b1e4e4a51babca3d69bac9d2515ade0c347c720e3a6c49c3112b63530360ec39faae49487b116e221b63fb325f666f925323b56756202843d33f2246f061fad5c1042bbb1b23562d91a170b34f8854f8a3158ccb3c4276c5efa923ff646c78e44aacd58ef3682b2a98af1a01c437f7f544a4b8eea638326165c6be93741596970e4837d5462b50d73314bdaa4b037ac6399f33fd3775670e91a7ff2e72d1e0e3658ba5ef7de57efa9fc91cdf20d6c59df7a58ae3405ff753d43810c73b51ea9d733fd77c163d2e3440b246b34fcc37396f1b7c23a9587445c6d056ac5e3a83d495aae9a1d7557342eb4f2534673453ec9c01cd0ad8b137d46d4777c5e3a4849f30ab45c859fb963ddf9ae0f0d8a9a8854038928ec43e8d8ea1e444bf0088899f33f2b4aa23a5387e563fafca2f5d3a3d407b8c394832ebc57a19b97007745093f4a4254e212807aee7687683a86f19f4f5d3c740fef7ff5526ec58b7019c45549de4016bcb29f01f45f8812db1641ecc999bb3cad8c754f6d5e12e544afa63ed5f0a046022951bb9e90fcfc0c0dac6b6687be53470e161a38178c4b58f1740063cf3066f76c029567c72e3d04bf80b7a714e12cacb17dfe6fc102d81a1780f71e9f4a980845d9cf3f5f3568c9fedbf085d048b90d1f733c4e43a7119c6b1832c084c44d557eb6065627e8b663f1cbae63db2f79f5c216cd8862350667a3c81131d6c4e0047a3da2480aee1a532708ed717a89634cc801a52e52729aa993e858c84e38a0ca1aca125ace74655f1f146fb2b1a0ad3c28d6521dfef74276cb36777fc42d33ddb81ba756f3a44cd95cf7041c24bc9702bdda285346d5d0b70db2576e979b9b312010c6b60d1bd2366562d09e27694fa7c49504ec57eaaeb5c708cf3133e8fe8568e0adc1c02b2b5fe77b11d2380ac9105f3f5e62e2b2bef2207dd8e6551c0d88795253f2ad28520a5a0309b2e808746cbbc341c55a4a535ace69544b5ed9ad93b1640f24c783d5164b1a6608c494d8443bd9dab0de422316e8684c2d90a5f6967e8b4fbfd641fa93680225a97ff3d57757345a1880eb2f242c4ce2ed2517135852fca07cbc0b58dc58512e31cf134a39905e7356fd259283de3911da3b9d05d02d89681fbb2715c2faa310cb897868071d8256fbd7babf26c7c499c0216fbd4c7f824329bcc330ba621a6073712f62d782b27b75ebc85f4bab45dcaacc78553c0e5066c7a383faf5b7f4dd8838a14450a1416467a2630b76ef047f6d35fba0fc537e05d46b1888913095d210ce3cc1475de57a81241c9c6fb2fd7660772635b79e731043c50d720cbb2dca07a055e213b31206a0d8f9a7ac5efced54d02f809f9101a05c125dd864484d51461e9570ccb082531ba1115a6f8c1fbdc324a1b3816adb5cb862183b10315097dafaf2740f7c30f9bf2a2901f031a7ec5f9512869e924689996af477199ed4863abc4279394bbe20f1ecc4756ce75cb3ee07e4f63c9aab4ab481c1adb80e527011e777d428ba37c9cb6ed0e04fdc110a200110a75e3508722b10d1755e97bea13d31a3a5638048468b21d33288f24ea8a233c530cb2b50fa2384f4ea7745449f547f828f48b20399f9308748eca7986e639ccd0f0157ecfbdfb580825c02ffa4969793aa357410dd7b8f62c77a0117c9c35a813cb44e19f3142e20f525780af5b6f50b66d1d6da9d4414cbfd48f4cb4b624fc08330f47637a23427838bb20f33a2fe238242ba46d1fa3f59ad2956245f4f695440397483497c7ce1ca6a7be82c3f0e9296857cb294381ae4e781a9b2214708c8f6b98f06f05521a45c5c201f0ff4f873ef7af1ec9b3db46db95cef9fdb4a9d7aebcded0dac1fc7e234c200fa6955d68f6f963ca32ce44e832d2340552164083ec046c974197f8666530a0a6f887654f1691b18e4a67f83f35f01eb9a1bfb4274bea928ba62797764ad26f5af9e89c262673d4d2cea579da6561d24676a1fba931a1b17543572406067cb118859f11eb0e992aca32c4153bed9a7d5e1578c6380b39c9fec34bdfba13c3b404171ae0c738088344d9d94eabc567c1195ccc81d1b564e9fff53794496fc8f144b677177b07b900ca6abdc9f31eb0af890d93ba7be84f0d7dc0db94e9d9e8d5ca31ec1b975c2be78b1781386d62c9ab21b487784db999602c0f542aa3f995aeca7219341ee36e40aa7b5ddee0cf21ade56d2dbd9e9e129688a44141e7f89f3e83fdd936b33cfd1657ce2bf4ddca51b02eb2f95cd14ba46c2c935190142aaea78247d3f0567195a19b454996b30ea70f329b77c824d7ed6f5601971a3e03ec9f88cfd4c6f629d4b8dcd0317e46073807106b299835952655ca5d0044d809ecf38e10f5061908733e32726d7859bc45eaceaf59e2ab44e73782f9c24c11f6bc4eeac6fbcadc9a4db2b747026e3ff6a386322ab4f534b8a88894e41fd2a72c9f095905deef70a502b7589dff0b31200ee853cf2bc9552a59fca69ae03a09abd4f214be3a7f223192f8b37cba6d20038c66ea6034af15f0649b2199ffacc1397e897712ddd6f6e7e4dbf900d41c741a7e45dc94e38449eea9343c28e03ae2a94ed3d60f6a26855b2c49206749f5d72b23de16b7b6a545b1ad900434840363ca7bacadb29427bbdd40c4a27e19bf8394631ccaae0829769f062f03d56d21e33d69091c239b0c0de2c3eb2566f8afc94579dffd624de9fbf973a1058ec3f306d33507cbceceb6c19923dd85532595c4bfb71b19ac2a7913fd213f0af2048d9e562bf77fc767dfa107b5064bc263e1b9c7b55c188018008d60e32858b6ed413b9a66ef8676d4d6404c7d87313a0b4a958b5f625f5c4db88f6ca2a924ba65c796d0dff26324be3a830653f7f39207f16c505183b554092364eed6b1345c00a3d6ee58f2b50d58e2f77df8f69058d026d104d563e03a92b7796d324c40e937bd92098eab3687979202df3b7c21e7649deb8da806aeea4f38c916e742517ec97932de8503d7b29b0a3ca8a8da7c82bb0501707feb778b11da1751f97da382bf3e533638670f1193aaa52a1e981e06f3f92d291f6e2b5a473d9a4b8956e40ab9d1d3aff1ebce58aa359e7b15dc8bb1b91632241a3516ca6094ee74bcd80973a42498672970117c10171892be517633ada01f9883e61d75ada219a4ad8da2ee368585d90a8e572304e07c8bf1f55a1256c4dcf6bffb368b98468a1934c7a4bbc36b9d85f2a8512f21df7254dc53b090cda25e22c1ccb6e03482868f1793bce7a0b247d85eb9935b2534cb3b92486db4143c73d64a14ae447409951ef8142e0ee2a2bb5586b730d1059bc10ebb5e4bea57d338bdca313e699411434ed1a0c037a6c84cf56a2041a6ee98a0fc9277daba3bf7a75483196281e9c6d246417014b0356c94f43bb399cf81a8153deba7fed95230a9a64df431089356f49be039579c96f813ec8623c8b300b694ecc0963f1822603dcd4396a1cdb5e36c9ebfbf85a105b31f6d5313d65165d5f6c77e24ea76971f4fc0202627ef2b38fb8767b8d0f57cdfd749c0ca037454feeb30bdc6c8cf92ecec099058a5d56794c384843de9fbc0126926a10bf3a7df24311d5d2f5e6af451c47760f9a787bdfe5148359eb187b06cdafc48a325d5f312f1b42382f9457d1dfc4bede912362b017245be034ddde8ab04fb604b5b2ba261b346b40a9ca014f89d3baf485dfa8559689c0fab17540a28f8b8f44e6dd23de58d1fa0005217c7d7609d3f5482c7ede5c6c5a4da7713318580f35cfadaa7025008386850f1fedeae2bd9412521a4e54080af4115669525b211dfd4214744d05942f97457acae35e0b04ab7e070223e4a69129975a63a8d8c8c6d46b511989ff0fbfeba5bc700cf970c12cee35225c1c7794640c1d911f5fc4e15bf5c5361e1cea6dfe1b608c24950b254bc697a470e0e39f7f35f32c9dc7903ae6b3907cb4336b1627a16e8e893db5bfc447fbd573ff47763c6c50daa0269f24bcb090660308954950f11da666b44da5f9601d450400b5022912b0dc9d34c5899acf68076a2e29418e96bfa030ac6efca05d06e37615e08cae699e2b9b974d736f772d008d69f227334a1fa56836b93be6c6c17141f90d2a1dfe6479ea85239ae076121cf511776d1ea16364473e62ecc1713108fb442c8a4c0659858cd98e5baf09bcc6182ceb726ec801039ebec21df7d810a364e711db9f02059d607ea595ad15eb3f88d33eafd61b5d05c5623ac0ddd7405d452c0dc5614a451fe845c29683a043532943feac78b362336b1e0aa0afc0bb63c7708f23790f4236a297a9facdb40c3bd026d930ad11c1a68787b9d7b8988e0c5abd6d30413d8e3ed29e10ef239f5e994f0968841fa7287ce471b4240e28692ddf6f6d408890939a82545a374507d381d2c4487a04db3412865ac7f3efc272a40ab28e2c00e86cf8e60b652e9fe1a82f2d0fbd5ac58921279b65608c0a5e283d1841da22f29451e011b17c13dc7cb713063c81dd1d8102008f3dc1ecdfbf38334252d2d19908e82e14b61d057278e3632b29d97592e2b01b6d43d38c894527f127eed086e5242a4401eaf1e7bee48996750ce8c40e283ab2ce44591fc146cfd1e0bc45f310dcfb629836a0eb9ea5014ce9040a7838aa549d6a7e6ea2e1545edbc207146170b01ca9519193bfe3016c25aaba6a77755a5dee11a3dd0f95cc2165658db21841afb6a5ed3bd1f288e7feee3a70136d019567ce8921df0dccedec33ddbd77cce3ed655716b083242ff20c8592e92ee84facd8a2347d7d3d9b97361af5ba911e0a292a8dfdaf68b533abdebd198db949dfd1e08e93a1acd716e77b2d6e18faac182fbe6a02455b4a35af380ca7c7d705444682640198e8c257a0c28cd9cf59e4fe8b81b43ddf91e931bd85e51428b39209546399564ff20db62cfcc551c14c72adeab3d518bed7d72e6013db5252830fd8b833ac23b33dda4903995fada4bb25879637f2d81ff8b3b420e8204c79e9e1176be7bdea6dc6be50d53e72d9430dd8be3d8c67f2c988af5ca770fb5a0b02a93c395a9c8d1bfe72237a3e0aaac82fa2ff8719fb023b273e1d35b083a314abccef9bce72f6d1a84002e7467f6da44aa8dad5ea4f556ec95831318b401633730639aba710fcf85685ea56d41453042d890ee6d3a8c9cd6dc95913ee9cd79bfa5e412556b8dc2811066bbd07bfa8c8aaff19f1de49b1a89117a013c211c6fc364a786908283c525f193d2391aed9c36ddf63475d3fcce3890da15ae30c0e52c0121d03ef2a356272e26f0262f9fe90e47a9ce92045f1a1219a60399b374d0250be7d09f84426eae13af4b712add3f8e3509a3027adeda6835f0a8539ba6d3e6cc0c5dfe4182135f85aa205833cdc3045ad2135e81d08521211b9b1728bd13ac69ae8ed9de4be095ce7deaff3e46d0d6d69c733ac5c8e8bcac7935ec5e21216ef905d80a26b05257354c2ed4d75153d1fccaa61094d2caf4a2e3506f5f04d771e4d223ce39b6a1d5ea17fe861010d57baac8db5a656a670f80d620a502af7168e4b5391873f9265112c06344094a976c232dc0eb919b94291e77eef35778f6279f86a58b273e9f530e3e2d91c940cd64c3b1a8c1287e1660e3c2fa96d45c37f2a1078ccf0e0a392934ffdd04eebfe1eb0a25cf7f33cec351530b51057f52842498659324677ab3b63a4edef8af0116a2516ea26648b410bc8634e19f664dd784f231a55df96ea8228049c47aa053ae77b166e18920bd5931d7d5d2c9670f9edbba5592e455c7821844887d148b4b75c6d79d0827323f6c39514484a7410b8e5e9ac50f4ddc50464c145a313872354a070af6713de35b9c82d41cbf9481454a3561c33c43f86f6fcc75af915427d7760f264cea119b4fd77727cee24a2e583b36699fef0186831f059960e0d09717d7246e8b1502e80aeb2e6880233905a174de26bc8d127ba0f8da7e47b64890e0c43daf3d7c2843feb735b936260dc7fccdf343d6b02b4d4872696a64c19ba605c61a39ed1bb008f01e3a300ff7d3dce25ebad97fc01fc3ddb1ba662fcd9bd46aec3a045065dc5e293f8109e4b85cc8b4f97c7e7e4babb2dd2346cac44d9108e17dce951ae7183b126f9bbeb500f94b4dfdf79c55f272b569dd500bb7e6b6eee2eec42eb80b4fca27c371d89968cd0d8f86638ddd67c8346ac690b7bcb3066bdfb0d76aef3dd08145426746f1a88ab492ee5c3e6785a25e33e693d9cf686a8ad3dee842a93ee800b9df578954cfb4598e6d6791b0f3a494d229db122441d60f79ee7262c8198062d15ba8f47585cdc7a40a3a9c0b4884557a0e02f296997ba4d73a4997f029cac4c80149333ace244f54ad2c264fc6f7ebf06203fec480906ed683770dd0308fff761933945fdbb0526496f39424afcd4124f3cef42a3489a984dde7a2b4c07b7547e1007f76779b78f41b442d73822d28fc95820ad89a86fb76107f9411a3db0148dbd49d6333c72981080e3aa2142075317ff7b2bf0bee69c2dce97dc9024eb7b52ce59e61ba4147d01aa9b5734a82a0a2544ac38026e3ba08afddea8f1cce7727fbcd578f8e895f5386384385d141e74ddb70abb52436bfb83a76bbd17de12e328ab05e3fa0ec4ed4190df91766b0f96eafa89f046514a914d39e3dff98d81429854e31a2193c111938fad870e3273409b62d2420f7430fbd5393771375e75687d3383cea95ae19a08c590a0f9e5126077c183cfa46ade112006f271e1168eacdead31940a989b8fa234135810500e66eee599800cd9d8b5edef60d1b68c65cf52887b305df4047db516eafefaab55e9e4bfd2b35f7bda71fd558ccc916aecf5768f25d555dfab4962d691f83a444b724f86942efdf282fee5fd5ecabc3f9facee84b5a8d0c0c4c6300a75819b8c31a2d7fd22c9e81c10c68cf010ac2dcec900884ddb50df0c2d9616db3e7d399c0ee532e11b8afd2fe454159b990c89e1dc69f78982dc1ab2737b7f9e365d205ca761e0f5e62fa7e42a9ce4e7d21dda5a3a23f723c34eb048f0fbe860527396c5117950a22281ff3bb7fcf0ba90235d33abbd206080fe6f1b1975937b7e538814a86fb91aab8b74ee01a969d3adf0b6ecf2ebbf2637ec40f523fbdadcb945a8ba405b9e4992439842d79643bad4fad743de4fc970fecdd217595bf051aaa93312ad1d9524e90df4a940d66d5ae4d54e8554d3adf74f2f0689dec6dba3782bfd6525cdd2907bca49be4d3b4d93775cb6d2056fdac731d57dd0976f5437f9445e6fc1b9f54b7902e0d91722ff717a52942af5fca7e175f713f853aef02687320296e2ddb5264147fb4d7770e81087d2f8f1e900d6fe516511f5482bedcb10206f13f3c7b34ad1d6e7277a9c9004d9fac302c5f604de2f50125a0c3fa122ef180bb763c13a9285e8ef8d0a7c45dc9def49b1cee47e30e56ab393cc64bdea86650c8e7d789825b4c870b7618b2493a343ca79d1a87ea7d2ac2f79c10c8156ff4458ef2f38c455dd73523653dd021591287c78b53a19eb1fa531451488129ef2008057c82f275683fcdd1f0af95c371dfa116e6469cfd47bfa09d084705444bb87882c74cf7d409fb0879b7e44b6e702b87a8aa88e0793d2840363fe84bed2f737778b3d5525ff0fa7bec99f99fbbcb5eb5f96fea2fdccf46313dfd53eb55781ad81f608a11cb27416b71cd564fce8078994321e65de9cce22852ba00e1bf890603697b7c69659d67365778f25df3bd691280aeeca1fdb5609df918c26886053578216e6cdbb4480cd336f5285cbc90547b72bdf4351372cf1d99391dea98487ac30a4a22d20708f12e72b5b574e4e336727cc3717b35028ecce9441512f4e74db7a18ba64f16e3e181186ddf896093955e5d5ef5f1dcc5318b95de5faf4ee69d9bbb6096bcb0c0f48dbb864f78c8c26fbe9076f8fce4d628f069f6a791f25b497fa73c7ebbdfaf5f815117c5130789594c7d16a00ea229ee2819877b3564a7eff983c12b30628fe9a6bdbd9a9406932c56fb92e974557a6aa28a12c88f7526436fe91d5877be5732aaa48fc1a6e8b0822ccb05ad75a7fcdae336bc592816fb933f2c443205ed34d288949091204e9630775fa3e721e014687268954d6fca3cb07b9049ba8fd6639457670ad33841b563690a5436fce872bbdda0afa069742ac94e1c4fabca507622ff1a8d44f8b503236a29795d8a4b6989998edc3ece17462512e37feb2eeaadfbb79bcb0655938c2eb4227ae01daaf57e37abf0baf1b20b40ce30101534c1381b569d88dc1d8cef5c381fa4909f7f1b70f201740bd5fbaa69fd03c1bd6dd021b4704b9ef24f80c81b9167e1ef49f3bc9fa07781810d9ed163d0225a0e1c3bfe822746dfd1b8b52d04a2de6ee616fa0acb1f2157cb7c6165ec06931d8054e8eccc44ded7acea62ecf25dfb14c520e734ce9c4deff900f59dedd8912cf72b45b785b5aeb9450483a7fa292ff0a6e75ee6b6394b911f270121aeff664af368b2dd4f4b1148b29fcf7b22f77b94ecaac296180b2944e98740a7d04250b90d97f556fca61787c006f0bffb144fd15d7f11761c4f4739a73455d3aea1b3d808f4089573e1deafa34861b976bf534f8ba0e67699d61d0c5d1e06d896512796780d389c0e69accdc85672dd71ba44239739a98f991f47b6eb8fb5c2aa990590add08c7dc67dfaff0dde4355ac2fb2469f2f6b98372078dffc7d7f336fd9250534d702b43d51706075936cf3f8eea17124d33e0dfa19cb8ce25f57b50f2b8c6af4c946613fc374e358d0923b78cf2ebebbf13d16b9839928f7dc274cf3f12551ba2099c317b559dcd37c8a08ac92052b6be3de98b0379ec43d3fcc769fd414d45c0fc655e1e797ea73983a6a7e624b557c40ccf2c4ad570e54ade29ac9a222c8a56d8940a964e816c8bad6522afd0d094a21225e81036e361aeedba71ed60768b625420eb48d66350ae6544b99b8cdef7991c995d3b16c78216d2b6222b1b3ac50769d42afeff92be6a7827915b9c5dc86cd7697686114ad12d84f58ee8a2c515facb48862798c9a9755bed93c92800928a96f2346e6efa9a91fe5b679d3fb010c23d363869507023b19779f26acb5b8190f4519c94fe19cfc418acc46f65cf786db39c568c36d3ece1d497c51e07e015d4883533e5cb7634661ea0025a70c552ea9140ae458c0c49bb50f91171fa3e5e06088df119ca50dcb77e5ecc2066c703f58a7e8b277ba65e6be14b8c830aa5b897282bf2528f55bceca12ddc2c7dc5a3c34c2fd6e612c5fac00ba1d4c1e5b2694c26e2e00c7ecc881e5be020df85b478ae8306e3021a354460f2fd6c4faa47fa5670e38febf755b7a1def6f19e644a20a1be67cc131a3b5ceb131466f4cafca9694a378e76e78331b733f62a5e570fb2181f0b710a433078c425346a97505cd0cb948862d49fdebfcf6452db8dccc124fa7b214aee84dcbfce560c0c42dcf7783682eaadf6544ab13accb5797190b962821407a7a4067fd0230d7a613ed38c534a015c550626c3c457bbc62bdf84cbd3b065471118f3be7f132d6e08b75644d6e4306403ba38126e50e42394de99cd2082ef88be9b2c6c7c384c47b32aa8cc9982af688a599c877b095fa6ce5397e7d3cf395fcb6fd8971ccf1c19953f11407d749c657ab46ccee1c1a3d2e988fc080ad5ffd0f4567f3c95891795241667cff5478c5bfc7eab3c6813569cca0026dc2d779bafe9d65ce922113afa1007a2a004a7e86492784372072fa18a14e13e1814b1141ea27746911b9fe2932b529db2d688987e8cb81ba1df16462080a45eb72366b65864014b92fde7a001e8c4e04ef2a24a8c266fffbca2e6740b887b9d95297a30c16ed06d86b95ac8bd66e952ff515e09a277a6f8d6efbcf23e9ce8fb00e80012cf0a8172a2de951c78a8fdf6d85141505109e637be6071ff635c2b718c6949cd3e351343e050641f3c748891304e1523a09bee9333de3252a743f83780f7e4df7dd795bb5bdfd7f79c04090658d04326492752e3aae6930896624ca9e97eaffd9e6c554d4b492b682e17104e70be3616349ae157be0e45b200b15f0ea36878ccecf5beeb4188e8d154d5e0788885cd99509d735825719a68ba8ee522c786ae2d4ed0cf59525a6bcf9093a61a857622bd2fdc36b69e19a837cf7d1de914909c1deecd70ec748631f12b983ce0d98821bae3cb628a50ffa2a9942e1c478886ac566b0a11c20bf30900301e6e1e9fe566e4c89746c01e046625da5ae9fc6d07161cfd330697f30f15bd93eb5a894c8a697ff1a9be1eff923ac5057db1aea50f00df4c435d4d31041faec247b9e23a9a1153290cab3816bf1402271537ed97f8dd7a4eb42e0d0ce9b86062ab6bc3831c84192f433ceefac43459b78f9e0cd9f3df0815d234279ed03a1ff75a21e3ad8913d1e487bd7c3099910788d6ce9e41276da117a040f16b2f6eea3dcf16b285023a3fbb89428c05724211420b5a932e976035729be80ba2c09af886f06881aa4a183d060b95c9056c1a5fd8d8c1d0a23ec9854065bad9fd3b71b5e10a92ef1c277872b50785df87501e75299f36be05adb26fe280f37f3d939413d75a6fe894800821e29dfe5b1c347f37fe5b216bfe31feb1aebf095418d10e414c340d87939c9c21d94177dc3149a0455e330f70bb6f9f85cf6a5c11b19a4557c64dec851eea28b54d62201c922eeaf8a1af61a8f1fbb06b5b5b31702ef0d6caca324da33a17086ea7dfd1b5b9bb832eb948ed5adf3231a7da4163bb92a1b3cca6e4c33bc5419fad2dab815866e8b9f321b52ddaca8d946ae721aa32104304e627bf49f46b34e3e3b0b044d5fa152898b82f12e2d269e65a5120646d24c334c1e69667f4e41686d60219156c0afd72404a2e9e1c701e390636d5534d7e1c1e7e41a335b680bdf16fcc6ab30ce1af73bd011b552ef0db64589dda742f4ed8a2a1a27fb3243ad455d8eedcb59b166538e3d40b25214be6b0c25bc9f892f96fe75949be9df535d29f31d3372f3c44f06785cf32f7d25a8789a278e49dec77357a50d7c0c37864e7c10433d68b2a958511e43e9b8d0801e4d33886d27cd852edbc7a41118af468f61f168c775f75918a37513ec3c599e833a740f2f302519b6e4769903c005782a02fea9f802d59d2c931341687b4a17acb2fd967aeab352ec970abdd08f30467182262a43cdd3d2cdb2acf51c231bc6f1b751570f64971cc1b8d1847b17fc74f304b952725fb9cc40a46c933011b90b20c45974d090b34e701c38c9ceb671f92a0f5e468f8aecf12f5ff80723f9f1cefb7dcec17c13470596d8afecc60bb0339d7092b14470ebb81bd7a9c7511c36a0c5747a016e304c672cb7d9bc283c20fbba2e73b782ccb4d4b24570d5a0dfc24a4dcd88473513d0f3f218df332e010de9bfc2dba88fcb2d2bc655722c12092d38d5726a6037d567a04dc87c39f2c7ab7cafccfb1afbdcfa52b7003a4acc1535e2e19bf97aedad84859d17a8f4cf8d5d9bcae3121a7adada4c51c1baca66f54d25f841d71cb8cb6004c23cfb48108ac5fd662b38d2049d7cef5adee4e5e6e60a383bcd9d3cdabd81e5f5a76605cb8fd709f46ecb92ec12089322d637b01dc651e54063dab06e70a5bd03817cfaf0bc066fb87ef746aa16bf567e3f62acfd2197901039d89945e571befed70b3376619f204e623ce5dafab181946a35ce746f78c74d49f65dd834ba6e4b965c6c8ee033c6b0afec23300c48b014a3e2e8ddf260c207940b564e2ca7df62c9ae9a9b97460bde94830360efd97e9a31a7e4e4dd25e07451a107175add436a5edd1aae61e1f7b4b93f15f7cf784522feb5e25258cf8a3e86ec587593121018e93915688abcdba765af86ca6dfe76934666cfd79d318d60e02f2e7878a5053192c32ec5d0c69c45e8bf232b59678bfb0c4bc1a11746b2c45c3321ce74a519a1c0575cf97151a83bad951549b582470d9a1ee792824a864430355d5fa2911ad28fdeafce7f8a2541ab47c1e3f6caf8de878125f92ffc605450b83dfe922adcd67c0026ad8c9fbad52420ed6e3ffe100d3981a5c825f7c2e8cd31e13fc58efbdcb7fc6a7807085cf3cc38b0acc75de90bfd653f76fb4e5824854eb3dc93eed6dbd24210637a9bc41c34d40c11392a3ca4217e32c10ce21b62c86168fe878b7cffe9cdc16500afa95079c340b4d661ae760deff7e36e05a5f5c85bfde9f50ca2614b7b00f72e7d92128cb991f6584b8759d55d08b12e80ecae63b15cc7713582af870d5769d52b11356ba924dc9ab6d250725676d3ae7d64779134745d5856e6db00fa4a7736c30ee4c21f555131637efc21c6cf2278fe5adc1a0f3476900f5b57ec709d398aed0141fa0a4e48ad31662dd2639491844ed342ff7b8a0d3244fa726a9a70ea31445e765837cf565559ccc0ec8df17397e82124a8ce7789a0fe7a3edb7fa07b0dd1f5b8090ab6646f28f2009f929fa0066ecdc23ab3629f47878a25942dba990beada2e7421d44c91813234f3cea3a5b15ffe287eaf0813a3a1a027b0085d4f632339d05b8269d8f7583600952ce12e3336eb11c1f6bb8f584c21ceb102cc69f6aa8609d6552c5d26201170c899eb93fac39fa1162bcd7d5ae79d6de80e9e178e74fef9974fbbc52a66674e9683f379505d53d1a632bc7ca513f09be0448401f8b2787dbc40f8da74439c4e83cded0279cc27956d272f69ee36108dcab67537c54a286d38bcf4649b346a6301c5f9d40d0d3ae9a415706e4c5dd1107cf740cdc6f54827cd610b5113f4e8f5e39b00e127e1a3301c6161b35214ea7474a644f80d3b67806aca83417553c0b04f6b5c1f5465d6b862e63d90edc6d78d910c6d8cdc684f68991528bab01b3c6360659862ad273810c6fdd4021620f80a501a8d9b2eb0bf7d8a09fc373a369fd9cf70933080a5569e2ed48a2e2096f568766a04d3b31e45b6b34a264394df15a2f0c0a381076ba10812fe1106cb46344b3ec64c5ac55072304761144b0ecf5aacfb0a58562d4a465f445ae2412c7d71d0599998a5050643139e401f2d4a52995b885ae7ba7bb38fc79c45362764ca97f65ba809f0935bea13460cffab7ce36b42a35af76ecedc0b3446e31d27279dff51236674524de95fe9fc6a4c4a9a6f23ef83d8134c1322b4a902fe77b0a0c42c25370be317bb833f0cc30e06cf18a4d7988f6fd734405ec8b924818928d8a289d0f7782dea26456e528b528a68d08b0f8ab6245cef4b4522c85ce8adb0fa0ac35bb019bb728b38c95a60ce9431bb879e0eb76c0363689b70c4d8a7d94e14843ba0161bdd20d4d234dbc023ccbee5d515758cb1d0f74dce36b5076160cab42196c921217c95c06bb1035d8ad9d331f289c1f487a4ff13fc9916d5d0dea81a74dfedf59907855ea40d62c9554e0333e30af0bfbda468521aca2f2ecf42dfd273bd5ada0bfeb84fca58298b2fc4e301b2c780e4925e9159bebe61687397f33ed3a47aed0e77e02920cc561bb667f8270463cac7ff37fe1bc3f38d156139b36fe25860e35649dc3f3d8bdedb881bc33400d0f09802bcf5728d5686910db70346482f5da6e8426a2e81c05cf6ce69f86ede0ae4e6c700a1dd379faf6965f256481a9a38492344121873b3125ed6bb05cb1492ed2d47d74c1cfa50787f7f1ea2b05031f03f45745bde5f5beffce9695488a1dd21f7665ee564a546fc3c0a319a91fb249b5d88d2b5b51a32f4a480fba4264c151f28267be072db918cbab519e9420a437d5f1dc45b22ae8e6017720493846ca0c4a35177810086894a65d690e3bfbbe673816f190a64972adcaef51a437ea04ef64761491e84bc5925aff21d042af4e3d2e67afa787aea44c9ab8d368f6512b97ab444b9b259ad29ba1f6465f7d34f864007a610b68f857ee8b058df03d6e6b8dbfce1ab516bda993e41ae362cf2a354da66a85ab02dae05ab4d4f89b92baf1ff8894a397b41ffe95fcb0768a366727c3fab98f05dccd55d4515840c7ce0676498c9a15252c498cf517e5f490544149cd13f81759328ed51d50a3c40705238d140514fb1b124a78d5593bac73afa466b8636dba815e08d1123cd0f59a9d5ac22f8bbe7bad3be81582690c14c65e8f2754a8d59653b30cb1ea713ece16035172a8bcea8864dabb200e492cb3c3ba284681353288e300c3bf4933269dc797a1b6532de70a7a5416ccd71cade29abfaa0d4ebf5e119bc1e7a4a839f2329838359f43b359e3752a9cb59cc00bb82ace339251d5b3fd33cc7d524b0f64361877aebb7d14c7839f679ab9576d3476369e93448cfbb35eaf74a0ff6c215c758764e781be9e9b31ed311c98b660e3240413913fad5c0e5c2aa8c6a35dce4fa59f4efaf10d5f9c9434e8ac3368f790791c87d9e81daaf84fdc90c459fe4ebc11255238a4848460b2bce19818cea76040c3c4cd298263e27fe5b7feff060671c4fe1c763a6d04aff11ea01c24e7f3489d51861dee28c8dfc19bf649584ab9027cc9753145468afd07c1cdb64833c1e1ec4f2b9ac58206cbbae6b304f7a3d7ae35257b4cb238d8af5b44803f820c26560986516317f55ce63145e0f0d16daf9202231e2500f826e89e314a901ef0502452ff46cce2aaf18fd8443dd0fd1f3e9f89ae35f831ad3961081d6398b4a91fefeaf4036b98bb436deb26c22796ed0986874daee49697de7a35bf7770a06da38504e89e6695c38cb806194b8433a58d6067fe87b191f21b1a41976b758fae677627cf323de69cdf9ce3f69d0dd98ab3130e02e32ad0335316cae4f4b19636a702d04c9a7458c94aab7a25d72001e43c2ccde56ce61582c5523f45a84c9f9e29a9adba7f951bbecb1ed5599ffdaa21eb8d6d1f2ec46ca120dafb8e222e6d3cd5af9e19aef0670969daf39b40911319000effb0f7f405c7f3856f3d83f15468762b087025bb839af7e61a8319756a87cc8678db249a6ed530a22563d99aff980da920111e936270ca2d6e810f4180366f53bb962461e8f9499a16d9a7ca6cf570d9596f17a3440a0373b90774f127a3473ee02299df96f67e9d2d8edb98bbcd1575a9ff7546c78dbe895bb05e54c1974a49afdaacd997a34b9ecb1887185e7c2c28a0d86edb28418a63e3bff1dc93029b6815504f4f1310b133025470c169ea99982472c50d962c1ad94a4433ac072f6a794021d006c0f1f4866655b0c9fb60d8163a2fa79b34354b9272506717dfdf03aadff7725cbfaad35040fdf21437c9df41d855335326fadda6532945eb578d30ff90dd5ed850194bbad9f227c9d2b203b18b32985559bc30a7317978de7fc962e85211d3b69bb222c87dace0c9efd8e1041cc27f6b96263540ea674ba2bd375a7c5c898e05acd70812ea3f7973072be508213768c483af8572b26b24a52eee366bf5cf8982c8ccc225fdc26578f3be0841bcb892d8af2988363019637f8fe7d247821be45d7b7a0ccd9f43cd2e89947437e22f44f4a2a6f262ac929d450cab61edc615be3b100fa850780af54949210d8b71f468adadfd27598e1ea1b2873f6b02d6dc0933e9ba406b6a098c77b3f0ef1079cdf675f3f05f66dfe2311b1377eabbc5dcde995533261baea474e78fef5a8d58cbbe38696bbdaee525a2c09171989d53802a2678a0081cc50a298f5ebdc1e6488e259ce857c033b4e531cc52d2f04fa9c95136d3bd90e06dddbc18198cd847d5f33b8134466effa3bfa8af1a68fa7ca833337330cf5a1c69db0f7ed86e6b4a1289913e8676d550341c39fd7e97d62458e068b3db13f46e7875b04d1877dd174327d3c13c25a51e4f5bd81f942e1ab7c55f6c39e54219d418c709c2820b1e85ff882ae42d47ab09be1a1c506fde5eca0a2b3f79545081e7481d92b0003345701ae085321fc542c89eda8c110cd2faa448553f3d9d6e8e54978d78332bdf24a5dae81ae5b1661242b9b92c8223d0957c33ea6ae8faa36453e6e916eef45fd622e12e0b26a230bbb235352025d09b2454e6e3ac8fba2342906f81930d5daa84fc0a65592248edf93cf33a7a4b4dbb306bbd1e490cbe1ab89733e1fb349601d536c47076bbd8f35a5ff5f8ef8eab372002db62a00b6c269dfdebe4cd155b0f1870679b465ab931cb58095ecd98c6be332197e7f2a9ab289ff62daf4444444aa5993aab4c368c393213eec68957603215c17b2586957410207b956e6ab2cb48ac25a45ec6eb2b20a8007985526aca4376ce92a5f8fc2c63be5ddc6afe2b4dc6fe07bdd87335118682d5f9293c5d681cf76db74da790910786cd03becc70d28b236c1c948916f3ccfe8ddd2c7dfd973820add01261e4ec5f6b082a5cd4c1cad839a7fd4814e4d313e15ccd2ee3121497b7405e179e44b25cf8277b1b806e799d47655b9ecdc0993dea5ba635ffd5a447ee1e0361e42720729b6c0dd521150abcd82f47810a6fd18a7a29637abe8521cad784d16e5cec88ccd20b3c9529e1880544e482d17a890089d3251419f628225238a9d70b04927ef576eb42f31bf209322ce02cc8a3eccc5554efb4eddffa825062d8287f28fc8b554e4222e8438a74a858d9af8dd2317414954bea217ca90740516e62ea79902bd93674974468a58a61a300deda5f8ecf618a2da44108a36ecb449560903480cf8ea7bdd284ba094c18508b782397349a24c01fa97bcb092fa46f4044136db215e60bfb622698895805867a524c8652e08d0b5565e06a3487bdb62fadceca98b6b0836aae8e4ba769dcb78c165d85a0568b4d0cab8df049aefaa83a539d22da4d3325fb7d72dfa9d1cb8c513497b81571de74429c13c3165e1e0e0597a3f282cbcda6d6c1e42cd1638841d45ede902e56cf5a55e2c5bf554e880542f1a827d04f20cd30bf6120747ec5ba50f82f0a9c766542fd842aa1591de7c46eaa0ace139c8605adf2b916727ebe8d87ab386d4673c19e62a6a61e3a263219b6bbea7492a08cfb1d17f630059803f96ffd985ebc2eb84afa6ff90ab4fff059b2b26c3d44923c6e771932fd7e4111e776d2b4a992487f5fb0f8ac2236abe640dec6fb2501d1252f9b45ed4782f5e43c121e2cfe597f7d1a50768b8022d754a2cd34f86000803a2a3fec398b4f2ecfda1061de3bbe24f765bbb931c3c06b7d58183c0fc0368c279481355f7202c97be6d87d0b5a78ef2ffa63c83ab3659290df540b8dac5be9cfc5bce7c7ab29dc4d53b3488689ded71c610d58a249a04d92bb0acd3873c67d1dc16d259b0a448e5259fc1ec53241022c09bbc546cbc049618051db3336a1f04a6fca57c4d86765dded3ab42d3619d9cb036fa9b1bd4f4373226f1b1ccdb39d3f12148fbf8a2a36b16ceb6767505777cee0305eef5602b5fe2d0e19dfb90f84d3ea1b0621041926942762e72b86a9c6f2763745887699fb7813ad17a0ae12ace501c9082168a7fee272ef5e6e0f6a7154e686b253a0e3ec463f51b0cbbe0bbd771cee740c8c950d24b4446f8a1b93f0ff273414a848b7c40edf0b2e5a7d1a8f8182a2e5e7c6ee982eb929d6d326352498c35b07d40e705c78ef33130f2a08910792eb387c2562b5a4b824523d2ffa6d39f5a5dd6dffef4c1d47c8bec121966f8efea9413c5c64385adbf63ba23fea43378b75ea8349a57dde62b99a8ae7467107419436f68a3dab889da71f806de80dd2da454101eb29e508f116314c5d859fc01088bb8f63e453a0e6e9134be03e71a7345915231c8c34010d81c42a22ebb70c734047da17561f6df2684b274bc6836e15ea8499b29ca1212ca7c3643a7b55c9a482e498c7316fed731a14c811058f0d6fe5e865753eec5800905a3c10b30f4ada3905cd5b809b60b0ae8bf91ad34721b2aa725b43f656891658f39e913281cdfa4f7e04a1412257ad8b2f13bc03e54fd26859a10173a619d16dd665aa2b822ee7e2a6837f999fedec0dd0637baa17f0505837cd9456d0003c49a2c9d68cc806d9f5b6e3413baf3894a3c45762585b5806f6c19d1736a6485797e274786e5b602a6bf7e839e85437065a25d55b9014c7cc87aa9e0aa65ca82a0e5821de217712d29fd76064dbac88c63e760175a1b23ec687c683a64d8da2b441a18990c571ee655bc830b56956f2f1b40602d406b86aebfcf191a77a84dca64ab053424dc78e841b783f06063d310d55f441196da6126fbc4c15a4c346c17c1ff3df8512ca93dce055e1cf2657534b62be14f1a8e25e83559d1ceb1a88e7d7c680d5e431a2c108b0d70df816c3ea55717fac7413be9a603ecdd64eb90eb7d6a11fdbf2829f0478a35475138190f2f87b9a7bb6eec6f3060e4da0ba3bf3a4e3caef05f9cd3ebafa5f01d3e630db954f5c872ae6449205ac7c1212bea66725835f113ecd0c12833739e4ffdcda84d138e7207b61b7cdac0226ebb51fa1c05b5b40b7954de1b5dabc553703d723fd2c1d7d6d04774fe42d35ffbafd9193c485b782056c3e8f1358401e22f1ae226061a010b771ec2bb31ceb16077a0aff65fb42cccaa6ef987e3a1dd6d69f172e9619929a93d783e9aa771bb910276a7bd5179492bd8a6590a4897372b0ca782f5f3aab4d7df1c086b1b3f9554903ebfe750a5c170d936c69390decf7c34bbc3b3136daa5a39d6461a435445054b6873da3f4792cafc1773522890a63b56d525089ef85fb615c1fe9c71d397a8307e5002efee494081087cb98dabd02009a8f808000de87609424f6de720ccc6f090dd5e655ece0a70ddef494effb41ec5d3904b9dd17603f73f6207179b745c9c3b06b616d3921ff114a24154048d9d827ca81a16e83b6de2d46cdc0f843b036f2184e1f67e0933ad06b8f9f62d1fc6183a7ea43db063c1b33681c7539f66b4b019b6aac2726e0686404ea3db2277261584c06f52d2e64c8509e78cfda4e3f039fe048c335be9f118dc1bab80b5558fa5cb8241579389c49c4d470cd33c656edb0cb34ccfed2d45217323182224ebb8b6522cce9b5c365a3107d56284c7dd16898005c79d5c67f4efaf04d9349aa4a7436ca6b0ae877e4b98144d64d0ecfe79e4b8eab50e7bfb53a996c6f2e1afd2e4e46f6a0402919cda0b4d0183b01957cdae6f624730db5d3a99776867e5dfe321b7a26f14b219287a3063088c20f350fae31202e51059257ffa176e769e340459010b1b2932b66e9af22de5d3d1cdb3c50945827dc477475e9e301a678155003ccb5f957cb96a9ac4933ab81cabf99772d7c2267159962e80c3af4640ac5d04c9d9311500b2d6e944f9c119e1570b1cf41815ceb4055300da550c89e05ba4d4f31ff416936ee22397c71ff67cb6a55967a56f820d22f956c74b9349ae16872b48c0fc6526e77075b645f009e4e1551e79d2cd2bf977c5533fe496342a98e2e57764bde74a161ecf91e49ef38c85349638cb9e6a6b0b0f6100c22e35f94d6dd946b371a4b18d5ecdb958cd5032a622ada693bb74526e20cb8d80ae5778a4e238264d51c3dbd92ac6d2e60000460eed42b1b117d8e9ed1f413e560a1414009486dfaf28d188091136dca1ce893f1675e94c6c196e87ff29f2226eb8237abde5eae056d7d300e69aed5cbddde481d9e3d6c622120440a051edfcd8662be66f783474e53ca6ea8a8a35252f8e8c5bb7c751e8c1c3e2f4c2fda671960e09356e82494c5e3587dda63494cd90ff467d47bfb7243a684c25ac7cd2ad22524967bbba84c439f009110320839aa2da0d8a171e94d536fc7abad44fe7e7b21e7fae585f9e3ff8b7e48ca0f390f2d1686515d80daccdfb73c95c2bb31d25b763bd239cbe9d3f8e6c470aefc32367af6f02dd1f194784b347c27ae4ee5e1cd6ea43a27a1f4eb20ed8502bde2a152c22d77a422a68f597be32fdcc926cff440d2f7ec4e4e5a4f9f242d3f190a70972a600f179768cab2d5b0183036fe00ba70ae8444c0b2a93f063898ab0bb6fda146270e102aea192e0c1f8eba93a4f99d214493b47a7bba5e1facf616603ca7c16f246efe2d3d6b17dcd5169c993d0785b20da3014d4ced106dc17b516f0f1a1015bee0d77918386880d93f259ae459740cd5f51cf509b3d529f1bf015eb7ab027d97ee817310dba76276afdb37951324dcc9bcb3462a996a53a386c4df9f18ca8718993ce457225406f3ec924005451fa7759d6db1dee56a40711b8245a1c1bc1d2a719249e863e67b22abda18ecee7f84c22c9cb453487e60670bc54282bf471ba07db4566b6240aa1541fa321943337403fa9076c8209344a488523fd25a1ec212bfdabc5ab9b71479bf8db2489219af1709cad6323aad8d8cd34fc12cca408df902b9a35be1018040d4b4d79dc6db961438a5b7b298f1000417fd24f5b9a42464da91e56c998b4c4f3ef41285394f0946911acbfef01c172c3abe145c16d061027900f7c372829af6edf639cd6d8e7999cfe491645043ca1b8c60f908df3e81aa35d8985c75f4605ae914895c4f797c260c1333cbd9b26152956f350ec1e6dc9706419cb836874c792f486e37f1e383a576740c14ea42861b6613785bce1a900805e63977e34285e8a59689104f09258b141aee33c34a853d82a9ebc6858e603ba8653c520966cf368517b1ca268afa6917306c7acb1b183854a7d3834e3ecff4d9b9695d23324531d47f54e8f4777de679d3091832a93f260db725d1717c72d33dfde6aacd0777782ca4996f1f639edf2c0a18f554a3ab8990c88bb88410ff75ba1b316571455be8ea1da6a4bb4a4584a0eb3d6936ac4374e34c99b042da23d44c45ff0d88883fc52dd82b878c29d377b6fc0afcca717fdf2e1e59959a61d7af665bb3cfb6d11e9d98428e9b87eb98970bdb2d4a8a660e3fbbf5fded48207f06850bef65c8502e04007c3c518930b10a243428b4419aea37fec8ad3fcd11dd76d650716cb7cda925163fa2281e4a2ae9aeec0add59289d13f2d36d39710138cbffd017a098a01a2a9c47809e081101c7afbf0a102faabe89c31ffa766b5998f0417a5867983fadf880994db2cb9922e0eae00b6af298d24b412c20f012f899f21b3faca3c55b7dfe418ae736e114e4521c5e96cbf3ba2f43360309baff67ba6eed4f97e9103b69b28c1329fe6647decab617973c87ea4a58248fd8b809c467b7e72c12f682a17c1efbf7c8aecbf4b23041fcd06dec97bdd985154193f404202dde59563bd8fb700586b591e6796c1177f914b6b22529a5bc670fe6bb8b785d583217e040601365e613eadb95ea16da4826cbf7285b8a45ff27aba00f06742cd1b74aaf64a67fe8d9c7f7bc7588c19ce0f5a30cef532cb6bb84b51703e9a674910604fa6d036f4526a6502f05017324431b0788fee38b751995bd8055cd5e9b16bac81fe4762b04e6205a41cb9804bc50628d7a17f5dcbe9b25bf10a6984e400e1b2cce162aa31153f11daf2314b87aee6c69f53a4c58753601050432721605af486ac55e89ffe36fd99bf30a99140e6631ac096bd26157e1e5c3b18d35c17d14d21b0feaa930bd9c4ddec08eeccdb87d3b4389ea4f9745b0733bae3ac9a3721a910e7f6362bdd11c61e74cba231dc312c33433380efbd84dcf73ba13019416e6c1737b7b5156b821d4471dc57ac9e658b5891bfc75902d3348d504662f9f9b4267251291990b85f7fa0080dfe54c33851145d0de441185a408590df74fb98bb3d0487cff3e6aa5193c397c0d83e5ba9fb60b2a5a49d2a589e4c0d6aa16bbcee1317ab423d7b687ac5220ef698131c8505840d5515efa2a079fcebfcbc8abf62e1ac10dec9fbba419b58d850e9229c2b54eae4367256ecefc95d926c83e10b420277f95a4bfc44f47747f933e7dfff79dba16eda750739da64f20661b2dd51cbf7da8e1d74ca35ea90c23bf92aeacfb8383fcb5b72bcd1a47cd9205fe59363f5dfc85aed72506a24cb71f41fc9ea615edaf60fb3f83dc4ef3e6bb4c30d2856c234e162b8f49678af4d29ae00cfefc8cbf1abc7459bcfc1fd8267a79210a79597940f1017ac3054c387be180f434ff48143b3600ffde728bb30473124c5b8163c039f0577ab6125e9006ee5b6c569a933ff3308bc8fad3f941d86a0a51ee2c0a35e2b9aad1601fe36e7dd7b4550a61192ad9af05da1691ec82ba5e1f8ccb5f443b7255fe4ec857462dca1a1b9e07c6c73df1b2b71012be27869463b735cf693bf73a97cd8d2889e182ffedf558c9c1a34709f3d1320f35d143157a1c3744b0f68099d01a27bb490bb40e7e541999552976cae86d4e05b7a3868e51ce256a7be4d7ae559ef2049564ce521e303b048c1caaf4723277671be80aef534f106d301903f52b45e5fc4e3ebf33feec1ce60ce6d56b94392236357bfacab68431b17ae5772c35ded7409f23188b8eb10d6bfad64f574ff86b907d182ac8f14adddf21594c6d844d19eb74f94c8cc2a3f58f1f73e6b166160473f5f1f3c320e396044a9beb2b030ace85260144b6e8c0909cfc1e568d5085c0533356009d8eb0448f18c6bfccef7dcfe81691bab8623a8b2d06e67a302d442fbd58df5a927b34ff15eb3eaceed2579aa7387d9f329d666a8cecd90950a755435d5e2423797dc60ca8cfb4ed4b4ebac0e25ecd4b466360f96e0c647644b841e8311e269b54d87c52e4eeae0115d54b6f0d80daf018689a99b385c919728a7fa1253c9be5c8a266e3c98366bf7b0a38e896fc73c0df8d1eef77ed68c2b4ceea46b37138cb19f8c15a03fb28123f67fe64a59aaf4793123b75530a59e7ad51ba82eb15a008eab24a92586d65c15fde2a5a50909339196aa50770982bef0ab1a09bb47664df7db88f18434d0907f0404a032987a2f444ffbd8b8c2996cc326c02b95672d0cdab0f82513cae2b1fb147392d3f28c70b13a277420f9cffd2458f53045142844c0bdebf8d489464d27955e0b3b8b7cf8f146e12296922f831c87068da62b2d89f2cb59850a2a82f33cbd972b901f477eb0fd0f0d232abb94ccbbea574824188cab551990161575b5795b067af38a747ee388b1611173d95cf9480e7f09836b3346e335efbb8589a9afd1169bbf8831b839f550e4c4d40a9a2194c7f6e331cd7f260ceb693251d8ac5ee817dc43850918b8437ff784a21a485f129d9ad0757cbcc9b5ab427b2b2edb06370032949e990dcf4e738f9490d4982084f1c8ef3baad63f6a67a04b0da1db9799bcc8ab6bbde71014a83237396611df4bd76c8eab526440b756cb539debd05301d025175cc591421a6df3ff13c71f791adb07dac32c3ab32f03e6740e8c5f709259b2f9f1e3ba40511a8bc82636ef10736474859273234b48ee724e8ab7fb0b79efc01dc513c6f99d5a135f25237114e267571b493aa09dbadfd16fcfca1a50f0ccdae597988cf02b7727f42ae0582de2e896c70541fb7a560095d72776aa2b9fa906e599bead024e29b0e5a492df007f9edc9fbb661a14ff2576b8a48590963570e1f0d96c25efb7e2caee36f0636192b43e665119ab5d3030ee91c81d04fa01438dfebaf716855fdab53f508a37da92f17515fb6f3d6412ff1b108732b4ad95a681526da2cc8c5f2fe08049f4fda2a4b40ade94bea89896fb9c0dd8a7f29f9e95596dd153d92e0e5ad0b78558c8186143bafc654ee65a623e24ee795ef0e88ec0a2d119a79955a19185badbf6105bb8fc9120cf80b8589c09cd01bcab3ec558fc5a85d7670dbe7c96914041fbd6c103fa520fc990d7812951e359d661a03f52872698835afbaf8b713c3bc791f3d9901f0f908aca8aadeb33f7292fc05e301a136c84b3ac077fd38b6158922795d5131e76f4f9007f8701671e9206561688c6c85b4d90acc69cd5171ee37b9cee2bda4eb93126dbc4335bcc1244d7ccf0302dc0f79002c606007f68211a41a0aae65e380ba46e26ab215b4856bd0a19c0f63e3489295ee7d39597b1ec99bdf147caef6cdf262443cdb576e1f3b899812943c3ae9e019c3772b0f4d97d51ad8bac20260cf8e5f1a2b7d3432b4d47f753a1150ac69637e82c3aa520a7be6b3e39934ce8b59d3981127abf15615002d2fc91df1b77ac71ec29c0bedd1dd47f1757b049e57a369c455156c225114e99d83c66fe34cd4ce14042962e5006c6241bd9e1eedae96fde9bfc872edef50d3025d251a9ce34552fd5210499fbf610eec3289fca3352a7201286bdd67e9e7998199ba360506bf093057d7535756f84ee2cd79922d78b84ab9673583daa396553d5fd17a1be29a96bdc94074e6bd74da9d9122d7d5bbfdb9cf8cb375a1d12b8302b5e87c82fe41b5ad4d4698d1ab0cbca31e67d01826c16a158e15b6b963947c50196e1c12053d7cf71f18aeed290efacf859847341adb0bcade8319fb3c0964104c9e49507bdd3cedfdb1eb91a0000c736a17631a0a112bb07db075a3ce0df8dcda88d7a08ddb0258302145adb22f668aa4f3d13679729cb2323d1834f528a2f13ab5e32d6b7689703946edc2e1b08c8ac6da3a5331b64320ca309933a6001f780664fa8c224dea6caadf4bf85d102aa30bc1589da788a91403c0d9fc9c0be912cf8837581d6126b8178129f9cc7256d72270a5b49308627f14d61dd5997c28a30389be32504cee8d2fe1c178554db45b249a3ca1627d704b211fcd989be8092c0bfb3219953a83486e2d6828c098ce2bc5eb7d31f3b5af281343b075353b7a3834b70d085b58de07f77707393d3a946e58171c7dfb62f693a2e4ff82c9109d49d3b29b3048d95853206aac24635303988c84d55b662053c469420f113ce2dde50103a224f0d662e5a9c1db5ee50ce41db83dbe4ea71ba218229ec486b8e686e7e1f577231d1a5cb8408152ae0992884d9473f17ab2226a6a0d1f230bc1e12073ab2b901d5ece80a869f86da7a3b5b7f912f1a959ca2d92de725299cfacdd0fdb514a6230edc52390b201afb4a2dffa7f2e01f4ce7b3d06a463df7734b810776c5b9b3fc8d12fcf883126db3a7ca1ccd0bb51f68a4bd8eb2658f1413f110b4380c44486dc1dfcb431ad9ca91157e5a8f3c81f904e1a61d35a9464ca79fa036867045a868f0f2f269ea467c48e7e7e50deca40c9c0df37cb492f47870228be6b177dc5d8b97f1323ae8f1cf3e4a597456b5428d1f633309a9ea9dc332f005c2ca0dfdca72cbee58b003796abcdb802f4161fd971acdfbfb5925f7453208644e0b0b2fa5d1fa9dd969683df4f4daa630bfb81dc08dd490e41114f96498b7081be49f2873834a67a6ffaf900b76328842f2d8e6662490993cee1a23a6fc9d3bb2b7c3eb63c8378021dd8434b80b36fed1344affdc2bd7c6681fbe4daeb6a2cb4f4250cbc58f77cc21902576b0bdc47eed5f7146e3b2faa80f44265128d9408a6e5830b0c45712d78e33f958e29449f908e78a2a2be107b2202da7a5b90b964db2690f4b502e0ba099779bcb15be9960718e148d91712677d0dd9865671a37b45872327f76fe893ebfb100230c07f0dd5948c28f6f607ae7581ad263fbc009ad65b5de72ff38598e19cee0f76d12e06b1191820f4875ba0422e37a47e49f6644fed072f7673d4c54353f8222808931c683bb55f39841307da31de8b3f0b2253819f31d826494734f8b2edd6f889eec7a9c7afceb6baf06af58a0e6dbaee8acb4ef72a722eee4cb5bf328b52e9e3e1520dc2253881352b61c8d0ba0fa69d551cfe4d22e021cf641248ff3a4957707d14189e777f8ddb50e21656f5b23d32b040958bc5fed4298f15a6684883ed94bb2602d4a56e4aa6ab0638279719b1d9ce129133a5903f027db90a5d4e17dd1d4a8bedd64b9073194bfdd58bd0eff0dd14059dbba7d9a26a18e89ef710e47b8d7b598dd67d7d02b3cc2f20c6a825f5ae84dfe8495a97b0c2c45360f795f5d02cc27a106726c450bf621bd7b80feadfa22b4e7fd492ba654b942e521420b19389798774c95b6a9f3b50373fd9ce6a8ff679abab89fe4fe6f94a8a5e833ea9c1f73b9b9c751544eb775c3ed36e5b66881f5907af36588ca10224bb3449cffbdbf7da24c6b2f83316969ad4dede6c8f710a1e0149c0a07c11e0fdce8867382023bf55e0f774dde71351c23aa33ccb149af61d3afb10652a4e6fbd746dd2ba26e0c88b8ab901a9b895f44eda350e5fc98ce84c026f899cd6a510bdbfd9d5edbbb9d7ce1c4445f20a83bf052a600cd87656fb3dd2759bf9b852d5afe326e6743fffb911c5e14bfdb5dcc3641f95c553031e8458827e72d34dbf4ff9ae785d769f5faeda9467abbdbab59309a741b74e6a8f2e9ae35b201a1c01ac72f82d0bdbf50f41aafc7a242612012d51d24cd80d295e4567ca771732b3f26ce8a678aa68d6a996ab8c48bcf8862f52272fd0522a70bebd2aded0f76dd417352faaf83a7dd31966420b3a9ead61d014ab072c0593dcb6d147f08da19e609365f0c0b65c34a5ad621b5062b679f14f412015b7c1e80564b72f0b4e29789cac389649da9426232c846f7969247f716ad88cadb7d71fde16dfd6e672c1505dc130a419f5f8ba36a3a72f19a68d630c711882e074388248ca9db37349c4ae9b024b6f5ef8776f94cef333bb2a209eff60ce431b6214e118b1e3aff161d977ad4393d74317c194813b2832b8c195311f35e3c8c8278824010684197e2c32b5d74868aed7ee16ce816ca19c0802021c361ed3cc38a829d14b4934396a2999d6e05792efe8d7ede5987f8ecb3b085077b016924782d0bcaad26898cf69ca804dfe8571ab5d182f59a1db4d8f44c59c092b338caa7ddc6fb0642139318a535263dd354d7a6c64418c54a10ff705a54a7e47af69bb2a41058ffee14ecf64b92257b1f75f2d9a664cf382fe4123cac74af011eb9cbdf5fedea3a05bcf398b66d6a0722ac933a9ebbe33c3e0166afdc4690fca07d363f787f5c8b5662401a6b66a3eb740f4ef81209cb5fb2536c09a1812a80fbede633b305b9698e103c3fede2d7d40bbdfd5ad06ede6edaa16ec486af1cb5c6a637fee139fc1afecca9e78c5a9752f27a90ffd3eaec3e9e561b1cf82c339bcf8849e2e3753e36892ffc4de4f4c6be397c3101f30f0d64f3699a40b6d85697387f1419e00cff27a0bb9fe4c966eda37151856a528e562f834c17cd883b2dec382df8142f4c4f104faf6b089c1b07e5520a9f92ca796365c03e05fbe71fecae7de3095d30e6a4c9564c1c64daf996beb1f2ed636308276b81bb099caa710dccca7795a33c0fcbe132db777078f4bc5b5c5d95d9398fd9a40912dd365a62fa31d870ada18f10f16e6351d5d17df468d2f63f5f83c044e5f97fd260ad33c3354ff7c8b325a09dfc3ae6789af1b633fcd77558e3b26731c3199fb95f8bf89de4f96253603e7f940637dc4695820f4dea4908f46c7614d32aec1392672961a41b205a8661fb55d932511ea2ad75a011eb68482d4baba72d858ca2f157f0874b4a9ee827a73e9ac1a6220925bc9d02a6a1982abc937e01cce6fa67be53b7f8bb12f9f93ac80474ec6005f18fb33064a1b94de443987549f1b65842de94cab829feb63988372585523cb4ebc8c89096664cd1497e84e630aa59d2681d945c53970692d4474631659970ec32d6e3aad717dee598a5848209a6ddacbd6fb4dad974ac6564670dfc48d7af1dac8eadcebbcdcdf539b3317681e67248ed8eb67a9b4b31af8141568c6a6e761f906033072afafaee97b34f62db17f1429073aff0907098c17c333e9bb2637c341f091cc7e356a96d057147481bfd131617f79073a3b593e73fbc49224b384824e21b6c33e6805ae0b8134cb6b21947342f26af680505e06755028e2e2f1a02f29d7f0f62e3c4a5210ea205d0803ec112d63f3aff02bbda959420ecf332513d186b79f509eeb45fea6db50e8e6646d3a34c61920585753a000dc06214e09e61a3e118d6c0a29421dbaf239bab378ca893d907122e7260fae1bea38eed4c9dddd3b7b0750a513fa89e20a0ca9b815a02269328532b70dfbf06a9937e7e0d284510ee4906a6ea4f48027de6e3fed1b0fb00db8b6e48fdf21425d0afda47a108c46db3a38efd6f6c5f75ff6be614d89ad4409eb5046ddaed9fa2e85927ac1077b84b01f6eb8d22f05ffe5794e152e19b82c81794fd425ff0300720c88fd025e34802c49b479a43ddeb487dae2f8242f7e6129e6f554d80f8bc9ae13845c8e523cc79419b8f4b41d09f09f019baea1c7ca628c72225589df22900938d6c84f611a8538beed1141e5c2bd86bdf29e8d28f50d2ebfbafef58d965e2a49b4e8768dee257fe5c6624f8184ab0973d9987605d65c56ee451c6570594eff21d5aa62f40e645dec144f7c9d0aba01cf6dcf5198a2d892abff1906fab4a9a57a9481f42cba384cf01f182296602a098b3fa434bf584141eb2487a5f8f2053124b5085790b2bcaab29ef3b4da8074ef7dc164ad54138fe0b3be678dd75b40ad2a06a079987e379f86a56190fcbb67ff7847384b70113692ad60c5ede6caf228ef4e8f9538a973bfa5b1819a07ae4f0ac3d2517f867429bc331a3b6c76836a0fc932a35125bb7f42b6a6e8b8efb994cc77129beacaa40dcf55abc96bbae2bc874bed1a5d2255fe0bb7b040abb0629760f872a64ce3e0e7caa7f98373dfead8b57ee104794986cabecd498d6eea3a95759bad46aa80eb6a31bb18ed48ebdc22130aa76fcd8c1a772db3dc4bdf782280456d06c21ebe56adcbea1933687fe0f56bbaf4bb47afe57dfdb52c3ca858b2fdf1697dbc421b0f7b4b505552b0490944d5e3e5bb2ad787fbc9c68ae6a00cec5c76ec4acb2b22a29a531d365713aef35d3d31daa1de03221eaf0e5d8c573ca0cf1464f90804f9a6298ae5b91a858e5b08fc7001dcb5b5c3d09cdf95d8a9609bfcf62f5d847175a402828f37d356c09445d20535f9a956d5b04895e85c05258ada58a3a470e9af5eafbb138c3f69490acd94b07c575097c25e902543c5f3a58201f14a52e43b8b9749ba8a6be9c22feba3dfc80a6c313993ae3f3985e5dc26cda6bdd603841b97b60cfd8821d76b53e2f7fc3eed9023de9244dce37fe763a926cfe26c516c2a69fe5bb0f741ccbad11b45b733daef9a9f5c15d1bbb04506a6f9ced078eb1d0ee7e33d91e291c13878a867a170d39a99c7b264433310aff8e1e728e4bb5207e2ccfd419113ac0235d9a9ae9148c531ed8205b3b46c9e83d45713319467e385daaa96169ae7f3c1beb3cbaf1729afe0251e463a643950d8dddfd71d519e615683ac37925c2243401c84cb92c36e65ee5434013bc05ecfe75e8959b46e407974c25f61f53ea8383e17744f31ccdf16dec497192e3cc08dd5a7bba5465437ace467ea2971a556c09154b0e5885d0613bacfa3c9f33d2a630e6a13d43cab6e7fb4c32a6a0c40a4079a93252fc68a2f62250c929dbc9877bb2c2e87d18187d58c588e525f8915b18fe551923aa0bd2f0fa263719c7ad5cb9f644c184f41d116b04d24538a758d554e25210c0c7ac5a063ba5e3442804e45840e1ff39cbe3a360a98cda6ca252c614eca6c96f019f39cfcf0ec826c6faa4a96033de366ed341852972d95410bb5092d1f1c9d653327133e1a5cbfa74e6ab219782297a3ea9bf54120b74207fbe10a349ed2d0fd5e2880434df8953c976e16e1a07b348aab61abe448dae624d3142ce2db34da0a537a8de191fe287a49d45fa742f5ea02765350576147a200c7a5cb445cb4b010b98567706e255699018d28dcbbda93b67666d4b14dfe5f28a9df9aa1ed58fea439ba03537cf501f8767692a6b4705a3c488d8440de3776668703883510dcd6538ce69db7f562f95945a54813c482f1aafff8f251d65422a1b65d4039074f1e5bc752645d20091bd06ac49bc4ae730de43a0c8bd5598580a1351d4c1a579bc1dcc8aa4961dc5d7208de390ad52e384a1139ba67470394fdb38962e39bd3323dc8eebedfe50b00064364176fa28ff06cf0ae4dfcff8e8dfda16f48ac4a2b2f0bd496e20c73a769a9d5dfa69b06f88a10bfd3045947215c3105a5103369bb703c6c89f41fe38d559e0827ebd1a39883f7d0282b023a5ffaa66997e14cc75bc687f5e68b5872da7e50121334675a71c531424d2ea90d4d5a1aeef66ec27c0534cc6755e5efdd94951170260c16ca398a1826bdcb1d589f28d34f4aa147d99f2a49b1bf3fdcaa4560a4eb67593f4f6a2dbeaee9618b40cf534b57d59b4525ef18717231f6603f66627af2a102e4251782976960ad688bfecaa7f1715aa51412440b3fe5486a82c54ea4f1ba819cf6466b3864beaf567c904314adf0b4a3f5754c7c8d21b3efb406ffe5a12ae91bfaab5e78d6eec2f139c5a1d50b9d70c442d9066b40aebd8a70de4d4af2d9e7d6b8905ddc57265605ad8e63912fb2aa638eb8c3f297ce970395b61333c7fb7d506a10161622defde7a57e0b1436a2eebdccea7c21e8035dc1b58df12731f3b39bd7494cdc725e3788d9964e3e9d15171d5e615caaed4586c8c1391775b150b76eebd44368d116657d63c077c1c48c8fdff7a95440d7de945890c97881f1eaf52fca5aca499bea683390183fd8ad80d731cd3656b796a7647c147b650351a150e90147e9913cd2efaad095291bc595629ed5b6c41c60c125792f3cad59676aa5e371e57fc2758950ced02551079bb32e4023497f300598f8ab163ee4e968c5551a3f66eb66be619b8165c9f22d66fd252c03a6d44b5bbec09e51f6c9ad862b8c65d7cb9881225df941581dc479b63c94906e6e8c723afa851a8d6e84105045916e7289ac338a6bdb28f084078296d5b2a226b6697b967e6a948fb9fb15a61bcf6dc5ea3caa4fb47bf0b9d5845bb59fa9e99f3771b21573ee280089b83567235093019b0529d070e692156d13b67dc0d18470de0cb543ce73cc93fd4a0586d52a64260357cc9e88463eb2670a1b27fc60b3a293a9f60d9d1daf31f5446e4e4990fbf50509acd842325198b9635dd5e44ce27f36a53f0b2e9996f7fd6beaaca66c6d7b0710d8ada0231e0be66c10f6ab6ba814a8f558683183060213de5b79998a9d8867f22b8de407d87c4aa82cb17c56632b01f61ca5d86f1312658c840aaaadf1f2e9b56e968c7d1acae666d61719c908337410d37a6c6fd07cb0d002c6a1b320f21e95141bd3d34298513aebcdbfcd42db199c03218afbf3dc3b675a49482e9d5b1e0461f38231c770f59ea99d74e6d0f0ece8f6f7dd2bd1e480aa72c06fd4f03bf94f2627c087ef1e674a170017479c859a2e5cfea9fce13442b7fb5795b1056fa1f2a75501c920307000ab5a64fb8266b2b614c3005f21ebcd87433363e72b93d5c6df26e569d1c5780c821a3c3838dcf92712a86c579f472dc05ae2e1501698675f8a9f41ab502d2d8fe9096f9b20a0bc61312f65596cc80f7cda0d03e4918338459f3705e2a7e4268324f13c1f9696b22f678fbb97a36391e2b418ca9524efd6b2e83849bb9b2b63b13dfdbfb593c19207158676404461ca43d4214a674ebf4b607a0ec24668ba8887c7f58342d57c5b39f4001a75daf876b87b628107c861574d5c613965366c03cd8066507ac03d3dfe312d7f11f86e080f0d8bb37a9e16372955d410a983cae8fb23febcfc2ea926481a3b31f5042015ec5fe8e8f6aa80fc46a4d89e3c036c543cca796bfda6ee8cefc51dbe4907623f42cad6987128fe6fe650b1c087bf932e51dd5a7f6ecf65f7efb28c748eb8a59c947be60b1bf924c971d283e58b8a82da6b8f531d93a2899db8af7bd7ddca3d23220496c365d5b8cc1375b0367783406a25a62614bcb4086169f077ff78edb9fc9c06d73efb8bf759f9d7cef4cf5fd23ff58cbf8e005db3c2ef8c8e9cf4a17e9297a12c66612263de858e14c81bdd4e1eb168c61a5ec64deaa07e9fa28db0a861b57f9719462c39770756ef1b6855b430d6c167f489c1828782c3b083a1a5e9fbb761f6d844e613d1213bd1c27fad4824517dfc6f5be81b579b14f1d2551bc153a53a4de2f49a3fff053e52c58a96b8576dc22c77035ad6bf6221258ac902b7d79fe7d728fe0aa005475e6ed847160c740294cdae88319667e9b5151dbf3e3e36d457e2d2978054826c5cbba2b6485a20de82d216c798aa096a555e567d65393329b16ed6ad1bf3eaa4282f18ddd4380d89a8281133216c6013915b26f522dca55fe3c22c58acbb6bb0576fa875c4dedbb24bd29be11b1cd3bd00557188f31101e159a2fc7dfba74065836e58c1f1867dd325637cc36b90c6f9965b88bf3d019c12de1161021518a49694aa335427f953b856a5c9938ca051f16e7474f5c9d5a7b116be8a802d7edfe7a22b6d758df452b18a392dc700d758d8dad4bebe0872d8a11491450369fa46f626c93639409df332b3b3cc3cb260531c7a92c7a5925f310f8df9b55ba39c9d42ef1db81a532e2f0d90ed8bdd0c740661a3c1bde9e0a69865b990337896b319e239ea4e593fb0a4d80fa460f959e9295ad45d62c95657ba3b28bcb11178b34aa2f49b57311d6209a50b978c070714940246b4aa3e8cda4737a93289f07b1afccb5665d17858d37a548e9035e5f1c52d9bf55f9a912b573761772de36651633f6864c36c96b98348ed4babfd0df00dae120112001086d2908bfbd95ce2251c02204e4bb76c8d0c8257aa85925fa058b167c36e05a3f024d05b26877a295074f777121d536da0a0a4760a9060c9941a8e7d57670901d1f61dd4f5a376bcb91b932cea3417af3fe143ba55a24928221cd530c73cc3f1daf0e91e16421f21efc39ec138195a47eeab530b5ee5439625ca10f6eb3d321c23da31df7ecdc84fa641e0adfb1fefc8b3587b1e57f08cefb8532d351a30e6eec47012898d285741c8ff4c6031df3a536902ae196e967ef62123cd460714b6d1f153349f6386f397de416aa5836d0352eed025341eed580041c4abc1596c8f1983d9ad235dcae6fd909cf2f2bd723444d58c4b87a2e3c2798943da9f7162adc5951156e041b2979f472cc57e69619adeb3b9aa0442f42a01c5d8afef5a52a514aa54e043e80f9d335e166f88a22375f418beba3d3f571e06866f9bf22a51c8770d88452579682e506e3e84359340b1515d448bfe4e059b084d4a23fc5c4151d296bc0d387420d547e06e58cae0e1fec4726c65ba7b5ae7f968b36ebae5276d41db7739ce362f7ad00e7a5cd7bb84df6aa687844f81b0a5e389123b0cb7d7cc44c428f91ac420bf3223ce663c44bb8988233a75626aa74c0e2e7a7de9356fa6e9cd0e85de71189eecdadc1ede71bf46a22df066c6582eca470dafcc045a8fe1b28f34e4ec1954f6918d3bca4bcdb1832e887ff6fdc0869cc66b217d9b17686dc1aaf0137c2ccadd01536b97bc3eed28428f743ca083b2b5213468eb0d21bd144a1108cbb68a5cf925e38c2aaa5c2909aa59baf40b611586daf836f5f98041aca3d7dd8e7d1cb8deb8a47d81f148bb64814a852f7a380b1f2b739f4473a0c1e0197d9c7d38e310e4f4a9f617df3215484d41ddedf3b56662c861bc72d75b0e5157c56eac4204126ff8070c562ca4cdbb40925432ed268ba1407f6e809d01f3ef934f79910a46ad5964d71bbc261c6cb9936bcf201a4cd9055182b25390a9035790f84087f55cef42b55222af651a9aea1b379e235ddea7d14a5782dbb46bfaa36652047778aa6ab43836ced250e7ae9f2af9b3688446538e714d59be35af1ebb645316c35ee8716f8820699e49ed9036e09dc4f465b5905265258ea8ff4cff18d35d7951398d7e867a1c914fe2633d256b1ae51d40e1f1667e33708ce69c16251f517ea26cd77e57449cdb838788c2a525beee5c44f74905eb1469ff787f6cfaf0f2ed0e53770fa8e1f28f2b3efe20a46ed06377062b81c3bafa07de7c8d03332f2b4740d5aeec591f304026a537abe5eeff62e834ec15646d18431d7fb039521e4fc622276358cafb31b022ea812a78cd923e80287c7945dc16d5c350afc62a431418b2bec46435b62d85d0f725aae9848fe41182dd075f1d2d15da6c5eaac3746d54b98b8c508fd9c9fda949a3d4e1ee082a3c3424b3e69b1d89a5ff90ec4910a5f5deab4258cbc9f394c594ac143d20649cac1b48eb0770e02b1e02cc671b9f03ed57887fd51ae014b2b6e2e937749341c730ca6fdf1e985f79250ab6e3dfa8f6720d3ab70433a0f6a9457619281e68a711fbf902f1190a439ecf7629738e82c7098ccbca7d1b1c5c4625e85956a5d4bca1a993c7ab5b57d94b32e8db5abe30051734dc9c4bf45505acbd700ae91409ac878a09906bf30620d7273be2e9728eb1dc4a4790a073e4a263c1c38f86984dac40f06c665d5dcf8446cb5859ff558d52f852d6f2d66ba1c109255461fad30ac70eb7e8bfb405ce9336f9f0f6ac82e6b6f01209970d82c5b3f2ca5f6da13a9b216408455b1f30ef958ddb3b6defde886bf982a900de4da6aa35f37f175f74a0428147daf5e9327e963f267abc36d1a9f2785aa0965bfb2bb3df3fdde828feee2182c9ba505cf6c560e34a88d05e12ff6a8c1c060231da2de8e0bcfe0a7aa2a91611fc224551741b8a42ca528653a7606bff9ac9c82712f7cfa9e84f2eb0b0568670690ff74ba589655b364ca79e3761f6928f07ce0111453a8949d39df7a1c2c1d28bf8a7765cbd479862ef76955d13d6ad46b9a5c3d7c03bcff59bcf44b6e8995bc531010a54cdc8d23e8e89af02f67c93b4c3239ff1f22a5729a00f1165d3825d19f967be3a6faa83d4c9640c310a747399de30a218edbafaff39194e0d7816529568dc91d161742c11d0c4600f29a36d331d32c9f423a5b1cb42cc2351d38129bf5e97f1c5d807770ba8b86cbacb7916e1b97ec793602f9602c3efd7c800386e58cb81b484f725ff5d91ef84914df369fa8c32b03dc6d5375cff0d2e4f5afcf24371e5f4113fe44dd7312ba7fad9ebfd30ea645ecdc4ba9ac5dd23a7d3aef9f4ca45514388b4e82dc853986e112ea259cbdd7397b18f8440f460c4fdd0cbcd68326f19661fe441bad1848a83c8bcbb72d5d451ddbe845acd3023e6ceae54daa4562e89f4805f173b685227d765e53901cd7da3c9218822d25936e7136559f8d1818cfe65e501cb58ffff31914c07fa2a90371520235bf1c138136c4d0a2488f6f8b8901a3940014d2ccf88c2112b94fdfba4c09540118c83a537071e961320dbe215450527a4b42d6f56c61abdcac7c8472ebb6f47aeaaccbf87aefb50b227d7d730e12f32691fbc1632691f715df6e3ae241b1b6b8da97030c4a8b5e73ff72659ea4aa564e9b12b5111e8e3beb35c768e3ce4600a7c8da19b99f7138927d58788f7b1d412915d593504b560438ebc73f8e5a9ac0cb6b492a3666c30b97ef6db4fe8e350a817edd9d25ee28f7c4e3f7e7d27b2e4145927840fd065760b71bf7dbd7ab4b88c19d0df6901e4593e6602ed708abb2ff5fe66cd3c2c83c510e54ba62249adc04fe332eb89659d9f835701d728d1a68952c4eea5f79cfd9e229833f81e5d22f8a9932c76c2b1a91c63607caaefa9328fd548240c761f31d1008a7413d90e64fb0fc320647fc052b5be33724194269a9c5c1f632db4aa5de731e2bb5325dd4a5f2cc6b6a3fb20d7c0201d2f380711587a44bff64a08117c0c3537fd80709b9e4f5362e06b9c17ace42ebb5900b5946b980d654dec21bb8e03ae2edca8e67dcde62a7691ceab7ce10c21670381b8fdf3a97b9e26ff5a22a3d74535b8fa2c729aa18eea6ef5118651e0718607b40d4f30c72ad69de41d09b028c47c722d0d1ad53c6d8f11ba08a554c9b7cd3a4b071ab8f878300fac64e70edd309af9f19a99a4b672658d93fa0a82ea14db590c122f4eb665795e6963ff1533138274029c5e5b484143e6eb8582d0cdc16665a46a2d38d8ab40a13193a02b053e9274f4bf43a0d3886b9e2aca9586326efc2cce18f41212146200df544ff2c014ddde94cfdeb52f161389c1d72c4f20e3f7794424b3a8a67f77b7df5067f92fdd27f3db24100ae7708b004b0fa1e6b7680b6bcdd286395224f86cb1a42fe7cbd28e349e1f1f5356ef3a6c61d278f3f9cc223e8846f749e650987b5507bc273637dfc702c77472859dfdd6e983427b0a0fcea5466c09028e49753b217437ab725b8d3e3ec4f7707cc4303177c0c833e6461c3905932790dc6be868f0ffa54e20ef844d7a66f8aeb86b7464143b891057418f2b3d988aded86d0ff9c12e1bbc402c38a6c9664176813e30d00c9b14aa33933ac4f038ef07b77f3b7dc57c91d29d674bf23792d86035642492cfe08c105a3726fbefcb3c0d9c582c6ee707305dd70beecc3d89723f8c21641fb0c42c5360ae7035b73425b755bb5e0859b2ddbdb9e9bc8ee4fb5601c90e2ef850a4a97d41257682d44b5afdbef0c35c3b5b1be60cc2c5cdfdc56bcca85631b05df3963ff831cc96b11c5f1bc49152bceab1bbea7398eded253e9eb3b3d4fbbfe5a35c176d3eb2fd0fd7eadc370e2f9d47ff708f1d2e5cddf5b2d6ee9926ed300292a2cb285b6bf5999ee8b7db308064e4d31bf3a132543d6cbe48ebe75d05c6453d3f42d13a69f7552c775ce1235215bf1ebdf7fa7cb989c2172a16962b2b2d6f72e3ddd1d76743f53affdc05210415d558588b9676c031abee3ef017304fa628923967f2e2e92125f6e1d93a3f82fd1bc4832094fdb9b18d1f0e57f1cff18ac25680c10a0a3a9b610ebffd935d4cde922a3a836f8c3fb31d7c7937fb2f166d34428e207ab13dd5a8eeb459be93757c1552434496cfbea4c6616647008051466522a368547166a3a6ecda40b5f1d81d6d1aadcce3b3cf681887cfbe4f10ce20242ca044baa0d769b73e62c0ccaaffe1a58339f67b499c8b7eadd212f13a1a9b0dba650358b702a6b92a279215f5fae61ff4c67f9c946ff23de1a6ca16c362cb64fb3eff6e4f141b876f6a2a36757002442efcf60c3cc17430cb8153fcb313560ffada881be52f3602a2e25e72fb06e0e0736141e26f62562bbc99b4a3b693e3c4d6866a36c691395f527306c2d4cf8ead82a3328133561b96f6efc4fc8cbcc2e687ae66c430c36c3a97485712f65914e788abcb8ed951a2093eb3e400a21da01713b2de27ce2206e5d3d1668e05b2d712064ec0e48e1af8bd871c08bb888810b6ec591746eb634ed2b59006641b093961244566af715cd17c69bfda794f3bb8731a0303271c01cb34bf08a2a22c0ea7371107f23de2a5ff8108ccbb3192dff3b9702bf9af078a1f44fd2bedf89c7bdb64cdf00212b98a2b886bcddf874a8cbbb8fbc56eb84a07eb698395156c0982cdbf980f05abf30e940566f80f70b45d3483fb01b083bcc7eb25a235cedaea80ac413970db6c3cc562ba6b0a24ce1c6debb10375e6888523a8b5cf283169064580ae94aa61c857b0c73a6d9e746184331c30e7f6f2970db56eedb302cd985cb811333b96bbc44eef7167655bf8447d0f4cd6ce08a1ca91de34ec0dcc1b4c5093c70c1f0f9933eaf89e66c683b3a5d8b9be58917d0322bbd39cbe27cf940704d9626902016a77e11bb4b6b24ec4f8c8d1ac9ef97a5705c77437a97b455e58be8747685e751228552684e0d8ff8cc42d2458bacac09cbc833581c644694dba048901d74bf62587ff46e7f39ca353c50397f9b256907d2bb94e31227b19b733319010dceb89423bda524aff4a641fa3340221b48024581afe5ea195a5883ad8bfa66ee699c34a407988421cf03bb87a6eba2746675592b7a50b923972ccce447da3319e6f6aad71ddf8e8d354769ee5566a96327cf2e1ae5ce4105eb3915c6f9ddbed9adc78696c252ee4c651eb86dbc7312c26bceee17821f79431703e5b93d813a93442fac08e5abbdf2774c4a282f3e3844e214cb3155fe8d6fbd49780c2a1f13d3a637a05639ae170a41ea82931a29ec4738fd4b78ba61673f5fb0d2160981c2893136f6edf87c29fc5a1115fd3a7e20ee8fa4224b89a1ddada268609136c4a6d01235d769f243c701cc620852f6edb27a79fe50c9ddbbcf922b242a7d31c451c6f64fd065c4a6a2c148173d2ff8b3e06845c8b20f143820a4416cf8e7eb73bdc573996a57f1d50acddd5ba46297b10715859966024a722a33f7baf61ba9f60795a4050a4c3a2a4cedecabc86d8a33adf8cb067aab112418c94a9f6d1ef9be1b64d0235698a436c23ff3bec4cdc00e44ddb6ada3bccea761a49ecf09f98f506e16bade49c52d0314a06d9dc948a639f715ebaa1c5d58cfe6a7206456dd0e85a3a6e57d38d2aa745e54a15e150e063ddcbd0de6b77f21f4ac375a0f88c983f8c2a917290b2ce48d62d09534b14a97f4b3886ca02343c3c3041cec949d96ca3a881c1aba8bc5209ac2429572a4c000965a9ebb33b0dee3d8621828727605bf7905b0a0c6a699fcab645f5502b046b06d19aa47708b967129275b8e6cc365f603f1902989f37ebfdeb2486906c2f6db29274f30f8e1c10003dfc8c93f8b11f43cc10305cb8fd887cf4e50dad026c9ebf796a47e6df21310a2c260bee9b19688de1791d7ac610b5562334f18aa1338e066e8f2540779f7c47bf96b04b46110ff92c64c7b2992d4a3dff951898edbb5e80f658b3bd24b5579035589fc1f2be4f8262a05685e7db27cd6653efaf843edc9ffbc42ca7e93e197e58a5b1d0e1bb864eaba4b4ae688eec81853a60fd27f2f61b13308ac3bebe9d4e1dd3ac2c75baa9a2e8b59006e428415a92829ee4221eb614e38d9c0dbb4c5c6694293d1a0bc5f953a10acce03c8aa2e062a7c884d7e01fc3b79fda5ff28e5b4ac10828c1fc88231c4b1cd8d8e68be81c83e8a27dd85b4ec147493b5c57fd6c1270f239f227ea98b3a29810ce407d63c97518723b09b88bd18d18b126afdb4e10cfeb1600d607597aa4762f1d74fcc24795dfe68487b7e95c3b74cbf19a441a037669ac083f599f2520ab7f872fdfc02e572473348700601da02b34692f54184eed7711571050938bd94c5c13c6e2f303df694f100a9f4b4b5ef0d22bb0531c3f22c19728791f5ef32282988bfeccb41fc57fa2c2fd42c428b26cc42be3c3c9d6f090e6062a3053494f03cc18c7c8a4551c6751ab43fc221a8eda273bfe25c6b9ca2a306a9c7b9dac66ed11ee81d6637a7a6fabc76c762dcdb7a07880e3542a9bd6ea40eea2764236cfc6d59b05f8fb9626d094426830161f96f8841e720ce703cad8c90c10476871bbda5fc0baa92e05d0594be44c3c046e44297c2c582beea02355cecf66c06bd206efb8e277b7b034caca52e4b9ebf7deec9fae1d1ab866c03336e3b2b51fc704d17e6f8fe5f9f94385cf86df40cb9d0cf864fbcfcc3f5b8e72290f6a56be9cab42a3bd8b5024b39815825d5fd9c71cfae92ff1a9fbf0a1482979c04f02f8f521e0b1cd46fbe5f7b77609af0d25f3ffb05e6567c7609a51769e9c4dba4c9c9938d8ed0e1b70bef2de49228ff676bab244e1e9df12beac41d996db6ae307f43b354993d1b90b87e7f9deb74faa89e312f7cc22f88e722ddef9bfdee540255d4504c2582e3617632625d06ed7438b5cec4869c07b26585715ddb4f8f2792ae91a3a47e2f604abcf308e48cd0e48e2852ee8115ff58f6c85bae114903737bf5faa924a41c95642fb090be7f5d40d329dbc939ae35012c10f5771f906bb093fe24dee4809d076c7942b59ad386a148950b4bd613a7174add8454829f27707330eb0be641f2dd58e6548bd40b055ced887436a05539db8cf1766dc9f1a357abb9e52c72f797d8eb24c07e011e3fca47f1eea574b2b4e0b8ac033e27cd262243d6a831774b4fb983f19e7d198fb483af81c29cc0cdfd59af2a54458d18cf0ba449340f93ba2d389c738feadf205706ab76fb2b09d0a65526e3e8cc87a75b4ce0fa18eb8834689f8a3d970a2625d40b9031b8a57556d0e9cf580086ba805bb16886f4d1503a1e26f2cc4fe914a9cfa6a449c2696bc7c019b464d00d086cb50213141f75bd9665a819be50b72c5d565a4c03039da3a68fac861e38c13361a328b3ba20b5fc5d4ed6fe35a7a9d21c932776b63d8824f9f7c48cfd37af30d3e58aae9f6d4bfefd85dd8355d789d0f2a05dfaa9f1da6c65af3680a5d00fc4e95865f476bdcfbdc756789d8d470911d26a9b8299c31a229686535c4680e9289b595c1cef64cffb274d0e68283ae6079880cd7924f4f6c0dbbef7c0985b65b191a8ab0aff71e05f6c7eea5429a31727d3b14a5d44a9413e5dd5637ec839dacc0d3e20472e65657af21bd1d550f283b062b056f0276601434290127dc1f12943e50e2b27eed6a7ec71b99ed042db301df8ec7ccb061484e17f097a45e0311c3c677444508fee9c109d4a200a34e8f1c4b59d8773a3c3d17c2b1ae5a1440397f27784cbfb50064d66ce631137e0758e01c28dae87a4a7870fc9b73bbd64db260541b731fdad03517f1608e938623438183db130808409ef1b0c190956be862d5046c9edc4c31e0ef87100efa8f02ed0e932a9f4a71b4ddef3166c177478c5051f240373cae2b870db7b2e3c3d65360feb151f1f7f22ea81a7d21463ead2f23f78b14df0e53afc8108787be9a73799971323a549de2d0986e5726f45112deff35e7645aaad78dc71a5e7dfc0209f6170e6a8eb8f2974a9b88f9eaa8d7f3d2f4150ff44879d7c6fd6b7f22ff39c5b672c7bb2d71f2e17d0a55b666d2c97c6b3a5fa1448bb3852fafc9e73312d14985f2d5af7b81edcf0d5390438a3091abeb1a026a681ff20f0d1d5028ac18326294999ff270aa0948b72eabef50af7d7f6524f95a9e82cadb1907d491988331d17c95d6d8d91fb0689369a90873796f0104beaec36436cdbefeeb85d981d1a59a213da33635f368073fadddac3710a83573855602c9b8f99c9575337991fc6f0d1aa46f48e48f570e9b7e4f6afdd4a906b47e7f4ef3a5daf100de36f3a631a8dcb32d7e5155b9a8669d8be7f537d6d4b2d825738952e07120846d9fcee92f7ee8d40f55906388fedf87c632bc75c736df5b9b404f1820d5529786bcb9bb77cec9e34e6ab6b85da534532217c6f1407854ff1b16dcaf08c51f41241c65914e2884321694c18deca5dd95c297423d715bf7ee9f9b04f2317955ffc43cd5a6ae041b474ca9d771c8c5e0504fc33e589290f0c5058eb5904facd349c1816a93d35dd3ff2e18fe730569572e2c1cf807e595cc516911a4a19638925ab16b016f53cb70373cf6939a922ccedb4b2df070bb182ea15a9a6904814b62f3df4a7df2a92fae703bbd8805bbe769d789d760424b3c0de04aedbe74920704aa3a20a6513cc92ba105eccca664fbce3c78e29f7e24faef336ed82ce806f9513673030862f78108fd083123831f4a4207c7af995413d36c039432eb1b7e77956a0a195d5b8523719d639ff12237d74638acb6db1a24406f59b899db00d62364364110cac506d769f96c137fbb606b8fcc028864049ef928d426d2a8a2f24efff64d6de021f38d46e4b463f057875aaee911171cb6f149a64aee2959c437b97b370e42b1c6154b8de7c5bce150f52e1a3a67904afe0d80528b82a9821b863d1905666c4dc3700c5c91a2ce337c14c1e4d2fce701231544c01160b4f9bc7ad99b54694a49591b24dc63a71f33f8b47aa37b7d8b2f8fab84fb1b713877d5a3bed0177e944779f2955e62fd7bf793e4f86ed6f10b04beee87a9e54839072aef40766d95a5ecf5aa82381c0ce9875e1dcdce4a337c5d3d7199f379ec5259283fe7f7b397ea1f994969195da405df9169d914fdc1945908a8b5b7698d3ac69519f301ba5a6db214c5d02777f67f1a795da7ac3e924ae3415440bc4923eda2929e24afee037d116c44e1fa3a8301edaef84347eb180b4c80e998e17ea65ec97646274cf075838305cfeb4d5af6b49e06c56cb7971eee1a6e9a545efeeb980c5b6bbc27950422e6c3c9f20dc438b196c7fdd0b21d446a98c9404e0940cbf481a890ff1a475f7561d707cab32aa3df1e632c49f703cadc418cfb5694a5b59202a503cf16c25208d1fa71e032b12af35e6822df6bf390faee7c697081cacfad5add64e702017496029dbbd8b84cae2665c8daef36d6e28a1d467d945236619e8afa3252454a08042ee546e6ea9d707ac7adb4e171b9f189e0dfd02a9d7e7e987308b6b894aeec567ba47189954f415718ee4d7be87219e25ea1eeccb5e36027ce026ae466553a6e3d036aebe6e25e5bd812068b8785f46942c0011fd4ba4f3f101fe656d352eaf8a7af86c7da181ca22921dc83de77e63cf898f425f22100d528237ec6f34be086dbc62af3bbe077faed76713274ee8489b404cf499136251f853da55eec0885c152fb9f59ee61b7fbfb6efcee4c62435f7b3a18b07e13bf818dd70d2b36d9af9d0d5bc93dcc4ecf4a2bc534a5e1560950adcf7ab42c51c7f9fd5cea2af15be1bea208ad41eb2f6673c00aa8e4a8d2e4e7c6ef6d9993a3df10a01aaee76dbeeb8c719825c078bdc7b87b039a7e0f299c044785f9aaa676899940f6410416c942a60924499a376cb035dc3e4dfaed21d592ba7a0c26737a6b2562fb97a36bec0d1e8c089c38d93f18e8aa54b994d2414dbe6803135a3cabc59b7bdcb6f579bd86f0580efb06bdca6e5afe547d72bb93babfbceae17b192369a8e45da8a666f073ab4c09239eb6072cdf1c0c10592b4b23078eb5823e1eab947116315d2acffe036b118e9a18a671c48345204735ffc8d6ffd72a5b8af053a6664a3722ffae5c5e942e21c61b1f4d10cce155a6670a8a98999708bc58b921432adba29052309d21f8e0ead71deaed03a25911921c3123e8026f6e22f9a64f245fa9b824de51e74140bd91469bf8db75b89f8295b87299a5da29ea35896d797a4ecfb52a815afbea8fc31be3d1032469d535330d777e4046a29574144d2c7d607ba6b40243ed91066fbe84ec2457ecb7d5e8d38b93de02224f84c201831f91e95a19b7bb0e4c870dc03a2d3f70a2d36d41e196a52b46e89cf7dd89f9590b0479a18b44ae1ddc9e72c456cac29f9ddcd60252446848f241bf916ed002987194aeef14865694a0efee4a45ba2c59431c19a780b746f4b5a30bd9e6e7375ca59db9d9aa69268172618b95681508b92f272983955757534fe97dbc2de64e7ab02b3094b407b94567c6f03fe6388bf21bd4c1687a9950e7a5c3dadad7dcfc85cf879a6b028db8f6897e73ed97c87b6e2d36a316dc0a0acfc9b80551f4cc3a7d26a0d08849f16583c74ca5ec43cd6401621d03d80a048fef33f4c823a84e02a67e86b0acb728f89beed75cf52a590033c9e1f3ad0e6315f688ce78f7c7a50d56912627c55b396d3235355da46445bfa9650aa6a2bb132251ff18a00b275a79bead6b6310564d42825159c5c1306d607661d1b5668862377c437e8ceab31b9da00f8f0cb1a8a8fa994198bfa71407db49a4605280cb75bd08fbe7e17cb3f3ecff35daa45c160c50a14679c7c304d55f8cbb46f152115f676c711d7728fe54e6a155968d6b6caa2633ea0f4016a8d32e36b09a6783ca69249467192552d144242ebe74b1b980abdbfc6c3da64fbe6ac051ada2669209954d02d2d71bf965e4f066c499915bffb5d5c3c58162f8347e1c5f58cd2fc6aba3d8a6e46cb1497f70f94575dce3762132627c30eac5260f20269bd740e0492c8a4e07051117ba701d11e9274e10d4bd8f8ca25cb837ec9830f682873e68b3e4a7f61e4970fc16314e00fa1a13129e86dfb0f3c5db8fccbc43070496de2fd03e0ddaf6001402ae7e1b8e7e0e9716a482fe055f992f30f7af027d08ffd80db3d199efc2ad0416b858cb549fe93aa7a604ec004f931a8b13452e0ba87229678f2c3d95589a63b5b377be03e34bd0381b4323ca9b9a09152ab5714c5f3e511962c16287a329fa21d3aafde3e45c14f6938e6c9f2bdac4ee2c3ea679bcd6bd44f68cbf9280f42dbd9cb500af7957f80dee40f2d67e6b4f50980822894e347dc839f2396b3415447f13ece7233383ad122c196a18f73d5573dfc73dc17482bdb63d24c7a6acdf92960cabcd3ebb3086225092831e17c573a6b4cabfc437b57ab0a6ccc4884e89b4d418978151bd90e65e2fdbae207bf748d969bc5ca2ce8398849864efdb19b0ac9f8fde728f0d59f5393ecb261281a007aa76d1702de6f1ebca6d69c1180076e185ea8058350a6fa5c3ea7aadf70c515a2637e6c3fc0e94110b9368178798983877e02d5bb97e1d71678637dd0cde17b22613d39e0dc1b12b8193f56ce76a0813329ec453ef3df54010ad038dbdad8b9f85167a410fbdeae79d88db70270e36c34321e01a57c71c2b13260434337817da184999be97d5338be94fa96dabb25dc531c9c84e73a074755def3d41639a6011d46a0a7af08af3ca43c57106ed23e59764f288739d263277ae2b619cb244e27996a8765ac1dc191a936f9dcc70c192b809380fcd7d8fd9ef17a782b2158d6007607422405e3828d06df6c11b82054911596a3c13ba2235b6ee1e1a3ec2c6e58c223847b2b22b373bc40b674773be36ac2b37ace3a2091b30e4cc0f79dd64c2d0d8696812921ddb51b53407d3e12c99c014899edefac303dc425f1a7ae938a44b4bc5852200806f68d491943f6a7f1938a66480f02f7a3b5cedabe2425919244e6ea8b0a0ce80e8001c431ea484c5219c3649f7301c3623ee877d8c564324431d278cf5e1fa8618ff41cd776a717a761bfe95a5d1a189fec10e261208086cc66da092d476d863acfbd377012d1bf31233a877cf7c0505d40cb5a09358500a80181095d6605fb2c6bb41359d6f465cbd3e06e36b871a7b9d85c9da2fe7fcb9b72dcad6079eadbf2dd8e034b542304162777bc829dc9a441cffa60698758d3e8404f4390933e0740136e7f5f4d9a21c28046e3a030a18376b12375a4651e08e13fe77a69c8f744d71f886bfdbfe5babe194c65963682dce2f683b86ef9143fb03b4453e0b8e40de25aba099eaf884147a1fa406be582ff1b0cf9ad46f51ea6d255e0f641fca6688e47989fd6284a266b72ab8e9aa1d83e3a0e9f2b804065018f0d0f8076817c52f76d14ca2406ad104c10d25dbb4db57b683da32ceb075d6a410a77eea5c60024a7d710f92ed33961c9cb67799c324df171b592668941b80c3e37789526bdd8cae3c43cd6f96e1db4955894b0286f38df43bacba61e0b136364fda441d1c82a43d9715930b8e8ccf24ccea1b3feaa88bb49ea6cd3801a52e93985edd66932f23f527fffcc20202451789f4bb13649e765a009c19b0205014c6b8db775d58b8347cae3e621ff54da6d7c0fc3a7815e643c14eee68718a6c0aee9d7476f45e67197d92301c9797f6527c9ad8282e98b2ccf025ee114f0e14e35f780fca46d061f85ffd81e0f72cbdbee6d562a3fb98d574d2a4c80b7ec3ee55c38084f71fa43888f3d5a1f8b5d28b5c46bc0dacde6967e575fa044f6e02d115a8ff5f6f4d5620e8c3a7a97488570cc466ad9ef10da399fc66d7119b8f589be598af7669dff791c1c098bab20e9bf23344e199f856001dc3d184eef4e6da89adab17c3de7e41d9f923e8e9d5c7c40ddf91c2cd7f40d55ed005a62f3c89257aec0f96c52e8feb081b806450be882ff67c868608bcda2de8e528e78624e14930a56ccdb819fd9da858e354615b087b6e7e285edfe525daf2d79d75f7ac0bd90f4568009dcf98bf6e75c3667783e4f190fc9a16937ead5475589c74af449c9a3bb04b0332157086d9d7122fe934a3bff689323e3b58ab4f95b7243489709e90ebcdbc5a26532bafa6f9dd9ebf695a40852ab44e20632eb652a6dc805193ccfbab6efdc297486b8064458c8cd31238a458769585b455b3d7a4abaa365d662eda9d4134350d12d98f6b8b941394498179658bcabe2e5f95b718ba862b032fc54ff49aab071529640fd587155ec5283c0d2538773221a34ea645b65185d77a4fa54cca5e053faa67366ef37a5f609d299fdb1639bc57173bfded12ef8602db6284ea2d77fc5949470963d76d865c5db6b977224a7d8afee9609883a17a9a93512d1434b8e948eb6acac3d9b34ff9c082812cef8b64887a62f9a1d51a93140784c224773c1253a8460d2fff173916f1a132b4063c953990e6bb3502eb2feaf9cac5e748b7d8b06dfc98aab42749ebcda013000296b43b8e221c0ed5637195a09ac024dbe2ad0f26a31dea2be016d277c3ee940a04d085960ace44871b4ddd8e24f19c1841d648c7beabe569f2d8f106af382c93789867e69a3902c448ef30b5e29c32017db8f50be6328f594e327ab2bdd2431a044e86e8a708d3d4d1ab9514da0d852336f0aacb4bd39dec5aa4f2c4cdefdfb53ad315ccdb5c9589d0b9ed0a81786630cb91d64456b3e069f8ae2039f7d24dcb40e83972adaff569a0ca296b29375ebe4afbb285ae55abdb721e01c9b3e2cb38c4a974253d0a460bac218de5c67d38ca343daf593025400964399003b3cc013bce67301b5ed501fec892c74bb33101034a88f3780f70e5da8c23e7a37764c78215b519d18fcf0f8c42b17f63d1b0ae4fa33e2f932ec9b6ecf2f6a4277123ee072be02225cbbcbf851324d38fff7707d8e0b02bc34e807439d59d48f5c75a0f4567c07087b268e353d191b3b0366ceafb0dd5b067b057bfcd5f0d98423078199d297216e172dd5d7c3e5ec4d8b56beba0a4c4dcc94319d76d6be4c3897d85c45a5bff6bfc8943e5018593c5bd586954b5997714d06f1dbd8e2b19768cd58d2a4be22cfc028e51fbe1727661cdbeab6b065ca1377cf530bdca1174fcdbb6752f208fbc0fb92c6ffc99ccd2f63ac3fd7d30f8ef76d3574f11475771297b59ef84a21cd335ea5cfa19f5134e87a069abe1df415a41344bd2a01bd488d97594e6289e94c7940259f1e4f0e6faeec4b5364d3c0dc07a2d121cb98efb3c9d7e26fd7eb7f5391155856f5510a3eff7312a0e41180cfdbaeaa97c4518c7c19aa2d9f3916f9295898d9588993f0a3f4e3d02a499e666a266f1c36e514198a30a1af8f14ea0c3ff79e99b130b92894cad07bbebd6009465674da9aa5ae47668e9ebd33d0f131472fb947efa6b354c8191cccd3c11457ce797d594616664bac0310b3e48aa6d88eb59f0fde3838b3b0dc415fe6da68cf89667fbc35a6ec8cdb7a24a22726c12fb2f843b55f94a2b4cafb24f76afcb94621fd05d2d84f73b1d5eb11df32373a9a32c94eea8ab05b91554ee6a28b174f0896c81150623b8f8ee40e91ddfc91d2c408a02c5ca4c9f9f015a818d07b19043c5030103aaf75abc799cfdcaf5de1b7bc2c83b2d5556844ebf44db1df3e1214c5d3b9408824636663d4edfefbd24bf0bf465e6e88a130474122b7118063dce96f0b655f0ebbcb3fd3344a500cd666532a7451944f5a9281ad2549b407350c83401a8699f68de041fc5a34f07dd080474cc202714252b1ae431b39f55ae889f9c5c59c75a744746512bf0a08fae64fec6865f473a938d9eb7fecc295277621d37034853917dfa9b10f869db71b8660505ba98a57d84ed2646a327411fa9fd7483ee2df0ed48283c77f8263d007cfaa72a6eabc7e0287132cf54eaa2f91ae943ae9a189563021766eb9f65e86b787513b0c02030dcf1d1f271f1e3b24d2f6d9e779dc06351bde4de4c4ee489e50b96fb2ee7a6e66d978f05736f7243e628c00f7beec9cfc82c1095468679a66f9fda1320be5e7c300dc9c1d1833d16fb0db731ab2c161a940bdfe3d81df985a9ba14b1f58b721c30d8549587b0519a413ff0d891f6d0388cdd9c9df79509d5444df7ddf96c3607a95d9e1a5fc0c1d0e02eb03672a676281b2b55c94991ecf196b0196739af77c8e20cd6ae33cc78aa5f77426b30f0c08554360bf532dc16d51aa0ca4aca75aa053ed9cdce22cd6277ef77a92aaf79fb50bf219c90c244cb1b35275cc43e5a97cc24933ca2421de66f283da2ce4ca662f13dd1a2ac75003053a84c339778c77e67fac490861fe14ff1a7b72443e9c9152342992bd6e328e5ad825b97be7ca62a6eda3956e3e084e8230d99d1e3c9fd834125ed07c51b89517b1ef6dbafb244898a9baf580eaea63cac3691d89cb6b369b9f044df4315a8d8bd426eccb195b0b983ba5e93c6347ce957cb03d4f493427443511057070a48af6f5ef77b001cb30fc546d05d8ee99a3a02a8fcd2572952ff3a6f75f24484651dbcc07df0d1193dde28a0cfd9b45216657eea52f1e1abaf59b4b895ebeff45727efb08cfa7b4ddc3b3185a8bda7fe02d4dd31de6307409e652bcf44f6da0f7d1c50bb19b1251521ad40ea9a2d99494bc3c6d69363f1a3871e49e6f7b23c1c710c63599c0d209af0a381b206bbbb3597d26871e691dce3b48ad0dba7b15f6ff7d1cce8ff161b7ee89b231dd6d3d6711246540596f081b0bd059079fc0f6a7d34a8c795c6131da33a93fbe67acc8131c28c557c97aa104c993f44ec0f37a40000102a7317bc330f0c03e5e6a1083c076524ee428e293074353be1a32756e1d9906b6aba1ad6e0973872d18458870dc14a95871b357cb72c066ab804e180b3c7a50329a34d8d2648c3991c09c8f5e9896d3182a5300fb2ce1562f220478b0fce03bac85b0ecbbae8fe3a85ada9e4f54ec2bcd2d15720a37cf4e3b7f4c108461ec861c0328385027826f904117766eb2aa715fdc53befc71341dbb1091eac019cbb996c8cf34229d9cfcd8882b06c72d9b77ad8664e5f9d0d83419b8df0d5c3aca4db7cd71ecafe8ad43668b2e490e824e08881e001b6b7b99ae8b779f444da454753ec51f7416e0f31994cb17587146d1bc2f73a79a2ed4fca291c54ba9ad8d9e61366fecd8a4b3d213252bfe6def1660baa200a077f282d49af0e6bd4a9b9b0974f9400ef4c9c47720118a31ce88e41ef31303eab117eca4b1a0f265377796cdda0dbf341d67079bdf8697ba7b3e3a3ec9eb7eb9b603f40d5a97a96aa7345bf74314fda0265a9b1b3fcacfe966d90d1c6062460594e0cead9c053647a38c28adef2bc32c93c77ab185f61a54d8ccd21bb3101c451a9098c3df72e5dc6b740468eae2b11cfbe317d269b933a7fb0cef2a1c903f107226ab5469278de272cec31b93d112dcc8df7967ff8f1fe3f1c2a0641391ef227dfc2c736ca499b623dce14824539be7f43594a9c88eaf9a0bfc142a888342c89b1d095b4068c52ea0c8e181c9c92816df017662e413f071b78eaffcfa321587f14b1cf0d5a6d8311904de097e2857d8801c046dec25a849f69af115b6c6e4d075bb0a82f23811444822fff60d757f4d5e218577bdc074f572ac234391c0d0ded050f6a93032e8090a64b5a1e8b6a6345758fbcf8f6ce8a5e8c40c33e02c268ab92ec947341156da473e7564483626b4f8321f903c8a5b80fa61e20af139294448be6d1a9a338ef211a85f79c286c01c219de61e73f5144f1d2d347f15c5683df22b38eac4049556a6321cc24cc493427f936cda8f01d618b45ad1c4bccfb949cc1142173d310fa4afc7560ed2a94f0016877f7fa172f728496ce2fd2ff1f81d0cbd479df0c5c8cb03428084cf6f69e131d4881bcb187439f7ed129c7d5334b043ed81a442027ffc897a610db8ab2fd2ff0d1419e4fd985ea0bfa7f729f01619d7d853dd20acc358ec96e5205c1345a62dc863469ea8201813f49f42b9478a738b70d4042a8545f74b64521334f75710d872bde82f0641dfe439d1ad766b032b6a848d1c4b515a4520493a172e333bb00faee9d727ad31685e9abec0b28bea2d986a4fc4dc92b3f3f358581d50446d352599d62c9821799013eeb3851d5c123a824eb5f510c23cfa95ac26bc1ddd19108fc475e512f73614821cfba54a54b1e79515af60a844437135325b79f850dd0f291af6529e75a1343d5dbfae4ec5f9e43a6dd386f2a3cdcbda2e94fe49397e19fd6760c0c54790d186f22529b41de0909c1259be79043bdb594feaafdf217cb0dd3d6eaeb7e679e73a9d512f3f21e130da537df5e868621c890f70e60f935823d326269bc1bb86ffbb44ce0498a81995c59e331e5386bf2b1557bca59cec02966488f92e06fe9c44193d8e22aef55c574317d80768e11f3fc97da2837bb7cd4598e1cea3d6023e202800d9e44c75062b0fee1b8e57a9efe8d6be8f4c67aed12ba10ad2a91ad2d8e49bb6e9a759c8a7a76a4f85e6e03e377cad1fb7e71839c67c8990da082f3769288e21d3935a4d6172dbab5b803df9ac1f8bae7fda72b6b424094213411d69bc2bdb214e3b22f80faef2e3ec1ebb236d3ba9e4bf8d6cf6166cba00795c5e52fe03c92687e42ef8a931f8364bdd6553952cbc7c733df5485602849dd4d740b2f95a4cfe4cb39f671f2a6e667f7773a3a7e3cc1621e32a13a7bb8ba4eb33d1a517965fafd353129afd9c47bfc94396f6339275ddf72e532c056a9a5608f58944abb90b6411fe179658bb6fe451bca357a39a1d34ea2a6dcd544626120f24367760d9ceea14e8f2463ac33e9e0f93241b23df6d3dfd587d6a158b3449a304871c3065246a7acb576b0fe85f0d6b967f5d61469c5fdb3b6bb9d0bade1d299bc4f8043c5311c1c07a109a63b4895b4bf16d42be66918b6bfee0a71e2bad3fe99bfee6cba9835aa5c5d1a41da9f15342324de0a8068532103487409b5a18a8f83ab40c4017298b6876c7dc8f2e04f5e6345e6d5a22a0afbbcde9fb9fee0d6e46eac3583940451f8a91a3169e66268bd2f1a0f4ed1dc20c266766842033c809e20960bfb8fc5080ffb07272678c933c36002deeac7f2cf7a0a8cad91433185188642994982e2e8eadb411ed6356e7093defd964ab485f60d4eaf1f918f9f8acc700a2fdd7c219f890ce139ddfbc97dbedb16d7dd65479de1b675bd047e16d031ff6f1c4c92b9f55f436aac34b7a8e1b1f13bcc0b1d8d0b5bd201022f49e73d0a2a998c66ea0aca45fd708c24a65efdd8428260fe2f7ddf6420a1d5acd3090f85bdf82be02d16eb7e5bb6b9ec7b0b0d6ca71705312c9b3e7aba963bf734bc24169c0980441f088909d6112a357f2f5fd36f8172e06a84bf0b5924410abe92f39f0b0c81b718a146b3c25cf19f92fe2f52cc9c356edeee796a3ffd267561f6217fb69a401e4de6529112674137c15fa025e4562deea954733d0c8af7803fdd262cbb27852cda05ab7eff4afaec5e2f78ee2d6466a06b0073cc366d55e1b89a6fce54b60c1248a04509e11e1b893de2a8640b517c0267848def571d30fbe4e80447ed3192752c9b9c27b4e47a31cc351b099bf20e2a0ff85f741abe997e5b49d54237433e23d90c62f049c4becf4b6cd53b9ca7ec50ca4ff6f47348815952a849eb1db1e072a84a5714d7b2f94a50aef71548aa0be85bb1d2f6e1dcab2c91d20612ed86f852474a7d61846b46db582bf901489bfc3fb1bc37ff1fcc5d28f28804702c90a61067cb34d7905aa5f45abcc319f307e478ed407abc7256837e77e9fb366ef038744a6a5a1d7efacaf7e0ae0d900ebe99f4874c9bde6f6a6b128d9082c88a105853e81eedeb60826acb4f9c110f52f3796d19a4ba573419fcdd457c878d69004dfed498d4cfe66241893e871fa666af335d3799311b676e185dcf8ec8e6c6a304cc214eb161805af586d7c7b3765a1eb27288a4b5a53b21d5876180575b894c91799691164b5ef13f881346e7ddd90718fb56bb814bc332138fe8feaf0c64b903e279c6cb43438ce93547287d6cc922f49c569e4dfd21779985286da61a26233bbffdb492cfcdb8714b8625f08cea9f9ebe64ae6a5e65b7de87a2814317fe48c699c2935fdd091c1cfcc7c18e8980c577f2cc031484d53eff68772201ad6320f959c6900dfc3b3aca986e2e1dd05ad0587166c6722f84e88df007e073b92c3d1b03e122dfee2a19030c3f32bae4178d1feb4ea636abcfb5606efeb1c757846de419f96e760fab12708ac6f9697739289639f5d4429af1917408c63329a6d8d612ae5292994461f1038baa2c2fa6c7edb57504049101804d6d7e5d141e2dad796089a3f021b1527bd998a5dcf6c8d8a1d69d013b4aef4991a0a7b653bea2bedc4d9bed1cc64e82f3fdd94d7a6f04ac2380d19d155dcdde4efc94c6ac1c1cb8299f67a38f1e37d91b01cded1db8a0420e3c8193a63bfa201ec93c4fd50ceda112260933b7d1877da63a04433963ace92861938c9730da3a93844707b7960647376f0aec2a48f6c9bbcdea6e089f187f56c4d1094b9a29afaac3234b0a5547d1d3fc3391702fd1edd598596a266cc6f03935bf164eeaa14f9f1b94306367c15b862dc7b7b9db7b70f7f689b3ffa1b2d94e61ba7f247e1d4727f7102d5a2177baae30c49bf3b0f5e3278c295467f2d6586dcfbf5d23d01678a608105aa2c22c35d950ab848b0b481a09498e3f2cc3debc3d28541912f2372c922923a4772e3ec792cad606bc659dadb6752afef1bd39d9179a7b69b56bed738cde19aef7ab853e82dd130b4da4a5d4773af0b1f597a61ddba698fe020d2c1020e6aa76ce9b4311880896a9ca21ad37becca538a75cc9a221d5645995914521ec3b9ceaf2c71f0c778234ad56eda1b2dfe5f195fd33a43a64bf694c2550c58c19c859a0526ddfd1b7e06d46fac832dce4c9bc20c2906b2e1274d409fb21107f82504a16b7af7fc7823a714e4cf9a75744a2385e354f4e72cabaf282629bcd4830cff2d13e767ad259f0d8a9b8cfa54fd80d53b3526c9200a5240b2532cd530ea7fe15ffbcc3d1419a8165dad07aea128377a5959087a895ee15dbb180b106a061fde77c605ade30b6cf49305ba295f84771abeb6c9e9b21a89a6d687d5464198153075e2222d5a5bd60d961e2505f69c66ade5ce5bd4797340cd8fbff1c7c675986a710f9827ac412dc919c412480c8c5d3a0849087d7dc8066dd30a97b6b3696ac3efec487c15b8b6674c0f9dc045ea59dd858d7023dfe89c6e77fa75bb1b788f71de43c9c592e7df481377cd57178336db29e3799b575ccab8da35d750af0394cb861f5c0fea7c35ffb2856a7987e403cef5291b81291e4b276ad406e8116d047510e01239d1aa259c262f7cbc3c0838994e22639c32df3fb505cdba612f616906aa7050338e110c576b9a1624acf719e2655162a98764cde73d243e900c76b853d8d3e79bd153600ba861b1140e3598d1cc261c83ff84e60eac52540855eea7d42513103736437acd51af5f5ee2e6aec6e593c4683f63f25e44e1b71f24e89d444b375af24f7125f1dd567cca53cdb225defb432225c9b59bac3d52033922c4fe54c6354810ef867da3c21598ac4368ec4512a34c5e8c3231a3030b5482098202bd8104e93041d7e1afabf06c7d660b1ec6d60e223da7a06f220f743d85ecac561d1f078efa541ea506d0eb13457921529f43b362210faf1e15377f503e4ad76ff7e9c545d2943128f9b580f1ce06cf21ee031a23c2924539a2e1db6dd04500658378479aec40556e4524612b5ff4f7e06aa9e90833086be90341627a720f0223dd0185442790668af63fda746bdb58bc032e4c503e734c6691747d345adc049688f98eb0895d4dd8887f18161eccff77a2b2f8bf88b8cde2e0e6e701f747e09665fd7891cef7f88f949872a5352d87dd4d2389d4efc5e7aaf21bb0d73f4d5596e7c4ba24a7535ae65abc1cb507faea8dfab54ab0682d8a8244e6d56a98240d39d6039480d5945cfa3ebf67e77abd16c2409e4d9ee3437e5db0047c019a32f415fb011ea28c34284495da0a3b0c21918ed7db2714bcf308e134b52624866ef31a3742a6670d10f160b148f3fb0933ab1630ae9b99340b4c56c5bd12589282d2ccb21106826a193a6f07149cc39e05ca14b283617648091d3c331e8e65783961e64d9ff0451bb834448fc2078eccd26ff83db6bf2974b810d6c0b52eac47b2568035d76f614a959cbaf03c5427dfcfc829e418014cfc897f62cf676e4e9f000ff8031b2aed75a5833bb44581ec6f2fd4d1445ba8ca74d53bda8f330bb8b9f45ac90d8c5fafe8b1a2f4e0c62202ad71c289c6aa3ab443153b9986c1516bc70e9ba9eb35fe01927d43d849b7cb9af7d29cc7d5ee984658756b62e41edc5937f5067eb1f9e439f45d928b1bb232022a530b08faf533cc0a79b255828987e1fd65b02e8cd0df1536524e766f7445528ac0dcc8c5d49119a3524397f862ae80a179b4fa605321ec57bcf5a54d33ee63037db629b1327ae50f603668ce143471b901ae43c1b671e61f040abab92cb0b87dd46d276ec0a09937ec698ed9e4320d3b9c1bec85c03fd60855aaeffb189e5d6c2d4a9af0f5772e858f59b7b20c8415bd2b568a3703c32e0a04bf2d90b6b849eff15469e708efbe2032aab0582dfd3e592725f5acc1801fef59e73e51fd5556e55f231fe32b933273334400a357791d2a83c8c629ba3407a88fc1de88ad5deb715381a227f865980246f99e6d6b4aa4c9e733541aa1e5f524c7eb44a2798fb11d9e7caeaf2af33d76e0fdfa2cef37a5aeef086c5f3986f9ccb64e4a63763d39677470524288ed79a63913e89c187826cfb1158fc29b2ed35a4bea3cb8f7039359b1fd67dc1be0470b97b8f83e704ec966aa127b09456f34e159a799d91755c9d6bb7e4eda02179626f884bf16ab1f14f278c28b648e167b2d32ef0715fbf4dd95508099ff39c371d509b42e5c573dc68742d4e577902d8f2ca3459f220f716b199bd54fbe9c0d5dd7173e6bc919c32f4191dd1cc2e971932591822cfc14b2726d2e1d45436f9cd8ccbaddd971895bca5e793ec16cc633bbc1029d42d03415bd20f41022ecd41f6aa86a3528a7fbf2eade57a427f30f4adf811637c2b2c8df97a3856017660ed7e4b7a3cf6cbcfdbb6dc34604e1b5d057a69bdc8942553703c9c77c3a56a6f79c55d639be4b8fe26adeeea9205eb6ebe39db71739705fc7133d08228a17de9534c8746c4bd0308b49a214923627f04a10856cebe73983703c9f9d42bca5cc0f33a48120417078fe46d734562b82d124f35f7caa4806282840207e667a92ff27813466a0c82360b25682fcfb7c2af5f5ffc85fe416c5d3c5209d3c31752f286ce92b528ef0e3d48244189c05caf8555aff89612b5caad962c99ff174c1ae6bf1066cda6e86ee7b91e055a237eaa7338ca14061ef8d275df6d141c813351d5d403c57c8d0300eb3a3b2f039e1ede625716ca3e2308d9fc5b2e8152d6c7f6fe0f90db421ca68b36dccb2c69a288593daccfdd5a9e959fc0f324d47c0b2c5a2603271a1071588100d1e7abe71f11ec55ca836fa265d052a4760e59a81c3a371ecb58dab87a2eb1219a8eb1e36bb90b1bef75ee3bdfd7f0d02b2de740871ba437d82930c4823a068cff3eaa1c8baaf06ede5107f2f71da02058351e2a5d859063df976095f3c021683e3850be68e539cadbd8bcdfd477b5daeffe449f9936fbb9221f57e124dc20862b98e766ebf444e8ed6c148518044006d01d44fbc0e7101195d3910b703350a6bf15f417939289c3835a1315d4062efdca67feae03b387240ac9f47c22b5e2ed6605d4a1e4e16b5ff47e9d10b99c25f0fe32f45abda8ca4084bec5a10367f891c5698726ecc30bb07ee9a6409eeef05728114cc69bc1b3fb32240e5e97f827b8bd9f45e93829ff4affa01d02551db816994e78ae68a89012e984a2c920f5c378bc8750e5f09f4f0aacca6c5d1c682c49ccce0a3db0ab7f77963a202558ca05b58d1be68b5661ef847314d5676c9b571213bc0c2669222523424c5cc8b6877c31c8bf65abded3df15bca86b80a37aee1c6a203982dffa9331a57b88f2e14ee98986ada5873011d47479a69a56fe50acf042913518ba4377c0b1bddc9864a3650116f46cd62c5b8beb82ac7557442b106ae186a56098a00f1bc89e7a3501468ea561f6e7a44b1fd1d105341b332f507eb62d91270846fea3bcc0a7818a1f23c80fe595a4ee86fcfb18602ea0098fef67e692c454d4c05922dc7cfd6b7e0821613f5ab5ebc566a745e487d633b9e6d0499a70ede3fa4f3976d56e77300ae680f1e60829d6e8c640830d95a93ad7a282d07b3c4b2cf9af1e614c575c62921edfb92e54ee8654eec2efdf01123842d46edd2a905bfedae838366957217a1aa6e57025c717a55e9421344505ca6ac436b50582048aa3f5ad51d5c72f64ec3de5dd3ed03fe929a1b78b766a8faaa1148c67a8a4bae92d4f2aec89292319ae4c97c10b73d275e61cafc61bb9faa427f88d6c60564149debcbc46539d628e38865eea22a21d9a7db12ee2bc48d0d9d00044d11559012a5f610efa4c0194bb89dbc132efc5faf26a55f0c81a734af48aaba83fbb42e65b0ef620b0fcc9b73e1adb34194082974baadc111044ae30e00f30ecaf7d062fa914a81322c32ee4f92a30d998a2043f4f632cac0f6f744f7b3b9cbd319ebcf58ec58de58874c1ef08b49abb714a36878a3eedc01d90c909926ee6feac003bc8e6956b1e5a137388b88e4925ced6beacba80cf99f185efdd55b2a910e70355df1ce6573a0e928f524a53f129f4f5fa7ae6bc6d3e7db35f92b557c6b768689fd7d56ea4613d8f3e396195c67394789cda522992e1b77750c345b444698583978419ad592bb0af646dacd955f0452a7e0999b8cc3e436b782102b4a685cfa72c7a940506e80b6b9caf48b887da6bb192c20228a63a603164a10c28e7e47c083fafebe495806ae5f0767512172c5cbfd49499d8e8453725dae3ae78f7a8f116f89eaaa19e017876a72ece8cb8f965d6278d38d61eccd77b43e44b1aa9b6c4a2e6be795c2e4cdda4515954dfc4cbf3683f4b222fd8c0ef11c3ecbdd8c9235e7615620f1e69b0b98dabdbeb64c765196b8857ba23f3260445d620c44ff82449302f11a202c27c25cc983e6bde417347784fa47b10d111e803fae1a3c84e73ae739525fe93989a1be0e2c3c97bb7990df3f119e8d298cfd61836a6a3717c13c1e7f03fec2a8d5c8c4dc57df9a300ff19fa66dc1e80161b3d56917817f276d8a6c4d06ae281f86038d7eefe5692328ce944b816f2a2e19f53cba6a8295d20b2022402b49750e87788bdc2e216be3651d025c91aef40314ef6410e53a11210c4215629bd5c37b3d1567589ce2fb55b3c56f0b3b592b4bf8d10295342a31a8d23f023182ed573979ee90dabb7b49aa306f57d326ef0f701667c8a46d58ab4f17bc10d738e126081d0179d271a19a1a0bc81f1a4948744a7ec557659d18d3fb0f04b2aa8743464f6af12e01eb223b182df2a6646876f47187dd90feaa1c86613d39a8daadeb9256cb376297bec9068c2342c93e6ba9de5b100c916aae124bd0feaf924c64031ef234e0012dd9fbeadf85093ba949330625f6e3c64510821d155edcf5b21a83cff19b16444b0502430c8f001d7adc640402e91ec7c07f2c3c66d55b2ba9229cd708da97153402c88977207eb4c0befd01de4aba2f9b411fb5ba9a1dc673a0157c79a2841e0ee58e9209e7959d8848966d3b320728936625c300849b387316490f1ac894a611be43f118de9735734315f79fdbae33afc5d413c6fa7fc2ea48993dfd7470eb260e420cc3167c2926fa766c7132c24b0bfb9b9915ba7135b038f6ebb7a44c1371fe60128951c625c68d04604e6f07a783acdfe2773fd6779bda63d1d0c9e8276ca93c1c5c758c4017d72472224b2a299d649e7203032c8b7576051a64a919c1696bd1a4d0ce781cfc15633491eaa3cf85e7e1c72acc03255c8c9780f530e0e6c329d230f93650604c1f1a1904e39c939c6f9d2dcc2c9b139b488686cf415bd4d52d33fec9a7d14c1513c8fac032e2b4f7405907bc1baed73570b67779696834af857f44a779119add231a7fd1b3c28d97cb3ab326d6b501387db852e645d19a52b138263b5f24c9e905614b6975efef7be8665a7b77cc9edc9d2fbe10dc76e114072e908d5ec24ed79875ae15184c5ff5824dd1e23f317542876af44160ace8a2b76972133f853379eabc8459d29864f43ed5a3e740bb7d6ad03d6f56816e2e8b8d11d26f3704007377c73c82c01a5965fd8bc15d834c9ddd9c00cfb96aaa4964fd4735d5ad383d240d92f4629937caf481230600c41c99ba32c554d57f8ea2a1a28fc4e9ea2f2d89d12d5872dc8e5ca2a348e86d808d0fa23e039e1073186f8b6f5cff14205c55ea8c078adeb47d151f0eee00821d3fb3392790336da17576621f931c1b2fea6a1b199d3e88b4365981dddaf4391f8dddd8eff55c8a2133456892a5dfc9dd27fb192d0cfb5c39897e4e257ff2aa2050e2b6a89cf38b8fd692f3d97502866af46b54fb270abe6d5c90bb730f33f9dd200c8c14f0dd829aab3416563cde7b4eb13f3a5bc2809d0e076e4862fe9132c81537a0e7599451d44ad14cda079eb73bee4e1986e8cdd41f07140d1f8c71b853775a537239943c179449cddfa650abffc3865509b113825978c33d95992972caf74bc46e0ae0eae3079389ce7b7ef212ad3c638b7968e8421540a2add26b7319494c0e1587f706c9f801d9ce2d2eadb789e4d88c5655c9a4a55393ce2935f7999ab1869716887b9f1a408fd0faef3db07cd972a9ad8ef4ee9682b49d5571f1f6fd7e343489f758fe83d19d7a4185c26978bdfeff37e9847df8bafc4cad3ba3eae22eb7b05570c04564a195f8e0ca82eadefdc3c9dce37699b21e3b0d57e5970c5e67529cd5a3ed5cf1b113196f05acd9b686764b8b76cbf38ef9f9386bca6634e734bf470070ae3e0b0facaca1efcfafb8b213ec11e6df22b70c0e7da3ca1f144870c8ec76fad17281dc72ee820795a6843c09164d457dbf9ce8cda1ea501d25ae16213d0b369062d7cefa295856b0700a51f2aab03dc6363230eb03c55e37d6f213d5e9304f4d16786ecfaee45e65099c3834b9165bbfdcf879f9d31017e3f19a39d4079a59f304518dd752250dcf759c40424674e264cb630c96dd33ad9fc477cf7a5bc910aa1afbabb2134d7c6925ca3f4bbfc8c8f940d9a6e2cde22f84b12148b363951e6566c7ad3cd59520b03522a22de90b4626a88b8bc2208d95112fa644e5a3fe472fce4b3b603f31e83da081c5f114fcaa03d258243b4884c2f40a1a21bbd8168cde6f02e3c499dcd2fd2bed97bb050d054228de5ca2270a09280f5022e3ead48b5b2f202181fb1f34e132ba143adf4a9174dc9a77974d173dabdedbb0c2542539053a5a8260e84f5a1bc18b951a881094d549b57fcfd81d4ac5e0b295b299ba906af0d6b1b784d6df94fe02822829b475f1201d66d3f035149b5500877bb59afeecddce2401ff24a198a3582ac78b25cd21e237773486c1133e6f18f3a06f7b88dc48a6b588e5ad4fb2dd9b7568d47728b17c62f3963d4762203438a804d83d0e98f66158780be5f92c500fc2bc92a1840871ac88d35b8b1c35183ae2853e9e6938c99b37e3b4a77a17505129ef27c0550993d0b0e9286faff84916d6201d4e00ca32e7f6460aab5220a32fb9b1e01f05897864c87c259f561b5b0bb35b748fc07fc5ce2c5eb0ca0f8b3b976d2e4f38ef171bf404054dedccdc57ad1f9ef0ecc23fb1ff6164da835b2f042c36f24f0bcb0d0c4de64ddbd2c0e838e3d1be21d498538804b70fc28ffb07e1bd70be7cebd760be38174c682440a96cc0637ea6d19179979683316c3801f101eb3a8fe30161b910b2c8a9b8eb407e3382a17e3074bbb8c4551ce2881cf8f42d22e49ef36d27239bee48b8d7748ecc38ff89c9b1ac758c12ffdf24957e5c66cafaa637847e21fffa99ccd96d88bf16d91bae9d72d616bafc00ed66f9f7aea38c06580d3c38d19a4aecd3e1eef13b50cbafba0a5ac5919ae47b3ed65002640f2ace1f97829df419152ff1e9c52559113a530b3ca7dacfc9d6770487ad7a64d5cc80cfefceaaee56e7117b59e639074b5efa12d4c07068368bc6c74d3980678a420767a03b5f198b85c80ab659e48ec177cb2fd3d0fbf52694df424a1ac62ad6f4c1a9c2bd4330e9ebd607beb659cfaeb1580a41dcc7cca12e353e850bb6a1542babd162ed4439d5aee7119986b0f1ccdb8ae523854538a3ef1a19086b2416f7a9c8fc34a79bd8e015c6c968f1a0519d22824c5746a292316a805a18f345b450b371c3c7553d7d1f1fa126099abee4ece2abfd623a941aeb8b85ed3999715191ea10d3a395b34dc1fbd04c50ca669e1e2972fc5c88ced0f584469806d537d9edefa462c8f00488c42d0352d149c066a43ae23b714626cbda585c884ffe32f107118f2eaf4508ceda080e51fdf5e14a6580e2c2e3c370fd129c8e2d1f0abf12d413fe69f1eeaeef02ef6211e6140520756d328c2d818611be094fb0d3f84a1f21059998143d30fedb14ce4e362bf1f4ac9ef9b13411229e834bf83c9b3ab0265db2cd9100a0d31a130147ab40ca8c71ad5ce73940604066b4cc1db61361ca4a91df98aa5cff67f20225a3b27a28966a7df8f3ebbd50393b241c17cd4287fda800e0f6455bc341e13cacab22702a625278ff6b27711d38c256847221c31b385932aab9d987e89f12d821ce4696d37ab4de4a0ea376c28848e0499f5e8725203fde8f74cde4dd38506c8064a3df7bbbd11386a272efe5f079649071756c7ea1fdb6899442ea9d26faf393cc95654d5a62928c781bf54a883bb753ddab3072000cf98ca0cf05349c972ad2b998dee8a55447a5fa32771ecce8ab35c7981523c10ec901e6d4bfa6141a0bda13c7722a7bdff463233eaa5c6b86a248841947a51824289b6d981bc7c4f95b5b6862a7c4d866dc8010a3730b6975b26c0602e326d87529e3bb30cfa090197cd474fbdd7c82a46a07fa4570cb04cec5524b98f17dc04a195c3556c42f575df5466df11906a0bbf444a1a88a62d939e3ffa6a5021c03591c1aa10fbd1a666ec48ef80aadc96aff621eeab6b3d294ce65da415b7d69e19b673427981da31cf79a5731ae69b67115a2bc7b56d821d91735f5baff1932811e673311be44d8c1d3bec8ec9f336ab3b7139fdaa305d4c3b67ae3e6b271aad4a490b542ff7c36b5e27695ef8f296afd977e962105f217b02d77d803412047724ecfce3e4330ca3e6779d103349e7d55b8724ac44c18c949c15a9839d2c100574ff4e1b12c88e8f56cae135f2319b09f96f43f3c93b516ecb346be06afc6dc5283580b4bf7e4062178a7937d1dd5f07e634e8e1a0ed9b8e487bec96e2c1084e9fe0fb1d7a816b898df27dcf165b12bc128a65b9a2ded9160fbf6965557526669502a19d1a11bbc6e2f626235e921b6e64c944dfacd9b41eb4cade24beebc29e3b09fde408cd1f3c20d8681c1d28e6d9141291c823bbbcabc28f3957e4df5e3064753f887809a6f55431b6a32838d06bc46de78382dba5178bf977a96a31402572a7fa93a56c70bce7cebcce2c3d62d291c463162b900c4f44db5fe39e0158c36067d2bca902c30a746328a7269e080b05a33fcb2f62f5bc88355d35658f8d90dad6bc730ede8493d26622417457570caa3675ba969b02b11cee858343d176ccb6f4439da38ff95500a69eb87a0a6fb4516963cc27feb2f388ae4cf64154fd33d1621bd54ad6e52fe9a3fd419e30ac8fcc27a293f93514ac173d72f58affbc2b71ffbecc99226eb8b11f34dd9f784de0212962b6ae8d88343d2d1198102f5c3a8e5cdc294dd39b9a8a78b909885b421f712d0ed98b2f5a3c2edc2dd1f3e7f5638c4b240d100efbef746f6b7ab07984ac44c20c8eeaab0e93aa9822ee0159a8d61efb4fafa55ec88c37e4d3a63bd60470029fab94d085fc3a6d544b53fac1ef69f709ca7d125eff8678a8eccfb45903fa3d72cf97a82ce307ba2aa9c951dd870509b2ac22ce6d725b2555ad4487d4d64e7451bfa354648544e08bfdde9440df66364c63849a52a3753ee6dd5a3dd02f6cfeef27a7e4ca77c0fe438dc9448987aba129e98f1a38d21b75f64e00d1a1f2c8b2a58c65159f0c44b403572be64ff6450eb8d5b6d1f5971ef37090a97fb6c02525d1d08581a2856a9bc8d1e58cd4c19e49784e0beca1f639b15ddc18abb932d2fdd8e3118510eb1df78f6ed5a9eb35eff5c33da948fcca4023f9de955e4b64917f8426e24aef2a7245f589fa9261c1bb96bbcf1f465b2f7a6cc48e51561f41e5457258aa6d04abb8e889c0379fbba05db6a80dce9203a7666ccd4c12e6a255ccc4ae3a6068536841b8e973e82d32d9d90be09e38690ad6d22e2cd869567b95afd7bbfa31105e4b51b51b575e8bfc612260de37d96aaa71e563bdfbf4a10426e8070b83093b028a45b8668f144a481f7e522f8c8f0e26c4674365789cee1af99e5a8e0eb3160398b68293c3e7620670adf5bfe8094df78047a31dc8c5dd90d8858b10c4f232582d6e981c3cb3e6575bd29e1c93b90eb2ff132a9da481b5431a19ab68230d1a51e9aeef367f97bb1f7815b5d21ff08c4b4b10507a902628ef1733a49db42fdc8d80754ccffa040af2afca9737c43efa0f3dcc16281de6cfb51c1d02040bc17b5e1d46a28d00de1926fee570a175f6254f9c1873ac2d52ff38c46c5d5ff6deb5abea04cd172c78ac292a3f6f94a76e8a6edc182972c1baf758a36d8319e2d71477694c97086777d8d8cb8fe00b88ea99dadf7627b7114cdc7cf53327bc7f6e999f6044bdab04e42ef33ae96b107b86cea3f5e0a010dc6f9caf2cb1c090c371c4797ae573cdbc2d91e749af86154ecb0153ae2191e1e25c2a59e82be0dacf0281177ce41cf1f7693ccdd672a41b3f7dc530b357409c9a6868ca2675c7184ea80724a9c64f47e7981e8599a43da34ce42bdf81e45d34bb441f6b0b5dd64a178ff5fde369caaee16c332bbd736dc5ff9ee70cb238b14341e1af0c34d5d91040172ed7f02c289f77d2dcff5d71be68e227253d2626f581d3237db0580bf99d9ca879e763bed00668ef9d910f9b6a763e2bb5dec296e29aabb13268b7b23d485d85cf2716167e097e526808cb5c568b55513b71f853a0136409783767c83113a8f4cd52f23b7f85a0ba7614bb8f9865cfcd6ddc26daeca43f73168acf34306c3737696c1d59c9ac241f9dc93a53788c62cf7d5d74b1532b6b260a92d6bd3aa0bedc8aee0d93c8e1bbcce2b4737316639278322dd8f8bb57f4ea4ecd49fcbf06ec506fcb8761d1b09779993b725c5cf16460e6d2ae7c4edd3d428b747061bbf87c44e907e5ecb365d9a883436cc02aceed19f5725a572e40b848e463e24a191fc69b41d187eb7c937ec7412680565ad0d0478da6d28b99bcb36849ed42fd57c1e9fcab88ce439fed889f30f154facc1fc40335af96807b784dfbeb1278926db5834334c886b3964584000644ec38a9601fd88b1adb488897e19cd49695185c8111ac39fcb3d3261a2288fb1d5d8e4bad42ec6e955f7f1d831040c4c8a0477946853b5e79309812575afe88d723185233634933f080221a6d806248b30cbafa182ab8c53188099a152ba361eed4ddafd6fa2edbe040879063121219a959b69363f183bb4149d2a92543398cc72f4879c6afef27caaec99e1904e20515afc720351ccd66dd18bce81afa69c839b63d843732798596930f74a6aef9b770ad74c5ea5285ba489defcf3373708cb5c04abce12b1d3edd195e764cce60f1f7ff2dbfbb21fb61d7f6d379da756c32eba9c1771a6d8c96e4cabb95bca20ea992028bf10adcbffb3340fe624e5927943c29d8bf06c281bcf519d281e02c5650fb03278223d8d11b71958c713d7b13d7637f7642b44dd2f1501bdeca1f6c177be7758e743e7d3276b4b460137eed010085813587eb739ce088210ad0c0e4e1d28a4847ad8b0fa7a8796a2e05a6c344e8519b8747220f4ab61a09c5d5b4cec430394641eb6c615372b94cba3d2b0c021008a98654c3abc27f3a3a7f85da0f0f9ab6773d37fc0ed45c6ad3aa7a339f40d4c0b1ac4193a0f367c9331842930f70fefb3179c7fa973a0e1184c05d403e0be0d406ea03b5a036f2c3da21ce15683584b51c1338303a2f86fb9f829afe9ef0b5d3c444f855be087d478e047a744324b923b141dc0256a7100ffeb08fd7a3dcb0eb9332e3a65d634b9c5dd99e5d09a47dab94dc6ee721599c389eafd59fe38bfc7ee3ece1a7ce3fb87e625aab09a29b0958cb58ba814f3242c544e56d8a612f9f8ddb027be05d12fd61c8eb39a43217d31cbf961f8353f77e03b1f4f65d9fd6f7a6982d024fd152c19e13d7dbffa85880abaf77c6b92b0a455c92dcd46769863a139158514e69be6f4ec9d4f15418fe5cb35b7d3e6ab0202719ab99276bf2d9b671476dd435d38d901b1ed2835eb06cd987cd4a54b8b20700bb52a090df4dd7defe54ce2c6c7820a5810018b0a0c33f54e4595405c21689dacc9fff41f9e415d9ff0bec899456aaad9111f4eb0644017b3393e50ec80936a545c32595c8d9fb87f121fe699304222d0df0b0e7afb576a1c98b18224cdda572000bb9855f229ad4e1d69a1da03fc73a5c5b22dd8dc529318ce2b0be58c9aa4110a3f97f309f36e47f431a6a654e59ff9e9c50e0e4f3b41a0b2393a7d51329dbf8e06bf3012846bc1894917965693643a563e9ef2f324ee84c40c752a64f6dbc4fbb43e361b09ea8d03423a1a5de3d9a37bbfc5d18ff2eb1f4c457539dc39b1c5a41d9ccde92b751840a3ef246ee5afe5a11cb933fbbd79666e03e74b0059e2c9e299c329bbb4bb7d26e5a586fd92fe7b89be2065ee2b6fb6985737c23140167220221162ded87aeed9cda31b659122b32ce5fe8a9e2eadf29613b250e388b0ea8d714f03a56a27166c7c6c0de2c4ce188bd2265a269b359a1862324e6edab5d8d908ef09c784831c0d405417c3d3e6b39ddb8771b8414f5331bd6f61bc3e92e4e13a8140f0e821d34042056670e34d95622bbb315308f24a18a514d17ec89f9c71cd29269ffbb507b1a8b74bc5f54f774d266dec772857f410bb441beb2cefaa153a7eeede500e9c58f2f4a543aa85a0d7633e3b55c43f913eeb57930c8376cb3e87a725632e110acc5e06ade9911af03d2f3ed3122a01f245955a4bfba09b522bb916f03a1856f34332596c6f6b267e16173b1a807cc7473627169b26721c58edb70816a8e418529d0eb5aa697ca0a34bbcae001b33a6d81dcfb911dae56672edd0a0c047970ceef5b09b4d86790ad364040a346c6511fd1d34413c627f61d67fccecf594f67d37dc3700887086f1ca3ce3a186d4d16ce98c25ed21f9d2185e84a3a9c38e3d18250b20f4d39183c8a0c43a1bc045c5082ada8d3487095596cb2f18e731a66c40295afe37b404e7c2ae03b210c384e2f7bc2eff47a141fee06d0f4a9145d585aec9b1000edcd3c148c447a640fc116f87827c256b34351f1593e3bd73e8b498ae70f95a55066d5565192af62d44a81524c443355efbcdce85da61771b6bcec97bd55fa3bd8381b077e42f540aa9dbfc2a294ff055b4095c5a00c88ab8ac0507e78833edcc5d06d6c3dd7522c8a63703846469a5e25a1383cee5027342804c47d87f5aa08f8e91e40bafb9e17be5808cd31f32e2c0290de8c4bdfd3535e8122c1a15358b3d1d3e57f8e1604a9595c3aae453f4865f552d3a58d811b8b6ac1a92c1c1f2d53fce196c14d16664c4f51a2c7e43308811c1b0de64af108babed49c9b5013fe805dc0e8341b8c855be0343959284e33fd04f62077aff2ce1df90113f394ba96ea23e65fc49910618def8596d5a4c7d6affe4cf1e6508338147d6c0b54306644ea79cd44ae15ac909dfa271b60e33fad1aecf2d35859461ff681f748e72758714377cdfdf8ac529228cfb99987a84ce86fbdf27a145c67afa7db6e97c0e550b247ccf3d6db083b28091c6444a91c748542492d91941245a324066332edab2c79ed0810abb7e1f420a8f196e1ec46fa24c168d918f93dd588f991401c165fc69887c4dbc5a940e3edbdb4aa263bbe5827f8ad666f9d42109c94d5407010086f8cc876d283b603c02e830b595d75da865e0939ac78ae135556b58a0692ad1f159525ab60a4a44ddd0c4035c7c24107d7b4ca8e677a9257463dc9a2a124a40d3624c0351f67abc0d24222aff0917a153d57efb6de4ceacc1e2556b430cd069e8ce53b9d82fe79e73e474166ee2847a47ef9a42ceebf18470d7f5accf1385501b4db9fc86d1cea402639703e3ff5001a4679ebf31fe287b767defe7c67dc49e4525a0599c55fe4764a11fea7d134962aef2d7591639d1f0e1e6d8a4574eb3e0abeae1f8c51076a6185e8e57611ae35c96162c87cc260939676510894ff5fb3afc1e87e9ae014905bc79a6376f844821ed064eff18b8a8d9acab0abd013c903878ffb52e0386fc8117facb307acc3327a9725ae4a6548c3091843b5c4deca7951afa23bd805417c30f9385b3dfb9896fe421c0ea1c088346caf75430c16b89deae8a859fdc65477165e08ff1dc2908e58aade3bfa23373d6d2e5345a765c97651f26ce5cff161c56dd57be87bf0e74429bb4f4fe332ba669972add7c5af1f60c5ac2b936cb18c6732cc10d9d5c3c4d594d1a3aaf98f4b299e15c57799ab3fff10be58925ba1a3761b2b79309f2b6c2b91f77bd6ddd1d4463a25be6dec4d0f7990c29b14411e25ce39162a3490d4435e078647cd506869bedf48989749a4249691b8357825c241a12aa614fafcee5db4330309f83aef53e63d176fcfd61028afc8b4f1c5b28cb9cf74816dce6298d69aca7f8f0920d0ecc8d9aeb2047fd1ce6c0efe0a4fe46759118d5c99561b92ccf676a678ffdb1b96657d5e0ef7c4f8faa7200ca818accb152ffb6931ef8bfcc29368057848d0c5204f281b606f84493d2a287133ba4f1fd511c324e431def4ec66a4fd059ab944b73a3f5e998b8aeb57506aa130199cc03062e644e526250a2b0f06dba9f9ee84d665d8a95483f7268b43d34ffaa33f91f4d468c0a450c86c16b85c6c0ef8888edc7e9cdc9d039017945bcf343d81d89a8a912a5bee511d752a9c33f9f5b689b87ce84c04e23c72d28087638715fd93e552676615775e1770a006588a7abfc71aeaeb299b98a4cd543cb03b7302e559937275ad40310c86597693e1a3edc646a83a1a24fd102a6dd6232aeac6e42022988275ba79f5faaa364715c4a601b7c09dbb27ec61ee4beab3ea3f07f2e3023ad3c4584ecb2e2207f01966410211e153ea05c5db61e8cfe7e47d04f3e710c67875d6fb9e35c4df7d5008cab1b533fce65b5aef3317b4e8258e73af48463cf218e8664c964f433361a4f73b3c6c216654d0cefeef38f488f5767dc75ba00cc740aca4898e7364a05727b066a1bf7b9ec6f2446b211d4a25adbbda4523323ac66b32feaf8a84014d7b25061fa1a3174fe1a4bb237e234335e58acf424dac42c75f3aea2c7adc0facac3b6f56644b44e9204f97dc2acd3757f5f29f70384e58e9ac1752d6b0a2bb66a4c6d277ec851edb9211d30001721d743c00287e0c4d9f9930895f5fc68d1489004462692c5df36d0cd9ee9021881fea904d6d3e34f709bb6a377e4f9e299168e0d272a3eb217e36270b6cacf865c224d675358b4e51255679135824258285375d6f94848d77ab115d3facc533a88ed487cae1f838268bc3b0e20adbc7e5f979485239a7c3b1cd2d1d986fd04345a36b5a5bd0fc1065dd154ce44a4c585959fac43b4ed17916a7de172c064b1ce98634e57d66aa95bfdaabb1c2b3967851e07d45256c0a4f5837d4e512b5346a67b06be7bb9aef8516910e64152188ca0442d9e3a6703b2e20cd32fcef5626bacf9cc40c5cadf524fad20ba50aba6529e083ee881685f36370b317561682aa0dfd4bc52352a39387a24a3b86451f8d71a41c2659cb74613b2d048e53e90a5a1da377c566936d857e3e4b7a3ea70c883c1dbe56e956e706acf437996da9ac02799ff46fc3dbee1e81b33afe105c41a56b52a1ddc36457cdf7a86d829d2c755fed20aac7dcfeaa5355e6e3d433542a8887d556c38d0f2afb92674163dbd7e9428d0de239342fdc0478ff2b7ae6c34c982e6e64de529117f71cbc518fdb1531a1a7ff51d0bd860f1e68e8f352d2e5e99c8690721e7897c267b828d2d44cdddceb2021be50df806c6e7db2f3f39d1fdf05f060857d4868be680841074623337b399a6d78363f2f9f6221b4fb30e3a3c4cd4990579842d204fe6a0e95bad0350ca199fe32922a18c9fa8a82fa4539003f0c38c0ca4446290a3dbc13529a11ce0fe7a90d5caaf10bbb188206a466dd795f5cbfde2ea1130d05b7c1b2105a4300507d40915fe43abde0d4b05176e6b2e2402c5d48d988364d2afbe06c67797acee56c3f8bd98df4c75fff77a1fce310abcf5e66fe586ea70cb4e9914e8cd834a3d27f56a9c8be0227c0e14d47519a034bafd9a61376add2e5fc394c363e0ed8f76de6944f2474d9ab2952c9f9ba5420e431525ba221ae1f5a48ba9f88834b60d9bc5a741fbb3fe9039025a7e5daf81d5414d0765e839a5f4e9c624fce27a22295620d593eb2413215314aa29a3027b8d9312ec1c09a8462886433e83f9f9e2280fc5e7eebeeb42213fc6ece8f58fb755d120a6d2ea9667dc4ef4e05e136874bb0984927d432f793a4df8182ec50e26b097c7d5e2a602315cf0cce489a9791c6fbaf56a1d353a34d6a1f37a8513054aa1ceb254d922d34d315a2f6d00180ffc121dfd9460041c311fa940d5607600e361cf1e7d95c0ece58410df88eb0b8038d1bcd8c6e5bbe9acad73ff2880b928f7a1dc4e3f3f0e4345a4781a6298b608470046c2fadd3e2ab73623c30e1a52f9e026dd3275b8a469653f09a2b77e3dbee0aed289c86b0d427fcee02df7589a811d2a6cbf85f33bd2a68422805eeb52395fdd5e5e23cbd70cbc7ffd2b99da803cbfa7c01eb8fd2f2a9d6f086c5196e8ed4087ca182727f6531f7254780abf7098ca95f718bd1bd9cda07af0f413861b37929639ef4476853d3b30e88be93d1b84adcfe771f73af003ac232523009801e64b07ed56acad58f7c53b833776af893c3820d5b6fe7665751e9e59beac61d7b88686a3f69f4023f739fe5f7480e19b4a929034a1305e6b8bd1b45f93a492f043f81d676768236006a891aafbb6d4cc59373c82bd1e2a21943dd1f0a5c2d8f5032c893d8e4d0b4ea7bd220f9b5d845cd9d5080f42c3f497cd6c77a9175b15d500b1fcb4bcf60c7b1baece1d97af55461360b4052680bbeeb5a5ca9fb95ed167ca893c83357ed8c211b5c1163515e158491a9d2d34863e1ee5689b4a2c47a89dcfe39489ea0da13a128a9f627c24e70457405c716724b82e6114f6d09fbc4d6ac8484b2865fa2886a1425c52ae3c26fa25e309fa561183494bd0898e0c46c1bc5a8155f19109909cbdabc44300b4d8d7e600b3007f3df0099e3cdd0a2edea5a751f0bc00db845231eaa2f8dea597fd4306b419a6cbd3ffad09778c99b72a15b871b74e5d2849b4c5f46f8825106a43a72b8ee5feb3ab3da5fd5005e826bfe4c31f048182cec67e8c3308ab4490da57ca8f33aebf91fee062991c0e27ce671b40cca26805c1592becff3ba8017c1718894d00f5b3496ec354c29f0b734c031bc2686e1e09a5ab76d19f85b2d2e7e8a3967d5b17e1e3c95a9747c23bdb7c9dfaafedaf625db5779eac075d163af16f8f86d98f1d0248025c9aa985fc7b47a9b59a2b2de94f05e79d41905566503f6421763649910d79aaed25b023ddb16537a0ced14af9fbd9a73e9015385fc953905c4ee973a8433edd4625211579852046b6e951fcb0208a3140424a92fe27f03a28222dd9e75b1f4b64df999be4de2c1fe6524203723a482892c148a8facabf26791083d441486b858472a93b804a6cd9a2ac23bee54cf94fbcaf690490d5a9585c413571aa7df4a5163bc5621d0ab9b071b8518e5d3f3689d165e351d23f28d530d05532922feff1c6401057a815fa247a60ad2938a8c36b5aacfc9d705d4ff3a4f8bd2da4a5fef8f25b31df531a59dd333101d766ae6368394931cd0417ec7391d12d13c257feb3d1acd3670813607246fa95fdaeff37d7b0867205dadba6cfd5534fc79480b48d77c3dd0c893575a76a4fa069af2149c34f19512db05b3376d49eeeb35410801c57f2d4d102b69b549c63149122ce85ac623cc09a501a0fcff2b63a95df233cdaf7ddcaded47c0de2083ab2e962db82a83842a623f70413f24a8be16d28cda89597d03eee4b044ec16f817ad69a469edf9ba5edc5fc6660e5d3863756fc68487ce2c2a9df232a142d63785d9584e3ac8df29e483833984bf5e963e48ccd8a3d0ea6cd2782d414ffb39d41d87823f8d1969d2bda540570c77615ba858c65dddfb0bd89c891d1b20da3843eeede9bb6cefa5b76c8da91f7a72b3c4b966409a51e83cc1dea4564656e42d6406a4deb0735ac78b75d14eaff116868a88ca48d6c26afb5c189b77cd43b26da7d8c331eece453d48715a8ce1b8d8bb27ee7aadab7bab57bbfbd0e61b6406daa1bf96a874f8b000975f4d7a54f5e661f76761de2296f26087a7502cc23455bc25a4585bcc7a4cb5858ea5bef155bca3fc6db71292427244a0be75ec20c2b4d136b29eafa35145b9ef76e691736a557313e0f2d125dfd6eb06d0bc37a16f0c8c3637115d1750e93bf877925697ef28e143be37f27cd9521c98f32524a37eed0cca3ec4888c275b019d38874ae7dc3d294e4ba4bdd1c771e5ef159ad3b5fd87d96a1096558e1bffeb9d6dda37ee81a80dcd2b885eb900bc00f485a434a69ced6209a355bcca1f3bd9613db57ffa7962dc4237991dc73c853ccfed7e942f5b491fecc72ed47a2552c871f847fb5ca76be99421c6ec4709c138e1f79ea15f95cdedf8d5f729e267fc1862a5b3d94cfeeaaca9ab815e7e3eb37f990eecc12ae55413f211a28f2da2099504bb92ff6f012c9b7c35dfe5f66fdbbbb7ce0ebbdb9167216ffa1401cd4455abeebfbfb21f14fd7d3e6701a1b623ef50515383a0a5f12cea83eb1dca75539768a3f9156cbe324bd8f97b8bd22bd30cf750ca4a623b3c913b34286b79166ae7cc650537952feeadf01e1dd164f9377f3279e71ee01b4eef1c57900684dcfaecccae5eb6d5ad9809eef35741ce626d567d89fffded27700c5a9f4b1b7c4e582ebd3793cbb9ab20f8edba7ff4d1540500f88a817b44bd4e5105644dc994c07e117d76e889e5702e7ef43a69fc8f6614d79095af13163fd201980ebdd1fe16e846845d19f00a5b119b1702b4e51b216ac642031795d59f34537dfebf582f4bd93dec549cbfb1d3b144ddf013c37e7d00617a03e0a4a6fed17da1df97df71b69afa1b11c17649e3535f078f45f245e40c5cc08a3f4616f34385dc3ed25f32577b70afed40ef4421c38524519a1d002576fc02c212ea00205794039f525dcb85d250e1f628a11e684af50466ecef20ba65895442786db392c949d19a9453dc2b29aa59a8721844a7407abbde4df3ea4fd8134261a0b1d8d50c4efd2d6f3d70137126f15dc04bca8816a13eadd0a72f330acfef11d5bd048f54c9eea5de1ba20879778db433692e52c77e582b424237e92492ea637a76a0b7a9d5262e1c4606f981d067d146d0252effaf01d82fb74dd83cb5af57aef5cfb7b3be17b483aad287acb89a088869a2e69592876135f0a8f9b8eafe3c400a20a21457a0fbb4ad18bf6cec0851239f4ebe1b9d1c1594c818713ebdb0414e0c5c36cf305c11397451db6c709ff52b0a03a80b514e42d4f1a520c63de64634f46bc7d53cdcb921427911fb73cdb0f957c6906b8ca988985edf9de0e977e5226cad1c72a96b45bc6ec8100451d29c2435b76b1b1dee7c09cee70b1f5e920f170fa69d4522bee9ed4c8ffcb8a8a2fb5cb4aae699b97a8698565d09feb7cd1c29e9a424d72905ed5f2499497266e9a2cb9001126c9ca00108a81b7ee0c199c0258528a95f58deab979192925e47cbab704996ea095f09e6d6637507d633bb4de338f533338884e4ab6fdc5536d1628b45727a57929ef3627750e119d6a08e435298207701b6a7a2aadd3411e484e49126bbdd077506f8ae4672bab990fcbd30da94ba308ffeea2cdb881b98e1c9083bbddf5e457d14eca5f586d7f16a84565c1f956a0a4c482661e9eb3e6bc6bbc49557983918535efe7a2dd0f92d570a3192438b6f028ec8b0442da69d408149a2e4aa6864ce499f6d681f65f370ba436acc798d06c43076c3928f369cfc6666642b70476539c3bc1f205f44b8f36c961679cb9e4f962a361bc2ec641c192dd56dd859d538f02332cb528700215fc520971576f103e04ac43f913de21716a8610829ac7b0ae376b6e869cc3b5eb5d3e4e710fc16b45d670ace7941a8c98466162b651329789de1a81c9809332d833058784658234366512c47a7b11f2c1d44d20d2303065db67b0da009983023de85f0797c61f140ae51ddb34d45e0df0b5902e07aa2538329832091b0869ca284ced52cea8eb83790ec2cbaed487d02acaf7992198ee983e484a6f8ed4222416ed8d0eb94a463f5f92f541ab26791618cbcecc891f2dbe18966f2d76437321299794165c508a72b0b05f853514bb30a9bc29ab6c69bba71b8352aed431aac45e9e145cf4a2ee62f172a4fa6595ef4231cdab1c6ba7aba016cb57f9a354208e34273d4811ac57971ee9f46aa40ba710448f91d6e6ee9757eb9ddea99b8388cf080975300e912122fc9aa6bf2860402bd28a79d1be8e121684e41530b1aa5d86fa118713a1609ce8611c355269456107985189f16d1ad00b7076d870afbd8c9ec741a3f0736b5a274a8883f02972aa6ecd7da49bfc268f42c9374bee0172ee21cbd1e67ac83258c56e0d4c777c91fd3a9df14a6f2d86a13f6058fd0e0695e7548df8980aa449be5a2453bb281826f7cfb63e293347721e093632f05213fe84b5f2dfaa78ce4c667f57330581d0b32f0793b829d147d86fd51a1798161f51d89d3228ac0635a4aeeaf6c5a31694b2f3bf2174c4c060a27bd1185a409e7f07b4e407804ee69e10b12cb53a69b406d5d78095d257178aa03d86b81c30a5314a69e80c35b68f1d8e68490ff30f559346fee11d524f89e767b6e8970992cec9e6b9fc342dbcd2f65edf1c1040445e91d3da8661e17d5f58b7603c06a78773406cc3ac3e0cd827974a471e14d93c08d31ecc8927bc149daab36fd2a4b7826c49eabe7aa7278e6e0c8f6839de73a3b11d45efa86d20aff9ea3d8818a3b9a525f8751c94f00fb37d8927ccb20ec41a7cca14edd31985c682a74503b81da52125428ca6ec678f3124f657e287feb80018dae51823ce6e35f1180f2926f0d6de1a8dc5221dc20d26a0d76b82c9baa42406e3e34b01cd17d9f4910af9d5c93e7fe4eecff78f20587e661e901c38d4fca041c81176e7873f83bb69e380b887737acc3c100004b303753fc7c9c97cca9c79d909c3284b10d3d2659a881288650673c9e95562e0b8add57c7c3dc6dd48622b2ad5eee77c4793b32d0e0ba502c0664be060a0a77df4d37dcd960808c5a370dcf0bfb46b86d5f832a9475c72599a6c5fd36b831bcb1a0b12c146b7f85a87f95934bab092b6c79bec4fed9dadceb8b84754ac2be39d27c5f45fd83c0159c5f8f110b1a34ed911fdd0868bf4ecb49c0165a1e959d4818d4d5624ed6d6d2ca6b5ce92afeb3e70dd229d4b1a6d9694abe0c02664f405950ab070e8108e6a0b040f3b6e607646f86b29c9e303e56aa5a36a97e4dcfe3e6075e1a38164d475072c2a9d21308c7e250bda4051614920c65d1d9d14b853c02fb710e1fbe6bb2ff1a9c4bfeeb588c97b455f9948e8493a88e0937151686f95cba30e08dee18372e364ec9157e74618f0c4a1ebd6e25e1141dbc48ac7906727c71bc71c72d01e75d990c4604fb9d030eeb52d0d888b2fb47c60d6c0f1490efa1fc75faea04798db21626c6a8b49d27bacd1b516e2f1e380b03848ac6c0c23c7bd213869961be18dea7157d80d72b6a1a84a7a5df4fb4867679242e451d05b9474d04a20ff7f8318e184eb2e35e34acdcb2e58fcdde58b2129cd1b41f75cadd60e09e2392f7b949285465fa2243bb5d491763269aca2dda10cba9ddd38d25e3beb5f0e614b23e6b2f8a594d387aa5e04d3003f882be0555ca6b8f9d59c063968917c05f30615cbcd69f6a9361aa9bc813fd0952546fa127cb059cf1cb65ba97f47ed2a4e79e41dbafe3393f55649ed0f6de093e5c0118bc3bbc5cb2eee9098409d0992ccf7cf35c06e9e2782abfe903d334c67a2d6f6e4b27102c8f377f14355e7200e7e4e30999e6c0f83d937550a4edfc734b175838e8f09026b966ae429af95907a9f86c1604a20589383f8e2efc1750d4ababc09acdcd7533a3e13baa9aa719c6b1db39fba69dacbd8fbec841ecc2e5f9037302199a91c4128d1486ac14fbbe942febb4ad6efff43e3d552fc2af97309bd3759918fc8cc76ac021bff0411a673116e1312ff344a6fea799c714cc0a23293bffc4bb57e9a16bb13d52fb2d71313253c762271b0365f77bced832492cdb7f791edf1d89bf174850b78233df5fb58cf51b172d9c28d430743bc8b2b42bbbf6e44f9996961403e60549e41828092aac9ba729050b884c2bd2a3214b088d1258b4bba02c8d69315f863a6c0cc0f12d007100cf8e3c5d689b9a726ed8adb19ffae6dba06e8835dddc255cf11e1ddc5529dbfdc76b75c4c2e6ec2ab8948cbeb81c406862d4fa9ae59b68a293dadf9b3658f31772e07feaa22d1464a51314330120b9b3ae702fd0a41acdaf0d42616fd606a3a96204476a7a27f16e8f7dff5586a5c640f27d8bed80181b70df81dd7ad9c2a7bb7570df3a5efd2bb0998c46996b1c78d6fffd74acc8782e7520b0500d9d3d35c3c790e8abd69ee7431ecd7295b99d447b76a624fcd6eabeb5f0238e72ebb0b892b0388636f18e9abf8eebce86208b8945fe57a0aebedf6deaf02aa5f4a23ab2c471d6bc119432ec2898aab6f01be309de087ac3341986be139537f235e927c57eb2b9eec796c8f8656625835ed2cb1f2a1e0fa2e67457a06440fcf3d9be9a2f8ec1ec2f8fac677147008ff8b5fe11c4427732edd3afdca218d08ac2964336f0a55e09cd759612b069c7a5a3b5f0848620b4190780b1bab81a579b21b8d6139123f35b5b39003d490feef9a7919ed47d1fb34d64cf8699d5a225478a70fcc69bac641bb614a5983b1ff75db14f24c1a908899d5b787cf1d3ccab7fc024b1e2809cc7bd9b3e43b44fedc41549d598b2d93945c5d4a2468614943892c9c5d304b46420fa5ceb3521a95eb00a2d8033ccfebc27c2001b1b1705802efdf9a811eeca149b8a8da2f26cf07bcac5675aece5be5cf254b8de45072eca1e6e4bbe2a57443cd930cecea8d728649d22c0c29ce3f33eafd4eccc5ea7ca40a6d78a8ff35ea61b4116440a32e92c09b411417d0879eb432e070c3b2e52d2737a07c67657fcf561e0103a4b2575ae41b506f679f0ba8fbe6c47ad64f3bcedc23a6cda0a372006fdd0427b96be79bf697aba37d173fa2fbf427b05e359401db94000e45d62dd5ebc03d4a24d0e92e685123b70a96abc4c6c730849bfea7bffd938de0f6de46dea32dd82a74cea120a66abc8e4546dc1daa2ee68945e4d211a891568f7e045ea5636544acfcab82498445c1b46e925674b0a000c70392fd58ef86e7b7a7cd5298bc76ee3c88b7d1556ea61dccdf3b3794d765a17f08bce034950165e5853be2d93b6fa83c1427ab691b255d376d55ad6a686f2ab9896385abd10508dce54e73d85757db0f7e9b80baaa0cc4318341cf02c5b277f70a947efbdb110798c846f24c7910ad4c9989c387cdd0fc1679fccd8f9edd6636df18de077c8157e52991f45778553be57019cc1f77a384c64d2d268f0855e8fa8f629d49a90f8acd60242f9c39b0bfcd9364d363045ecc45d78d693836b3ec2dab518e639afae1de056bcaafaa8ad6416dbdac7ac6f96d47f9ccf437bd6b0576ff6056f02cea787ec1eb928ddfe4e0a91f0cd7da20a84723af77c6ad29b2c0510a738b7e5fdb809803f7bd3a2ef32f63c2bbf951212c2facbf6eeea43eaaff378265b2ae31cd2ef15c7eca9b2b9f6de5e7e30e3a15b3166e688fd9bb037272171e9d7b9db4657d3f587d16cdcb596896ff95cfdcb7130abfa76d2e84537110c224a7f810d00c135a7ecaa3c05a850b9777b36bd185c453af8a8efaff9ec76721b78e5698c8d1807d4b7d26a1820f74b44ec86ecd94ce23ea3563632852421347177099581e0e15eb3de8c054ba8fc0d96d23ecff42a5d10a40cdf602f29ca59156a98f943b2529d7806a8328a8f3182a5ccebfc84ce33b68651faa97aec76f781f34e5599c732be44fdb4b8a7fda0cf13891b5bd9f1293fcb53635d5c0e5278e0de1bdfe0f699d645d7687e6846a5b20f11d822c4d0c601690630541db6ad4ea478a7b6d6241643baea575d3a243a2a82a3446db2ac0b99859ab99cd5798d604b23f7558c6c3e8296e4d0805a1a0d1d5b5e80242f1d70bb1f384ee705c946b404e57104598e6527858c862568fdaa26336cf1241a52195c6c149f7d3e7f3ff0dc2fbdccbc13993bb6a4117b6ab5b47586aa02d7ed6eedb954cd64a6c9bff0e6fd5ec9bd64e84ccb32f2c6dac2447737d7c084da9cf7d64e3e08ad0812d6896e8832031be179828500cafcb7a7390e6bc75fbbedbdd0b9620f01abd494b4996bc41f684eb5e1cd1203bcb0960d46db6bd007a07bfa3ecf63353be0a34858ab6056c02edba69e2a9c211d17bc3e359c04a2223c30fb91c5586913da357839bb64fdb5c060be2feac36305b079146ecf5016bca350f9d1a7ac9ec8796031559a88e44a9e2942306314ed8907ca2a5516375834a80aa58e81ff2e6f8b274ae13672bda5bd5c19c533dfd006eef9a8ea6f9fcbfa452e3a22b349428e4a1e4cf090869471faf84e4fa7c9b876c6608344baeeb80b328c73a8abb3144a2389bbb21bb555679783ae96f1e61cd01f9ec4b5feb455f86a6ebe75d0c9bc95ce9180df5366c5cf649f90f6c5183f139daadeeeb51f9dbf5ee0e931bc38183f4ab9a438bab8e1e2c0f8806867b278486a73aeb9722771f61e01b105c8f5623dc91eb6bafcdb89418afc9cd354f9111d6a2059b4778d8f5a353577ef304e9baac9295d4d9ea286efa3cc960cbd2a42e0901c8da23e4127c42e8d61435e44a91cd373024a13ae97eb7a701945b46858a7aa232477ff6ef018a127667abf9a542e435d39f19c098f7a27c4ece8d13d7902901de7d3e0b6119dc89233b0168fa1f41a43cbc0f89b153382d4066899c27c9385e08c3b6698c18443db5133badbc4fc30c65d6814eb93ca570ceee12706f8985b275e633ebf991b7038a4cf13be847289520190139e3a459c25a605dd47961f6c281d5295081e39433a5f69d0c18b837459f6f34bb08311841078c131f4e8aa55319219cba6d643ad6f823dd00e298410c958df0353971d193ab86f22ad59a549d3526b9889fcad0776d94f25249ba85aebe5e40cc5cfb259ffcd57e2ca44f460b48a8e02d9c61c7a6e8e2e15df85d1590eb6761da406c3cc275d2387648d574a3a11fcd9a84c0946388c9e3cbd3246e8adecced002beccd825c309268986711a1340d5606e3ff3ede54d202d78e4869cd8f5119996f52bf7d4002cc40f5d1f2e9eafd687889d9917f42a32b103699ad596a563c27645af727a1162cb5c32390df8d6f206552f097c915a69a307b151262ebf3b048df17ff9863588d6c2929872b6381a4124638af728081ce2335942f830562d49b3a7bd9ba9b4c2c59999827034132473133d83c7141ade84f2b7bb0f48fbb16053f90f12d9c049110753224fa1b151555a1b9d12578f855cc277d309d1ec4301696e9af3395150ca8a74eb6f6840f761a137d2b99f442d6d501721d0a94e633c91477dbbca5a5b145b4ca2dfb39a348e5a834c0401f9995126daed7052a57d48c28cc27c0cf2f80db72cd975a3953b634227f65f36807809c3299e6cbc5fe5acc5cde51cb09d63c294298750b8089ee91a9befb72d58ee1043b29d9f282c75a38398578c2d5fe912babd67b5a7b95a3cb231e997b4b10ecafa0c80928df655d9df7dad45436014370008f15c3333e90a584554a02f0352c20d85f5eea98ec06965dc40030f40986a02e06d74c1361591f254dcd380c998ecf55bd44b24794685604133e040bf57c5f8a72033889a541bacfba279856636266fdec2e1906038c89bdaaf7f8166857e1c9e8826c7c334d39fd17b92d8a5b542cb1b4f298a130acbf9c8b13f6f93b8584f5a1c438cf63a3e9ab80b0bc913ded9ce9a74ba9f0d6f314c379eccab28a1feccbfcd666e0a3002bd0cfb2628a2b73dc87eb32fedde74601bf3d849a9e161bbd269f2961f4c3759407045e7269cb26cd6167d15d1abc5708c28fa9035607342b0bd0eaf40923429fb44b3904e91b73ff97d36e34b5b53c29e7e32a5c6d055b2ecd15feaa3cbfdf6afd6859c8c510f7b0a401d10f6249cc246bf3a7e98b5b056bc46ddb7fc423aa40d169a5408c9a1cb69532f748dc4aa0ee6c1fc6584e3b0f24d2161bf6c5e26277adda338da1bfd5b4134f51e78b2b449503b9c9bcb0a8b16acaaffeaf3151255f24d13892e243824d71b093ba362ffe7f6cc21d4058885ddcc2b146e71aeed2a84ba24b8702535f098a5ab1aa551f5ea5419b42b8b19440cd2706cde656e6989b02ccaf98c8b84d9510fe562b972ebc33d89c09fb8a17e97aa60cd443950cf728ebc18cd07e318f4415116d2037e202f662324b776d923c3c74eb086c003dec306b01850d6e596b79a3745fc77867757ce5119a0933a816c79e39b9a0ad31dd1f3133d2121ebf5e0eefc0cdea3629f66ff8de22b3e5f8e89a08e6eb4c0b4ca63ada2c169ccf32898062df3c9115baa7bff08f00f6d8c133b716301c27c7fe8dc660805406915464be1326fb1565a483fcdc360ced03321bc815e00b1cf56e61cf1a668921fddf77bfd73618b3e4267ba53dd7f7275d5943b27369c01693c7ebb2547175bd5b27cdff81b8e4b64408141ff3440effc4433516d636af76b7e784f52ca3b3a6623067cb24ce4d151a43c43218fdd5fb382e7c139c680a3e4bfc26559eb113ce7e7c8ba2e3e2043adc0087f2d0759bbf11b6e1af6fcadaab6867fdce4aa1a08fa640c1afed097bfa89b3de68921e002a7aefee30da4a01a0af4e3c46c15ac3a8a6e30f25dd34bfd36b70c577c48cf4baf8a4ebdf2124d8fd05db71eb970b28c1461bf654cbc55f99b65bcac245d7aa002048266fdd3c6ab35b0656952a9a7c60a059201f933905337dfe70b2b8f4c1788a50159850aa52032d3f3b59e28e9bc758688500c285f64e3ecda0fabe24d3e667cbfb000779b83e0898f6151fc46d5c769d670ba37149278b60c52cac15bde05efb789517bc2a9f771ef10337098e39771faef8d2c0bf1f1fe89694221ee27f9b116ba84d31ff2391bb2674fd60bd71f62409b4f4c5c49828debf25803d1a3c87330a40125ef430787f9f3f7107a9db80819d8e3dfa12adb0f311191cc2b7d71a6aaf13e0a65230ed004719c49043073e457140838ae2c9dae6501e3022aa5bb0f22f5a01d2278774b67036ef0d55d92f32bc1e9004c38c0e2a5219f07d37eba41c2a0b75fdaa7c5f84dddb900b02194c43667e206665b1afe6d240e3445795d78e2b3efb38a663d48b8fd6f88c689cb472d771dc6ecd76b4b3cad1f54888cd3b390648f8743de5c42eefd7130c75ca6afd9ceaeb98417231116d30832067723966bbec9b8c252bdc07afce69a0dac18c6b1c9f7da618c46e4a17b8339b16255cbe87da13cf211ce2e4a166c070a491fae933434d245c57ef5dd417ae712d7dff9de0632885f2053946cc5204bbd1c3bb19374099cd5f4b015463f4e98b5a9ebba643388becee3ee3429d73b327488030900a7fe42bbb176547b0f671c26b63a338c3dc123e709151682dc837c3d4e0c00ec4451bb6935ef5e706d92f188c27fa33dadd6a5fb9c496efd8609e59409c18a3518ebcb86995912cb1e3437f6bc283d557922901c87bdf5ec9aa57b7ceb4cb77d1e317afc0cd7bbb4e05af1998d33f248ae17b057435a61439c50ba6ae35968d7dc4667e7c50509491654af1381e0dec727fab5868b3e7b7d1aa47f47b80342222390e646009f56f0f434edd7c982f1fb62613884717a43bcb9bd721f3c149bc7c8e401f6908a8bd812714f72734f3564ba304e09ca4af98ad1a79f1a5a15d14c2a2a98acb46c450020e7d4e9ee7b2a17013ff48693ea08a3ea5b1d86f8bf9cf1a58e052d5f2cb6d436c789384cd38febf3b6688dd5ac8a8fe0b0dc29b0301a873dda79e25f14b7356568dce73246f6a057677fa6ffa3c1713e1740aec66c66deeb62eeaee11eefc7e791d2f01841ca99796af4b036f2e20c72a1f23acd6fed712ec22e209af27c478c400b22232fc9a55080a1cdfa275aca1a6c0c60913f2f899c664d9a76930c2b32fcc6a2688b7c7290bee351173966e2d57a706cb6b5efc6ddd3ad4ec9630fb2eec554a691ff6afa8fe28a9143853ce87188854bce1cf1bff6bd7284f70d954f0dade73a411090b0dc5350499ac478c4c8c57eb22e662f53993097da912a4bc1f8be7b33220bcbdb2d323784e5995bbdebf358119a10107e452633f84b4f929723562d4753073f7711e85ca9a3f7448d1449928b7a45f44854880454ff4319b194dc7989ab5fe2c767f80f78f7952e638ee018d4865a63f8c8b4ea76071a3405b93cbf2cac9699faf12d8c157f80019f7b07436380bb7f74f6273e325ec00318cb25a94d52c23687eb7e2b0ecfdc3d4aaf473b6412dec2f73c06dd571ed69c4268e2fbf9235d4739725b84db4f9902cf2011cb79043e23deedc108d51ca3e00314f40e41a456aee4aa72da7f81fa44ef42265c7618712ff800676d7255ea99bc4b2285d66ca2523c286a9dd4011edb689a1f4adb62b8bef27306fac290fd37abfa7a25d871170525d03178ac62f62450e4556d097aa544d23e5d87dd3bc43ff9951abd6a47ce5ae39c7f919a83a68693cdeb98f4a1c253c0fef0a146b52dda75b3b95540594ccd2548a5cdb07c235781bdbc7cf76a5613c1ca60062b9b154f06fd24cd446c75da3d6997b579f06773d4876ea6b62d7716604d8fc2f8a44317c6c8caa143a61c3b5b486559ba9e4ca8fc16bccd02fc723d7ee605cfb7018ececbf1ced82b4531e4c692f5f4c7c13a1e5b1ad764d8835ddb2e777e2b13fd1d498c732dc0f2af86b139c1f30ca03f6e5f894d6a94c1e2e2755462a8ec8893f9534295cc67371bb83a71e25289a8fbd4055c904d347823ed84fe706c5b92ad6a33d6ada44ed40d345b0fc8d22700876df46944838a13539c2010841fd245647d962c4b1546158c70c287417c511c1be891e9d3987d379b8e3bb661f35849eff22c73ab37bb2461a57328282ceed1fb3dc2922c2ea4e856748e6b4e071f31a4b3873c723f6ec98a7c5dd076f8ec041bd645b372eb95e20be26dfc76d380407cd8e01ac88aec95ec2459efcd69ea883ae0ea3d59da9ba7c3fa5776ae6cc19924b07726bf4f07c986f1d2b7500174f25b81ce997e37f09a4f384a2751ce59fafae2292805f17af5fc57fa91e387c3e2d8a7746443045977f121cf1bd5ad97e381459b99dbd8693cae1e063b83c1534eee5cbe99b01040255f0e2bbf1e15a2b6c7791b750a83170c91d3ab426ada7d16d8d161baed9584e75cf3d2429cb44f67f8d7c637f013d758d3ac10aca32b04341a8bc2954a8309627e0ad9b7fc4b4a236414e3c8250dcbd7605764af50bed62211fade018852170eccc17e3f30e23226509c8a2790f4b09bffe1ff96b297197ae14529be54bd95890c489cd898c87affb578ed22f2aba976bdedbf7a312714bb8ac62cfcd3cf4bc63201874cf735bf79aa0bb255587df1b0d03207a7e7bdc69f78d1f41230233afbd7ffbbf9f10efefb39db97a7f7c905222341168b891bbde94c97e729f1cf4db8a8fd7f6abef7828ad955da75a8caba39f94cbdacee445c8d370ad6e06460ea0562ecb9701899f88abcfcb997e0afb456e09e07b7f00dc613735d9b30719e0a12bbdf8d9672467b9f2c850ccf68fe5474e748483fe2cfd6a493c2e92a1d771d898c6b5313e7c5fb54786dcc044f4eac56063e5987e086795e8148263e08bf4bc3452dcfeb823e268c5c9bb8da6059a997b04438cedfc928f73d8a7df00567c5d518b9193d0c49f515e671577508c3f46db6407039dd17dd635a822db524f383f8a59e6454d3712d4f163619da592071427f127c9713c556930c5a42c6a4df2d9ae9a9b0bdd7bfbc31264fadca37ec27bce78bab4336c294c4238a0e7456f9051c4a3d9f4b964f673b3e9128fc8d101142887744f5987ce61218a431a467cc480b5d965935c7f570c5a5e989cf7d2da1bf3a77c8018579196e2e94fcd13e56964d9c4cfa4314016b673d14bc611a79eab94e855208b194b95acd211f975e60158f7d52ca8ea3240a9381d9e7cc0a74f174dc89220b350f12ce7179683fc3bb278e11cb08db781559f60050ec9a2bf2e7cc6cb9fb2ab147c2cc92981e92dfb0af678e4640275ff19fa8a75c3ea797f3d16d839ac1d6826d76fb192661649a2a6b43205e30de30610e6b9d0967d1e92a331fdfca1d28438d4d8195c3e15f2c90db624f037e56e68dce14c53cedf7cce3931150279524e3bb0357dcc39d45ce0e78e837e25e347c5f96e7d1b14954bd4216816a1efe6d9f407e4c3b0370759e8a3bebbdc783267177279dc7ee1616cf8b349367ac3b92fc8a12351366716e6e782dbb80e0a6240e323285ac910dcdde68a35ee3a9afa7c896135f5802bf2576305893b327f39415ac35c197fad93ee07fc01fbf8738f05fc0a88cd44ab26fe61a33d50ad9569529fc285245213fa4319d362ea1bd6333b974e941ac1c7a0cdeb43cafa3a45758d48faa96e67c12b19eb8331dfc39bfcb87a1a379174cca4fe855ec4a7dfc489a0700328b1903c656b24746ee1e89739e75e03b1eefbfff6ae47abf4f333407f6aff1c80eb69623095ea5abab3597542e4e214570a96614ce18111c12a1c7af926b18f7752d5b967b63d523d77eba0b2601fa1d19d8bec6182ea63370d87e89a79c51be791484eb64ae20a47cfa59ffd2f55a640a3e5a940ae3b8eecf099789277d7af3525e9f029b314395753104373af1984c85096c4d5af9601e9d6ac62205a1e30b0289e61c27e4cc05a866542c7469da547e17b32efaa43b1de388bd48fbb4c1f93390d805076346bb11274dcb993e157b34488b018e3c937a28cf28c03edb02b9025f0a14859b49a3576cbf2b35134c74f28c311744797b849ce419121a92c5bbcbb09f5e1874ee6562dfb0475abd6e477bf74f630e37655d79667faf14f4b8bb517a159184d008c9af59d36677eb11ad92ed992b3aa88ca20ccd3e994c13e2caa88a0140782048f3f4e60ca0cc8ed5769a12f231b223f349b9747cb7beacf29d0db28314b073c6271cbbf44914be8d26cfeca7fb884bd7e3ea5770b87bfeb37b99df7280b90b2a9fa162c07fa69d7a6deb3ccb0c34f41a326e45dc845b3dfb7e30ad83374a796dd641841f0a190fcb62111e6cfe7cde1f9f6cc546b87fd951ffc742d20580aa37f564d92c76a8e77a47f7073045eae0e7565fde51806d71711dbe92dbe7e1ca692bea2d565cb5004dfca3dec3cc744c8bb8b7431b71442614344ffaa6ce7bda524b30b87e058644427e261c47fb7542e19bac9df009e3a7270f6fbaa1c938b627df8ea91286caa5496aee79ae878bed629f34c7a3d7c71def8ef4e7ef170693a3613fe30edbc2f08afe17583b0553b0d42d6336c9280e0332c7049a078b9ceb67313a03d0a4d3df2f69a77263da3e092fe86bd2852933a5c40b66b87b930c71cea8a9d8a74a3818d34e46303671722d8996f81210ac344d752b26b54472cbdae92bb0ffd6dff4bc3303e91599eb408711849f36eaa415b3e43ad20d6190429102674204ca41fe1a21356dac6628cc771471af149434b8aed7beab3ad76876596b99a577167f91913eca665ada3350d3806db651f70ff0bca1876e02ed987829691ce8bb3e5dfba30e6d310ff1f41f508a24fca5b1244a627eec86b3b86dd440a3b77ca52f5f09119cf9594b7a33686c18a17405be5fccd4abe71d62eb892696c80356a8b3adf8d871d38ca0ace061c7e24f1c6235fb9fca36a5c91694975e5b1fdcdd938de6bcd490453190937c763b2eb6d00d6627ef15171777f8acc6af05765be580636cc8b164eb605a4bdfd0c26cb9cfefb89902dd30a938ee9f70b8f937ef266f18990cc45297617cf6a2dac79188822e6ef6566d5b44fcc949c8963aa175dda60435eb97171284502cf7f7e722c9f05bd212ca4e1dbe802926ac2f0e5a670e804ba4e0a0e0599efde962c9e50b921b8fe033eac5d8d62f22a9faa01d44f381169aeecc84ff0801160f92e77374995312430f97e9f886ee6813f338f61d23dcb2d9e84d0adf79d3e50335a0617856bce31c05bdc8136f9e27ffd8b0be239ced41053992ced04c065d0f45e48de4d16365513e03699eea43a0c61a9c5b58300394e496499dfa424e16bb3f643aa40dd43a57b888ff49da2617173033100fdb7f32e7e7eaf54cb909ad480e502cc10d41daefb4ffcc164009f7ba901c79c86daac362f846286eae80bb0bc04b3e6ea0bd6e1dd8523e475e6290c8689258309ff6e2d3dca276d31785a9511c53c4f5ce4e588819fb4e391c307fbe256a68bbbaa7b1b9cfcc074dc66aa6a5d56dea92edb391372967718778301fdd6696c735cea03079c6467e088f8902127446ca7d52257836f0e4358a862cb9d21e5074ebc567b2f8def1baa5374bf7feca94a4b1120c5dae1f9e4d2217c0e4be79ab7375dc6af5d474c21621064acbc867cc24dd07f9880eabf258f55c8af222e66a392247f2175e5cf6a0e22618d4b7f7df3260138c08fc9d8029b04ce27d6995fa7b5906a01ddbe2573a0c715ad4652adcfab532682563bf87303b2cf415da95167825e56643368473aef005dfaf90f4b74dc6bcdc611824d2a17dfb6155e4e4060003392dad0b6f8e35d4cd28393a0ca6d05f0c0a96da1c6d50e7b856304ecfa4ecc2def7995f3db17738b841b80aeb36c16845c666c62479c8f1f0f17313bd922724e47a3db9d62865b4a1a5ac1b72b30dea86e7ae5ff43da01be4586c99f9619d5fe2edde95350bc6379836b6d999d160621953f14e29872884ef772e4cfcb2da11bd640f3c6fab572905ea923fa69e6e9fd63efbf55aeb60594bea193a28a38dfdd77c9364199b3594fccc91c9c274262f7c68d8c402b67068135200a216fbd78083b3d915ca7e85598f09ee294f73a8ba634d96f55dda96e89402d4f9d307220eb5ec6d2ae04ec26f915c7058a0a197e32ba284c692acdaabe007028a62f36f7401ccf1b9adc46bfaef99ee6bd90ec4303c1fc3685c9f9b6d40e4fe803021820e518753aed62cae95bf2cf9c8d342768a3a7d4a9f4adc5a9212a116e6e05dcb9b6fadfc21725695a4afaa2407b9949578d3bed35cacba50eab97c35d1f8ca24d458409808c358bac170a9faf618a5bda3d8788dbaf3723548a35ffb8f8da18253e7a1a8adf29ee0110196886c6b7710ae2ed115718dc1740532c6e425cc0d451493c0cfece2e671a8e04381a89335b00d249a6ab4031507e4bb5fefbcdbe05f4ec2b99a62f45097f2fdd0dbdb885d9aaf104b74938c5b2f51bb0755641ac2a480a2c131d580506e721839079fd2c3a5d19623b62c655914bad3d00ba9fc1a48b6639b74409b04006bbe352aedefb98122bc2ff552e9c71a7a5406318e02d4b3e8db687c463edbd174ebde250d4d7199242cabc50ff54df718e743a8c3826a7310577990059f8119633e4a42489d51f83dcb04c4638d780659c2d8f2622b879ad39f26c61eaa9760d997e19dd27d907bd30c42b26233cb213ee104752beb335e30b6ab836f0ed6e6707467b55f4bc2dc7bed792fd14399c1cb2147fa069d35bf489223a80a3a8f63b752e213e06bc5f8864ea9ed00824601748d609932ebb604be2dc930fd56b93c44087edf33a6436424aa5520426bd49d847dc86d443084f9f32251c0e244725862a2f7ca4c971a86d8f742495446c95b87e1199a20c2423e715310465d31be0f2b198162f2b253826c284f01446ab3f76b0f4cc0cc914269977679a418a8b5ad1bc7e7c02d78abd01b7ab5d795b41471596dc09af33f38dd4c206c778c2a590b5eda34a84629c707ba0fac44fc2ee9e342edc8c371c1a17837b71042932ea35d09f9c9c71b89bace101d6bd8f6724667c628078f13eb19da41b56e5eea3afc0d4aa4f5416e4a8358a4f0e1a83019a22de869c8f85a8700b0d61f85a98e4a60197b6af6f7798cefcb2bd770057f36946c3433392300088e12925f99542da76e230d2060e3187641842fd4bf71d9284cda89f8072aacfdeea520015a0daa33b2def534380ae7b75cd76f842d4eda10fe696780bd74099db35af6f3195db26e5f2eee5a720da8be4b8318161aa3732b09492dc65a126cab92bd1463454e6dc24d0843fc71de597fd2d7571b1fcedd57321d57e23f45c3774cd64b51ad2d41177229a1419ee7c5f6caf75030022cbd2e39443bd1b18bddcf29ef34aad3b9400c74a38d6cfcf53073f84bd615eb23f8af25fa04624f643109370f11f9d50842d0ae5fe6cba19f32a1242bd1b42972e3670e6b493520de24b42d1a1d6a1d47b0b81394b7531d2c7f62775f5d4dffe86dfc20e7d51b2f4a7443ce3e68afa86c81584b859fbd0fbe17d621213e1f48201a374eaf7fef585fc2bd41d38f9dc7558859c518a1217fe44af2f0cd39f3bf096c2989f48a56f5fde999542a3346af56b41caab265b067afbfaa81a2bc444acd59ab96ebadd87e487732d858a357b3dcdc44d02fe690703bb08778e9d7734fab428d8801bcd8311cb3429df812b63ae6d2393df9f26d037d59962245d9332f56aaf6792833d8477d95be12b11b093ecd0f572dff7b9df9c85296955115d5b14969ec5caf3962eacea795da9e4f2a91475891efb7d8043af8694f906bbc0e07da8b5698a9ebebe8c84b88a2b9e40902de2fd340450350b4f66e23a980d833ef227cf9043133e658102014a83b172abb4100b53deb806f1d7ae47e9a697dd574392aba30ab3ca40f9f1d3ef91cade53e01448803c0ec4396f4cabe3fafb31cca9b639f6eca0826a1bbebf16299afcbd2e368b82253ec8239c591d8f10895b056b4892cad0385476fc6855a52d79e52d2e12c8d3bac91f304dafc29f113e0c77fc3a8f879c6943120156a7b55c7270a2117356d058765da10715be4a60602cf6dd6d6b4cb720195fea7b507c1d1c1d04377cccc2d530e974d46bf94d2ee0b1f79419d8915e1699429e20670332b89d28cae056d6cd9b918b7d8562f8c911a4c8d7f9b642dcaf5dbf3c91650e5b5dc94b3dfdeaf9451b0fc6fbf7e95bc6486b030ff1798e9a63a8df1251c8d3cc6c525efc907022b59b1193fd3d9763b5dd3f8d8e6d095b02aa55d6c8b724ee0a584dbdfe8748c97a9992a35a1023901a7fb8eca6362d68b791458d87a1a5d174ab9c8fbc95a5fd990728a250c758ea6e89817c5db3c4fd03f20194fcb3fa7421f2a8c4793589cd6162f9398beac5f056ed07c078512e2770ba0db2859edd25d1e46eee29c6e7796543e2beb8397ece9d4c5a4ae6353a4d0fee96d7aa083be620c3dcacae05885e21d4ea339f923470986da97ddd22efb801ca692953d85bf9e2e94c0f5e8e045f74bb33</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-shrink">      <input class="hbe hbe-input-field hbe-input-field-shrink" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-shrink" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-shrink">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">有东西被加密了, 请输入密码查看.</summary>
    
    
    
    <category term="梳理总结" scheme="https://marsperl.github.io/categories/%E6%A2%B3%E7%90%86%E6%80%BB%E7%BB%93/"/>
    
    
    <category term="运维" scheme="https://marsperl.github.io/tags/%E8%BF%90%E7%BB%B4/"/>
    
    <category term="总结" scheme="https://marsperl.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>实现Docker 容器跨主机通讯</title>
    <link href="https://marsperl.github.io/yyg/60ed202a/"/>
    <id>https://marsperl.github.io/yyg/60ed202a/</id>
    <published>2024-07-18T15:55:36.800Z</published>
    <updated>2024-07-21T13:35:43.892Z</updated>
    
    <content type="html"><![CDATA[<h2 id="实现Docker-容器跨主机通讯"><a href="#实现Docker-容器跨主机通讯" class="headerlink" title="实现Docker 容器跨主机通讯"></a>实现Docker 容器跨主机通讯</h2><p>[TOC]</p><h3 id="方案一：docker-swarm集群"><a href="#方案一：docker-swarm集群" class="headerlink" title="方案一：docker swarm集群"></a>方案一：docker swarm集群</h3><p><a href="https://blog.csdn.net/AMCUL/article/details/132913280">https://blog.csdn.net/AMCUL/article/details/132913280</a></p><h3 id="方案二：直接路由法"><a href="#方案二：直接路由法" class="headerlink" title="方案二：直接路由法"></a>方案二：直接路由法</h3><p>在部署指南中提到的方法的实现分固定网段、路由持久化、IP转发三部分组成。</p><h4 id="方法1："><a href="#方法1：" class="headerlink" title="方法1："></a>方法1：</h4><h5 id="修改并固定docker0的默认网段"><a href="#修改并固定docker0的默认网段" class="headerlink" title="修改并固定docker0的默认网段"></a>修改并固定docker0的默认网段</h5><ol><li>修改docker0网段ip，在主机的/etc/docker/daemon.json文件中，加入如下内容：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">打开daemon.json文件</span></span><br><span class="line">vi /etc/docker/daemon.json</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机一中添加的内容</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">172.16.200.1 为主机一的docker网段ip</span></span><br><span class="line">&#123;</span><br><span class="line"> &quot;bip&quot;: &quot;172.16.200.1/24&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机二中添加的内容</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">172.16.210.1 为主机二的docker网段ip</span></span><br><span class="line">&#123;</span><br><span class="line"> &quot;bip&quot;: &quot;172.16.210.1/24&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启docker服务</span></span><br><span class="line">systemctl restart docker </span><br></pre></td></tr></table></figure><ol><li>添加路由规则，主机间互相添加</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机1上添加路由规则（添加主机2的ip和网段）</span></span><br><span class="line">ip route add 172.16.210.0/24 via 172.20.1.52</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机2上添加路由规则（添加主机1的ip和网段）</span></span><br><span class="line">ip route add 172.16.200.0/24 via 172.20.1.51</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">方式一：</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">开启路由转发</span></span><br><span class="line">iptables -P FORWARD ACCEPT</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">方式二：</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">配置iptables规则（本机的网段）</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机一</span></span><br><span class="line">iptables -t nat -F POSTROUTING</span><br><span class="line">iptables -t nat -A POSTROUTING -s 172.16.200.0/24 ! -d 172.16.0.0/16 -j MASQUERADE</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机二</span></span><br><span class="line">iptables -t nat -F POSTROUTING</span><br><span class="line">iptables -t nat -A POSTROUTING -s 172.16.210.0/24 ! -d 172.16.0.0/16 -j MASQUERADE</span><br></pre></td></tr></table></figure><ol><li>启动容器并测试</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">主机1上启动ubuntu容器</span></span><br><span class="line">docker run -it --name node1 ubuntu:latest /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">主机2上启动ubuntu容器</span></span><br><span class="line">docker run -it --name node2 ubuntu:latest /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装测试工具</span></span><br><span class="line">apt-get update</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装ping工具</span></span><br><span class="line">apt-get install inetutils-ping -y</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装ip查看工具</span></span><br><span class="line">apt-get install net-tools -y</span><br></pre></td></tr></table></figure><h5 id="路由持久化（防止主机重启路由丢失）"><a href="#路由持久化（防止主机重启路由丢失）" class="headerlink" title="路由持久化（防止主机重启路由丢失）"></a>路由持久化（防止主机重启路由丢失）</h5><h6 id="法一：（推荐）"><a href="#法一：（推荐）" class="headerlink" title="法一：（推荐）"></a>法一：（推荐）</h6><p>在<code>/etc/sysconfig/network-scripts/</code>目录下创建名为<code>route-enp0s3</code>(enp0s3为主机网卡的名字，以实际为准)的文件 </p><p>推荐此方法，注意创建时<code>route-</code>后跟的是本机主机的网卡名</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/route-enp0s3</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在此文件添加如下格式的内容</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机一中添加</span></span><br><span class="line">172.16.230.0/24 via 172.20.1.52</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机二中添加</span></span><br><span class="line">172.16.220.0/24 via 172.20.1.51</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启网络验证</span></span><br><span class="line">service network restart</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看路由表中是否有刚才添加的路由</span></span><br><span class="line">ip route show | column -t</span><br></pre></td></tr></table></figure><h6 id="法二："><a href="#法二：" class="headerlink" title="法二："></a>法二：</h6><p>在<code>/etc/sysconfig/static-routes</code> 文件里添加如下内容 (没有static-routes需手动建立)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机一中添加</span></span><br><span class="line">any net 172.16.230.0/24 via 172.20.1.52</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机二中添加</span></span><br><span class="line">any net 172.16.220.0/24 via 172.20.1.51</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启网络服务</span></span><br><span class="line">systemctl restart network</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看路由表中是否有刚才添加的路由</span></span><br><span class="line">ip route show | column -t</span><br></pre></td></tr></table></figure><h5 id="开启IP转发"><a href="#开启IP转发" class="headerlink" title="开启IP转发"></a>开启IP转发</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">永久开启</span></span><br><span class="line">vi /etc/sysctl.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改</span></span><br><span class="line">net.ipv4.ip_forward=1</span><br></pre></td></tr></table></figure><h4 id="方法2：（适用于使用固定ip的容器）"><a href="#方法2：（适用于使用固定ip的容器）" class="headerlink" title="方法2：（适用于使用固定ip的容器）"></a>方法2：（适用于使用固定ip的容器）</h4><h5 id="创建docker网络"><a href="#创建docker网络" class="headerlink" title="创建docker网络"></a>创建docker网络</h5><ol><li>docker桥接类型网络创建</li></ol><p>分别对两台服务器中的docker创建名字为test的网络，指定子网范围为 172.16.220.0/24 、172.16.230.0/24</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机一</span></span><br><span class="line">docker network create test --driver bridge --ipam-driver default --subnet 172.16.220.0/24</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机二</span></span><br><span class="line">docker network create test --driver bridge --ipam-driver default --subnet 172.16.230.0/24</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看网络</span></span><br><span class="line">docker network ls</span><br></pre></td></tr></table></figure><ol><li>设置静态路由</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机1上添加路由规则（添加主机2的ip和网段）</span></span><br><span class="line">ip route add 172.16.230.0/24 via 172.20.1.52</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机2上添加路由规则（添加主机1的ip和网段）</span></span><br><span class="line">ip route add 172.16.220.0/24 via 172.20.1.51</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">开启路由转发</span></span><br><span class="line">iptables -P FORWARD ACCEPT</span><br></pre></td></tr></table></figure><ol><li>启动容器并测试</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">主机1上启动ubuntu容器(加上创建的桥接网络)</span></span><br><span class="line">docker run -it --name node1 --net=test ubuntu:latest /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">主机2上启动ubuntu容器(加上创建的桥接网络)</span></span><br><span class="line">docker run -it --name node2 --net=test ubuntu:latest /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装测试工具</span></span><br><span class="line">apt-get update</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装ping工具</span></span><br><span class="line">apt-get install inetutils-ping -y</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装ip查看工具</span></span><br><span class="line">apt-get install net-tools -y</span><br></pre></td></tr></table></figure><h5 id="路由持久化（防止主机重启路由丢失）-1"><a href="#路由持久化（防止主机重启路由丢失）-1" class="headerlink" title="路由持久化（防止主机重启路由丢失）"></a>路由持久化（防止主机重启路由丢失）</h5><p>使用<strong>nmtui图形化界面添加</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">下载nmtui</span></span><br><span class="line">yum install net-tools -y</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">显示nmtui图形化界面</span></span><br><span class="line">nmtui</span><br></pre></td></tr></table></figure><p>在主机一网卡中配置主机二的docker网络的ip段和ip，在主机二网卡中配置主机一的docker网络的ip段和ip</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机一中添加</span></span><br><span class="line">172.16.230.0/24  172.20.1.52</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机二中添加</span></span><br><span class="line">172.16.220.0/24  172.20.1.51</span><br></pre></td></tr></table></figure><p>配置完成会在/etc/sysconfig/network-scripts文件夹下看到</p><img src="/yyg/60ed202a/image-20240323221412716-1711203257505-1.png" class="" title="image-20240323221412716"><img src="/yyg/60ed202a/image-20240323221442754-1711203286475-3.png" class="" title="image-20240323221442754"><p>启动对应主机的新创建的网卡（网络重启或系统重启后会失效）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机一</span></span><br><span class="line">nmcli c up br-aed92de88760</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机二</span></span><br><span class="line">nmcli c up br-0ab3914edle2</span><br></pre></td></tr></table></figure><p>要使新网卡保持启动则需将对应新创建的网卡文件中的<code>ONBOOT=no</code>改为<code>ONBOOT=yes</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机一</span></span><br><span class="line">vi ifcfg-br-aed92de88760</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ONBOOT=no改为ONBOOT=<span class="built_in">yes</span></span></span><br><span class="line">ONBOOT=yes</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">主机二</span></span><br><span class="line">vi ifcfg-br-0ab3914edle2</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ONBOOT=no改为ONBOOT=<span class="built_in">yes</span></span></span><br><span class="line">ONBOOT=yes</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启网络服务</span></span><br><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure><img src="/yyg/60ed202a/image-20240323221537519-1711203339288-5.png" class="" title="image-20240323221537519"><h5 id="开启IP转发-1"><a href="#开启IP转发-1" class="headerlink" title="开启IP转发"></a>开启IP转发</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">永久开启</span></span><br><span class="line">vi /etc/sysctl.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改</span></span><br><span class="line">net.ipv4.ip_forward=1</span><br></pre></td></tr></table></figure><p>此时容器不受网络重启影响，可实现跨主机通讯。</p><p>但系统重启后，所创建的docker网络和容器均失效。</p><p>需要重新创建docker网络和容器，此后docker网络和容器均不受系统重启和网络重启的影响，成功实现docker容器的跨主机通讯。</p><img src="/yyg/60ed202a/image-20240323221547069-1711203348713-7.png" class="" title="image-20240323221547069">]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;实现Docker-容器跨主机通讯&quot;&gt;&lt;a href=&quot;#实现Docker-容器跨主机通讯&quot; class=&quot;headerlink&quot; title=&quot;实现Docker 容器跨主机通讯&quot;&gt;&lt;/a&gt;实现Docker 容器跨主机通讯&lt;/h2&gt;&lt;p&gt;[TOC]&lt;/p&gt;
&lt;h3 </summary>
      
    
    
    
    <category term="容器化" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/"/>
    
    <category term="docker" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/docker/"/>
    
    <category term="梳理总结" scheme="https://marsperl.github.io/categories/%E6%A2%B3%E7%90%86%E6%80%BB%E7%BB%93/"/>
    
    
    <category term="docker" scheme="https://marsperl.github.io/tags/docker/"/>
    
    <category term="容器通信" scheme="https://marsperl.github.io/tags/%E5%AE%B9%E5%99%A8%E9%80%9A%E4%BF%A1/"/>
    
  </entry>
  
  <entry>
    <title>使用cephadm方式部署ceph集群</title>
    <link href="https://marsperl.github.io/yyg/89bdf9b5/"/>
    <id>https://marsperl.github.io/yyg/89bdf9b5/</id>
    <published>2024-07-18T15:55:36.796Z</published>
    <updated>2024-07-21T13:31:18.276Z</updated>
    
    <content type="html"><![CDATA[<h1 id="使用cephadm方式部署ceph集群"><a href="#使用cephadm方式部署ceph集群" class="headerlink" title="使用cephadm方式部署ceph集群"></a>使用cephadm方式部署ceph集群</h1><h2 id="任务目标"><a href="#任务目标" class="headerlink" title="任务目标"></a>任务目标</h2><ol><li>完成使用cephadm方式部署ceph集群</li></ol><h2 id="任务平台"><a href="#任务平台" class="headerlink" title="任务平台"></a>任务平台</h2><ol><li>物理设备—</li><li>操作系统：openEuler 22.03 LTS SP2</li></ol><h2 id="部署指南"><a href="#部署指南" class="headerlink" title="部署指南"></a>部署指南</h2><h3 id="任务一：配置准备"><a href="#任务一：配置准备" class="headerlink" title="任务一：配置准备"></a>任务一：配置准备</h3><ol><li>重命名hostname</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.3.117的主机名改为future-ceph-node0</span></span><br><span class="line">hostnamectl set-hostname future-ceph-node0 &amp;&amp; bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.3.118的主机名改为future-ceph-node1</span></span><br><span class="line">hostnamectl set-hostname future-ceph-node1 &amp;&amp; bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.3.119的主机名改为future-ceph-node2</span></span><br><span class="line">hostnamectl set-hostname future-ceph-node2 &amp;&amp; bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将10.10.3.120的主机名改为future-ceph-node3</span></span><br><span class="line">hostnamectl set-hostname future-ceph-node3 &amp;&amp; bash</span><br></pre></td></tr></table></figure><ol><li>安装前的配置修改</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关闭防火墙</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line">firewall-cmd --state</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">selinux永久关闭</span></span><br><span class="line">setenforce 0</span><br><span class="line"> sed -i &#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27; /etc/selinux/config</span><br><span class="line">cat /etc/selinux/config</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加hosts</span></span><br><span class="line">cat &gt;&gt; /etc/hosts &lt;&lt; EOF</span><br><span class="line">10.10.3.117 future-ceph-node0</span><br><span class="line">10.10.3.118 future-ceph-node1</span><br><span class="line">10.10.3.119 future-ceph-node2</span><br><span class="line">10.10.3.120 future-ceph-node3</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看</span></span><br><span class="line">cat /etc/hosts</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">同步时间</span></span><br><span class="line">yum install ntp -y</span><br><span class="line">systemctl start ntpd</span><br><span class="line">systemctl enable ntpd</span><br><span class="line">yum install chrony  -y</span><br><span class="line">systemctl start chronyd</span><br><span class="line">systemctl enable chronyd</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改配置，添加内容</span></span><br><span class="line">echo &quot;</span><br><span class="line">server 10.10.3.70 iburst</span><br><span class="line">allow 10.10.3.0/24</span><br><span class="line">&quot; &gt;&gt; /etc/chrony.conf</span><br><span class="line">timedatectl set-ntp true</span><br><span class="line">systemctl restart chronyd</span><br><span class="line">timedatectl status</span><br><span class="line">date</span><br></pre></td></tr></table></figure><ol><li>添加SSH免密通信</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br><span class="line">ssh-copy-id 10.10.3.118</span><br><span class="line">ssh-copy-id 10.10.3.119</span><br><span class="line">ssh-copy-id 10.10.3.120</span><br></pre></td></tr></table></figure><h3 id="任务二：安装docker"><a href="#任务二：安装docker" class="headerlink" title="任务二：安装docker"></a>任务二：安装docker</h3><ol><li>配置Docker CE的yum存储库。打开<code>docker-ce.repo</code>的文件，并将以下内容复制到文件中：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">[docker-ce-stable]</span><br><span class="line">name=Docker CE Stable - $basearch</span><br><span class="line">baseurl=https://download.docker.com/linux/centos/7/$basearch/stable</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://download.docker.com/linux/centos/gpg &#x27; &gt; /etc/yum.repos.d/docker-ce.repo</span><br></pre></td></tr></table></figure><p>保存并退出文件。</p><ol><li>安装Docker CE。运行以下命令来安装Docker CE：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> yum -y install docker-ce docker-ce-cli  containerd.io</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动docker并设置开机自启</span></span><br><span class="line">systemctl start docker  </span><br><span class="line">systemctl enable docker</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看版本</span></span><br><span class="line">docker -v</span><br><span class="line">docker compose version</span><br></pre></td></tr></table></figure><ol><li>Docker配置修改存储路径，配置修改为如下。</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将配置写入daemon.json文件</span></span><br><span class="line">echo &#x27;&#123;</span><br><span class="line">  &quot;data-root&quot;: &quot;/data/docker&quot;</span><br><span class="line">&#125; &#x27; &gt; /etc/docker/daemon.json</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看</span></span><br><span class="line">cat /etc/docker/daemon.json</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br><span class="line">docker info</span><br></pre></td></tr></table></figure><h3 id="任务三：使用cephadm建设集群"><a href="#任务三：使用cephadm建设集群" class="headerlink" title="任务三：使用cephadm建设集群"></a>任务三：使用cephadm建设集群</h3><ol><li><h4 id="安装ceph软件"><a href="#安装ceph软件" class="headerlink" title="安装ceph软件"></a>安装ceph软件</h4></li></ol><p>在所有主机上安装ceph软件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y cephadm ceph-common</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看版本</span></span><br><span class="line">ceph -v</span><br></pre></td></tr></table></figure><ol><li><h4 id="启用admin节点"><a href="#启用admin节点" class="headerlink" title="启用admin节点"></a>启用admin节点</h4></li></ol><p>在10.10.3.117上启用集群</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cephadm bootstrap --mon-ip 10.10.3.117</span><br></pre></td></tr></table></figure><p>访问dashboard修改默认密码</p><blockquote><p>Fetching dashboard port number…</p><p>Ceph Dashboard is now available at:</p><p>​             URL: <a href="https://future-ceph-node0:8443/">https://future-ceph-node0:8443/</a></p><p>​            User: admin</p><p>​        Password: p4csdavtmr</p><p>Enabling client.admin keyring and conf on hosts with “admin” label</p><p>You can access the Ceph CLI with:</p><p>​        sudo /usr/sbin/cephadm shell —fsid 5f344e64-85e4-11ee-9181-0050569a1378 -c /etc/ceph/ceph.conf -k /etc/ceph/ceph.client.admin.keyring</p></blockquote><ol><li><h4 id="添加节点"><a href="#添加节点" class="headerlink" title="添加节点"></a>添加节点</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启用ceph命令</span></span><br><span class="line">cephadm shell</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加ceph的免密访问</span></span><br><span class="line">ceph cephadm get-pub-key &gt; ~/ceph.pub</span><br><span class="line">ssh-copy-id -f -i ~/ceph.pub root@future-ceph-node1</span><br><span class="line">ssh-copy-id -f -i ~/ceph.pub root@future-ceph-node2</span><br><span class="line">ssh-copy-id -f -i ~/ceph.pub root@future-ceph-node3</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加ceph节点</span></span><br><span class="line">ceph orch host add future-ceph-node1 10.10.3.118</span><br><span class="line">ceph orch host add future-ceph-node2 10.10.3.119</span><br><span class="line">ceph orch host add future-ceph-node3 10.10.3.120</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看节点</span></span><br><span class="line">ceph orch host ls</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加_admin标签允许该节点运行ceph相关命令</span></span><br><span class="line">ceph orch host label add future-ceph-node1  _admin</span><br><span class="line">ceph orch host label add future-ceph-node2  _admin</span><br><span class="line">ceph orch host label add future-ceph-node3  _admin</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将配置文件拷贝到其他节点</span></span><br><span class="line">scp /etc/ceph/ceph.conf future-ceph-node1:/etc/ceph/</span><br><span class="line">scp /etc/ceph/ceph.conf future-ceph-node2:/etc/ceph/</span><br><span class="line">scp /etc/ceph/ceph.conf future-ceph-node3:/etc/ceph/</span><br><span class="line">scp /etc/ceph/ceph.client.admin.keyring future-ceph-node1:/etc/ceph/</span><br><span class="line">scp /etc/ceph/ceph.client.admin.keyring future-ceph-node2:/etc/ceph/</span><br><span class="line">scp /etc/ceph/ceph.client.admin.keyring future-ceph-node3:/etc/ceph/</span><br></pre></td></tr></table></figure><ol><li><h4 id="设置mon节点（监控）"><a href="#设置mon节点（监控）" class="headerlink" title="设置mon节点（监控）"></a>设置mon节点（监控）</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ceph orch apply mon --placement=&quot;4 future-ceph-node0 future-ceph-node1 future-ceph-node2 future-ceph-node3&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看mon的详细信息</span></span><br><span class="line">ceph mon dump</span><br></pre></td></tr></table></figure><ol><li><h4 id="设置mgr节点（管理）"><a href="#设置mgr节点（管理）" class="headerlink" title="设置mgr节点（管理）"></a>设置mgr节点（管理）</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ceph orch apply mgr --placement=&quot;2 future-ceph-node0 future-ceph-node1 &quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看详情</span></span><br><span class="line"> ceph orch ls</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">打上标签</span></span><br><span class="line"> ceph orch host label add future-ceph-node0 master</span><br><span class="line"> ceph orch host label add future-ceph-node1 master</span><br></pre></td></tr></table></figure><ol><li><h4 id="添加osd（存储数据）"><a href="#添加osd（存储数据）" class="headerlink" title="添加osd（存储数据）"></a>添加osd（存储数据）</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看要挂载的磁盘</span></span><br><span class="line">lsblk</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">所有节点</span></span><br><span class="line">ceph orch daemon add osd future-ceph-node0:/dev/sdb</span><br><span class="line">ceph orch daemon add osd future-ceph-node1:/dev/sdb</span><br><span class="line">ceph orch daemon add osd future-ceph-node2:/dev/sdb</span><br><span class="line">ceph orch daemon add osd future-ceph-node3:/dev/sdb</span><br></pre></td></tr></table></figure><ol><li><h4 id="创建mds（元数据）"><a href="#创建mds（元数据）" class="headerlink" title="创建mds（元数据）"></a>创建mds（元数据）</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建cephfs文件系统</span></span><br><span class="line">ceph osd pool create cephfs_data</span><br><span class="line">ceph osd pool create cephfs_metadata</span><br><span class="line">ceph fs new cephfs cephfs_metadata cephfs_data</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置mds组件</span></span><br><span class="line"> ceph orch apply mds cephfs --placement=&quot;4 future-ceph-node0 future-ceph-node1 future-ceph-node2 future-ceph-node3&quot;</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">查看mds状态</span></span><br><span class="line"> ceph orch ps --daemon-type mds</span><br></pre></td></tr></table></figure><ol><li><h4 id="配置rgw（对象网关）"><a href="#配置rgw（对象网关）" class="headerlink" title="配置rgw（对象网关）"></a>配置rgw（对象网关）</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建名为myorg的realm</span></span><br><span class="line">radosgw-admin realm create --rgw-realm=myorg </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建名为default的区域组(设置为主区域组)</span></span><br><span class="line">radosgw-admin zonegroup create --rgw-zonegroup=default --master</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建名为cn-east-1的区域（设置为主区域）</span></span><br><span class="line"> radosgw-admin zone create --rgw-zonegroup=default --rgw-zone=cn-east-1 --master</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">为realm与区域配置radosgw</span></span><br><span class="line"> ceph orch apply rgw myorg cn-east-1 --placement=&quot;4 future-ceph-node0 future-ceph-node1 future-ceph-node2 future-ceph-node3&quot;</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">验证</span></span><br><span class="line"> ceph orch ps --daemon-type rgw</span><br><span class="line"> ceph -s</span><br></pre></td></tr></table></figure><ol><li><h4 id="访问测试"><a href="#访问测试" class="headerlink" title="访问测试"></a>访问测试</h4></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ceph-Dashboard</span></span><br><span class="line">https://10.10.3.117:8443</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Prometheus</span></span><br><span class="line">http://10.10.3.117:9095/</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Grafana</span></span><br><span class="line">https://10.10.3.117:3000/</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;使用cephadm方式部署ceph集群&quot;&gt;&lt;a href=&quot;#使用cephadm方式部署ceph集群&quot; class=&quot;headerlink&quot; title=&quot;使用cephadm方式部署ceph集群&quot;&gt;&lt;/a&gt;使用cephadm方式部署ceph集群&lt;/h1&gt;&lt;h2 i</summary>
      
    
    
    
    <category term="存储系统" scheme="https://marsperl.github.io/categories/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="ceph" scheme="https://marsperl.github.io/categories/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/ceph/"/>
    
    
    <category term="ceph" scheme="https://marsperl.github.io/tags/ceph/"/>
    
    <category term="共享存储" scheme="https://marsperl.github.io/tags/%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8/"/>
    
    <category term="ceph集群" scheme="https://marsperl.github.io/tags/ceph%E9%9B%86%E7%BE%A4/"/>
    
    <category term="cephadm" scheme="https://marsperl.github.io/tags/cephadm/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes知识梳理</title>
    <link href="https://marsperl.github.io/yyg/f5a7a3df/"/>
    <id>https://marsperl.github.io/yyg/f5a7a3df/</id>
    <published>2024-07-18T15:55:36.789Z</published>
    <updated>2024-07-21T13:24:30.724Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="3b61e416d5d79c498df1920a55a5485122d14503ff933a0ddeee3944a1e00a33">e720fb8297af95c5ceb1b2b23a1416611470b0df9ee00f115a8f160d91bc4bf1d8d9db9f760704ea32f564a15ff37e49c848f5134c46cc80506bd7b9c518807b40cd941d0a12ee45aff8c7c068866d54d88d9b36973f511f91014d7570b429b15ddaa6ba1cd32d275ecac7fa41d7fa221e21392c1ef5c305bb24c045ac29220f04af8ebdacc1c0610876509b175fe2abf0c7c217432e8f72f5d65a0fa4193387fb30aa9b7a1aae77bf09c77eab1527f00f146d732548d824fd0d259160c75d49a9abc542dcaf5549a1ad2a63d35bf9931d80369f6573caf6491c12c8cf5d37f2963e32938a15ebd85bfd6ca75db6e04f7daab517a5acdc8fd5ad4748e1362dab5901d2c0d48a3804280b55b2083f735038682e9f238a9ada1403037c5e428297d3e516555903f604d7a214c98142886fccb30d48562030d4b06a74d201166765f58aeb0cd1b8bf7a806776f22ab895f96c9c6a2b9caf87e89e0c864a6908a2ba7bea06447e9da2dbc1d1b4f42338d8856b2c70672cf11f21f7300d0fa3e4e8d15f2c0708e7c1c8d11cfc849c7908cdb99c6ed4341a6996b305d494c6fb44ab118ddb74f356847a962dbb96a19e40f03df7ff14240985a77b2ce5cecaa85312c159a984cfbd070951c53373ac120c3fdcf781de959c3c57f9f3b0076da5acfdb0c9894a7fc85e8eac305d074849667bee9f601bf42765adb92b7c0f8a7dbda36450b928deaafdbc427c3d34b75bdf7e2aa37dea6be738badc63f77137234d6888a5724021ed6f93c21a8386a7648b3d86cae3936f118f91f20067c8fd55665419d0669d7d087557528b16b7f5b6b33fc9b08584eb5a82aca312f030078738c115aa32ee1b8a0c2313dace8376acafe25d6a9c113d7b1059a80e755768c43f2d0c5f490d581dad2856af506c4426d10a7d872d6f206818b5dee451a5de6325c3470453490447db43d71944c908af7789b5bd198558bffb6a2783f019eb4a941f19da581897b9b8b02637b3a2693548f2456cdb45ad032e3b906acf2755de8bdeadbe6090a23f62c67ad58106f31c00ca0a2e50350c4ee199e19f6c82e4eb36b33a61ac10ee80870966a3abe1a52639e201dabe8b1bdec3cc4702e8272a92f322ce5a06c9e07934103824de36b99582d64e2bd90db0016ba00262c2a382d0a7c6ff3004d78ec1a87312bf3c9b43faa32ddea35deb93333e5c0d0d471ace67b46cd67055b2720e075e96da61c22b140280a5397f2f10e76157ff48312cf2f06a93264857a772f97d937591b1a02f28ba5eb1afd9a6a274d13f3ae9cd0e637e6dea8b3958b2925fc8379288e1888470e0ba9d2cfdc389d235211b4afabcd6be7fc1081935871c3f4b2d361d884063ddc18ba81d54ffd8fcef4c2849f52c4aceac1fe2d1bf9603b107f92c13176ca7ab6137701d9a5f8b90a30a7dfd4cc077bc7ab86f09186f5d2ea4f0134e0f40ec94b0b5ce449d1b677336b7f23b9f11190e32c0dd417e8a106412a990db86ad5fef4fd1c3ceb17afa4cff9a860a523804e6b65fedf25b814196daa397505bc1571264eac6931c27a41f07d4a8af40e0778c0d38629e7a859178bba765f853d8a390519744947800a8a4cd16324a5217b75fb411020b35fcb88c4e80ffe3a9687c787b21ad53b7006c2d14e150fbc89f6f4473a30032dd72558d6df7dfc699f59ac62a6b2a903a7e7f9648bc760c67e7a2af8a3d381e3e80ceb9dcdcfd107bab148368c9652bd7e5774060379b018b7d452dc894933296f7c381b3aa3e45601e4692d37aa2f20f554199720694bcefdd550a3ca5ffd6234b39a6bb93818dd94c901214dc490fca6138dd8533f8f6ac5ecf2490d6e76db492b162f747a1de7b594cd6d3b7dce58ccd3fb2131611533b3000386fa6a32a0de268d7f951d409439db0710b90ef26cfaa959a2e2adb4287a767eda569dc68cf88711fdcf8c043be503b68d2c6878a73f0acda8001cb0f5ddbe547e6b020405989d1e10b631968be5585a65a3b5e4ff2496474de3387be178d251ae2a92f039a49104b447b3c66bb7f8dce73e072f8a33f8a8119d257484274e200730bd9f58a5aec583eab55496b48c03ee9da4f15e8df4b9e02ac73fca099ff7080008c0123e98fb94b7d7f2ec18ffd15a314c11800cfe5d183e6049dd66c4936c2ce7242284fba29492ccec40dacad6a5c106e926c066cb9fe10cd7bc4a577872628ffcc0adc7dcea36a1ad0c37768f231a4fa7bf9ecf6473e6cfec0e32e3bf49361fb3bc765360650781303c777f345e43a2b8592945fb807944be5af4e469d31b68d26c3100a060f41419beac4253dbb8fcf5763818a7b80bd106697d9b503e8c0b9e5e34f31e1398ab032016744319234bbe9a5361f06eaca46630caee7c797e53fe89797af1befbecbe2ab72adb3aace8f9ddb504bb665a84a6eef0cb5815396fb0fac0d3bd7c8f0737213a8c13aff12e6efb0c0311bf324656a9ab1db51d713ff5a8bf546feafaff6e4b48d2df7b423ecf4bfbdc642ff785396ef8ecc80fde2270e4e524d12e78f46b1d7d46883d6c58beaa0539b28d55c0883fefa13613c6ed510b8293085eb3a37df90d08818326210f6b05ac18218a20638355825b9d3a1d53cf15fcedc78aab22fbcc7ce1891485f4e64b1f1c19d5c0042121c3c463a348ce3033602847defa7650a352447759fbfa391e6e46c40de83f96369085bad8fc4fb91adf7f3209a73ea868c7c0438d543665fc41bcb6281191a08dac4b8c52171bdda737208fc968e90884ca1345b10bbe2737606556b822dbe50273e27214f4a6ce3275f28c98f11d0e1dabf719de3ada61f4c0de41b0add281b9354c5f5ae450b6d9845f96123b53fe48716bfe1c8c9088616e94eeaa641d0ac5044eb1db0394374a7ece3b1a4e57bce3f520372677a25ecfe827460a77ad3f58abeed54e3fac327016ba066001116989aed9cc6416b93d1ae9c528d56473f0f55a225271d755f563bcdc1fb6abb183af18c025603dbb6130167a365cd4f0c292c2beaba51b31472c686c8436f3adfc47940658ac2423a998671cc9698b63cbe6426d5536d6c1147e2b4ad755c78b40003b0a2b44550e7a6ed03d1ad950dd357c8409532bc843f66572c4c1a6cd99ece7f71419f3ac15785a5f8d6349e3c23c4b6363e7a869a1e5a0dd88f7fc76a4612328fc0678f030e39d1375d43861562abd6915e332f398e6ddf0ac566014a8efefcce54a54a0f5fcab943c0d3bd2e5f3f828d62e9092c5e8095527cc82f244d811de79ee418df7d16ea3e15b2afdb1e2d50b574fb11e35b774ffe07063adae14b1eeb634f64fc80429c64c7b55aa3d3c1bfe764fab4e88ddf72f43b7b0a91441a54b9de4bd51f98132a1099976c0526b53df76e9f3becc7eba197b26127b44b491ea862730206a3aea324922a140a7b70955ba90a051876d4d409ad778b0f7102c0b80fe507d1338cbb1d6d32b81769c8ef7ab702394d3b1ff4e92bc815de7bb1cc908e1147d15813e8dcccb899d8346af2df4d2c7d38f9b38c23abe44b291854771040528a98420eb2d5c7f1491b54e2768208cdbb9ae51b6bf09a3db5703bc45aeacd66934097d886795781b57687148123adae809426feee63caf4e59f672b5ae3589d5d8e1b36b9bb1eaa9fb61d14c50e0a39aa22c961df246ef9c601619e95a81640d743b91db957af20d09b929e320bb0612bede3314b08d24abbcedd1c9a792ddf4555edea6d1487d0ca97e85e2f2009e8967cf2b8dff77dd59ee5b7a545ee51c264b61f641d39631d1dd73f0b60d1847bf5b31bf273f5c9689f64a33763988ca80ed9c6598876002f1706d4efe9ed0b3127826fea4d965b9f72eebe2d6d4ff0e578e2fea3deb30329a65ef04f153eae4820106e355b619133a7d98d4bab03c3e8cd7b082aab0d12382110a41aa178d73d7d61119c7dbef81db7edf0a7bb0f174ea583a6df848b0c95a676d12d72ff45cab129fb91b9c55cfab17372412cd8eb4b376955cb1abae26cf9318147269a157c6336fe26dc35665a96c9dc22c2327684bca542205b125e94c96bfdb8c249cc255ce99d026944c6018c28801840e003ec6fb05a3917a47f8f83e4b13a680001c9838fbbaf0d21747336035b85e0e519df81ccc219fd3d087375269df943879174aad9468fdee1e820d49cefc58d1ec562247cb9043787a9ed13dac94a490e19e01b888f82ac799961e726af9e2dd2ebf5d455f2691f4e463dd7e0e1a913266c826ee0915d85025433214c49cc68bfed740061f450c58f92bbaa9d7e1e507408a95bbee99de471675a465253a92361ee5d891bc936d60380bc8f8c2306c9d4a92a742989d1354ab6b24172567f586f012a9be889a369a9dcb012bcb9d35c4ee8476ce0b72161673e78fa91553b4a3fdee382cf6f7369d7908f04f026650217f7771ca615141a0793cc4f33c8c3abda7e4fb9633897930855289c5dedf4d0dba979856fff8acfab6b4732bc3c31bcfdf0a66f883c1ec7559576a7537c1b54df72c9ec09b725d2a4c187209fef33e37d2151917cce2a47bf83d1d05316738488bc786a53ee9d840aa532d02bc5230a43cc040420a8d8fda7970a9046609b9bdc3375fe008054f9db70b97d2c00ea671e66f9204c4aad5e60da7fff71ea567a91cee199f366c5342ae60efd0273c82b81388bc44be9690b4dd6dec9dc96427e46e7e276c7cfcd377a78918276ec36ae6d9802f3f0347e72b338122eb48a2580e51a5af3ee66a390f5698594d0887326749d32ec7e8eb1ce44075a9e46f2cb95ecf493bdeaa0edcc0f92bed0ef36960d1c270dc1d913c0c628c150888ab66a30ca7ea5e9835834c864ba212a62790df51f6e78b9ed50cf11bd82b06a81fde39296941d7d14a62cc45486bf5c781eadfe386bcf1a8f0af657ee2bc0fe326da6b68e7a265208c652b37c4ae0733a4327cc0c3e6bee0ce6491e84b70f2184d1e39f1de803adabb966680ca70a4ebf8ba9f7b6981247603cadce8716bd1e93f150e5b89d76d2bf0a10ce306ee57dfd28f73316e6898ea6ffa1cf45de8c19cb4a7c6af581dcffedfca8f7e6894f0dc02ca4a85a279b6d4335cfcdb712aa96312184b4004ec8c9c08572a6e5e4cb0d26f4d2fd80e01d95cd3fd2bac96aa75ac7b1b480fc8ca9ed6e05eb40631eabd9834b309fd4d3a4e5c6d4e3e437860819ee85ef487b7ecabc5368860225473d6a323cf41c1eafcdb4de6a321fc18230a50c0f48fd580c645dedec902f5dbbb984536e084af9052c66cdcd8f4335967106d5b235a730813d3625c1f8986aa3bbdf12937ad5b17e1145a35baad5a0e61b0eeaf93f818c4307fc0a5a1f8e9d495d8253520652259dde74d177517a895f0ef25d2c0f0993d7a7729edf2bf47cbc83f9218a12ec97445f0ea5f027e29b26f74ad3e4f8a67a3d50b51c1605ae03287efc82b45d8706f72526ada828227ec7093ce6ee9e15ec9cefbd0c5f7409e5261a7afb8f39ddc2cb0d8509897b873263b4d3aa5e026ce5a2c9f188915bdccf6d47a808d578d0a1179d3f055a19d934fb997dff15206dd4f070082dedb5a62b8275eb5513c4859f308cad7a6ce763e231e97e12804e7879159a43a8aa1fd53ec263c361488e2e878758c24303882f61a706a4982396c5336f17df17d94aeecc254132db9b97c48f5e3224891bec561e1c35e04e5fbfa45e3877a12b1cfef123e1d56f6ddf74fc3a274ca4272d135269ab1075f03737de2783674639052478112ca4a3b205382a9125e640f00c22b7b58a191022c7a9d11576379765abf301f9b3615db248675bf407702d17ca4b4ddad22d78bfd99c5e5dece579f812936e409c32d845d0815a4840c3f06d1ca43e7856bee8881fbda144049fe74d05bf5d334935c5dd853a96fa748e235cf1db9cdfa8586ca10ece8654bd364519f80335c2e7ca46926a6eedfc33607855884b9d2ce45efae1ba2de8abbb903bde1cb0248a09714807d27fbf5d72e3a9f2c31de9f50f64dfd9308ca2f8ab1e00b1d43058c8764fba2ae3829c558e30655857646aa27f69cbb378c628f3bf426749d03de616c1d2c25f097d162b169e9395b7973c4e36896333621521ecbee23a070831c835ab740e8794f18ba7419295b0158dfe31b8355e35786e218e4ae2b23e87906b6ea56ea2712d82fc7391740566b08d2595de21de980d82429f7c460e8692451b9d55ceebeb9be50231b3b6422de0cec55cbc63ac8c91cb44fb7c89d44acc3f383c66949b73fa0782c3c94b0c7814887a7cbe7f9d360e8b11b71f81b74cf020e044379e55a798ca3785ef229d3ad162ff6b99b38ee2c4097d6e03901eb90c411d046a37e632fbebacd230eb09ebde7ea1b4ae039819f780f6ace69d5e2f3cc9c172c084fd2e49bf3168ad1531762a4a4ca8288e0706d229b8c57d2a83e3019f0e6886ba5887f00ecb5b42adc478a6a0f66221894ad60dd6d03d40f273feea9b2bf6a7578f76d267ce05df3d1adce0976389c93a9241c2b59eeb61029396987354efd8e0e843d2cfac0406f88cb44167d13cd9318bd4953cf9a923ddbc812b46c48759c217cdba36d787cdab214a88ce45690f03da3f81913a769b6216e142926ea7bbb007c02dd34802b310c0fbd6dc4fec43110921b8f9bc57d62dc384e525236f8877f297cf7f26ea4de3a1d81d854134befd667217e9ce327a0ae3eb63b4fcfa8c43199b9d8196d1fc73e5882bfb95ed9962f623920957c87f5f29c06d65d25cd7e54319ec07e1d265b2350ef6b9505c147e24801fe583932111a9a4689fdbc4b2079c6c59b790bc7ab4a6c4eecef1664414f139fb37cbbcc874cc9bcb5e0134d672b68ee6417a636e832c3d14598b80d07b642e5a399c89df45def03dd7c423eae6c378443d4888815405e801d75a1b513a366e8a27e22b9d43be6265232ee29575de8eba82054ad0b433180d34a7abea6affedcff790bb819111b481f5721f863ae3e750be636a61e6920f747f71b1115ea3375b64b3f26de52cfd60c59d029935d1329a49e18725c952ecc84d3b15bb54501acea316fc88fdb06c3e5c6ea4242330fd11ef08999a11ab9a84e08936669d93b849dd30f17e73d9c51116203e762d9e1da442784e7b466b4bac6df1e9a3f2b7808caff73de34a67d442ffab1b848fe49df8a90fabaccbeb6f82b83d88ca7cd007e8e680669abcef62b2433f4a7bdcf75b75422ce7caa85f7ed1e42c97a528d790ea82d3a36f880ce016253be9fe4ca59c9640a8f718d80b3424b25a7471ab396ab8ed4b456cf31022881eacd72bba8be61943ea703504364a6262d7ca59666b0c3b2c0eb6129638fe7d69d8f14c854f168d1d1a374c309808001ae058f47f502d5b61bf42590abe0d488d0ec21bd1f0eb242c2555eeaf8635218f12b23272040b8caf18128c2e16da5aa52ebad88f6b515a092b9e8935e35dcce4edcb4199bb6b2f3737bad9dacaff2108261be2016c620c177b3d983a37ce8f08ba8954ac2583d345da4fa6aec25b421249edb78a8128b0d58328ab039121bcadc86b82646882112938a0f2833899675e82d4a5434893a1a67f4f1c124504db96928582802d2f3761652eb0cb9171fe30009cfcfd365738a1e8a38f7b1777d4f08815ac65ed30027f618777fdc61cfbd3bd146f37223e90ca3c13c550a0a20ed399fb9cf8e488180aa2e45b2917bf6e82af95bfaac6a39259177bdf3fe70df09f6f805bf11710a0831b30fe903d689f0378b89ee562a54505df8f12be70c642d429f05ba7bcb4b98a05692bb4d4818f60ade4916246fc2f59d177c237fc3ad2c6bf85e9e4c0ae2c34423deeb7b5f61826fbd6b50da8938cbc5fb72a4dc66e09c0044c0cf0da89feca736dba81a27018ec9170f4a85f6454cef6d66ae6f9d77b0e27dcdcfbf780bc47ec6b8ff5ca9c7f43756899533a5e73c0dda2dc07e850a0ff9c9b7454177279ef4f4a430b9ede2e2baa1b145a6292eb43a0f2dd477cd17beb329e71b3ea18545b8a7d1ec889a3424f396852df8751d38c064c4d6d40638ea5af49b2d0e246e37a70b8e0e3bb5f5ef8d6d15c230c7ea3f25856b1536b2a959572f8e944271e95e177ca6ee8557ce12aa6a34752a15873a51a300980b9485970e68779d05fe4e64ec9b002a2bee46efcc69a569cb4ca12c994f406e1f56a5d4e3ccfe2af5e5d41e27d6ec308a1a537f8911a59b209aa2b6a8ea65c0a97e180ca66ff59596d784f74d206633eb8e7780f004ef6d78540819a7aae82fcbd18ed44156478cdc4d13d1b9df99a85cacd92b4288c00f93803bc368ba91eaf61ffeb04d3951f6bb54fa708f4ecdb429839e9093d675a21c93711ea54f88f89e21ebc3b0d56058e3cc5473d9c90534e7c34c554df51a475ff8a0dc12cc6dd934d9fff99cfc72be7603534512b950ea31f005ecf397595d07a4c6205e1ca43fd9006dc4bd18374311b50cca5914322d442020c189ade87276ad4702cda62d2ac0d3fc9c6f18c3bab49a8ea96e166480457e07509d278914791b52079fd0d351a1e6ab786ffbea4a1113379586eb007acfdf53dfe043feb52c7fe4e66124b98bb7d59966b61480c8b13c0a63f260b0432d573f9c5f443d5b4bf52070cf87724946ef1e532542e3009c6284b8333cbbc3be3fe76eb53d1f4dbac9831a06b7d72a668cfa63fcf6b4c4e095210e87c9ccb9358c667d49625fbff564b482ce3b5cb941250cbe3d831bc4079cebe3b2a98136b07689f2c36ebcd94fe5275871f82d90b3593a4b447b080818a7d945e8826df2bad15ff3dc5dc8603e8c61a388ed9250c7c9d102961c9389e88d8495ec9ca4245f59fb6ec2cf7ee0bf0374e5573d20a7fe8c4bfe34a429f02e39e4eae6a8cca865a146e502863992dd5bf9d553bf2de793ad32a58960a3632896fe32300a1b16bbcebd6b5685b684efa5eab74eece3edad8aedfbd538c460df7a31d001d09761d559b4d45f9654512a32521da08e69a6c2e99728d928f6a0dea416f78aa43e69e2b8bd4075020e04827bf0074bb6409f5b8153d2916a27b6c9b64d5a5c58cd8a899fd5ac2e747fd6bc226a0d5b1bf5d34f436e1ff38a82314ec07f0c64d73b689d79858812ab97cfaaacb9ca71cb63e8ade0a2b3c823d4cd04b27c7fae2e85c76d3bea0c9d3e564f6acb9fdcc64d35a0093a06d6c985971f31ac336c7f109208240186da6e7f0688172909d915dca7e1a416bd8cdfea723ff553d36ae697f2845675bd608e67202949eca8bbea5de9fc63d05e1f478583820425fbeefcc15bf9b0def91c4116f911e18c28f9c192b1622bc891bbbbc28d0eaa5073116b60d95ed26ad4843c8879d2a0736e88a79b101b3c91b41bf4a725597ebbf1dc9052a3d3f3c2c87f0b5b0d6bf6eb8ab8eae7b172937e45a2d8e6d148fd7f0e960428ae1c28de5a3ace51cd314dd5e341fce08b7ecef40fa0f734f3a2a0c40b7f4c31169ec3bc77c6d2316658d81d5fb1d7777f9ed53ed9ad7b2c4b9b36a50c2f5e68d733001490384d4121ff7f0dfb7940a0dfdb70a02e1910cc9161b8f0aa92ffd099a128cce203ee15953e8075fb85707e2b450cb77d9270d46c651d15786d7ad9c158f93f94c9281b981e357ce223f0241b9d1e39d715acd47de5878c8e39d67696c8b7a0c43bc1a0e66a38b574552bece7f1ac35ddd775c4be829dcf62466ada3ae7f95196da4a1eaa3e306b7a9698261f56ee668b3181ec15a9fb00f2446cda51af947b9eb5c86e5a56e185a627c0821667543e06385447e6cfcfdc3358ee55d8e073f7de1c1ce73f52372ad047c8752982f8795e6aad50bc9d45d20b6196bbb1c7a50915c01583cc2251ff0ca37711e4a7b5b0221b63bc7cd684bcbc7cacf0679c7e6225118550abab06f6dad593becf3c5f5202de5248d0f47893657537ac0073e5a781bccc8f004d4943f5786e5d1a91695c4ad7a8c0560ca20383fef0e8696f5f55db9862678662255b6d924a29916317178ffe3394eed34b2dd5387ff98b706be07039d1d98687f506b2e647cc2428142f01d2943fabe8d0aec59e4d20718fa768ad4b2287f8f3043ca9e86d4111f0fd8858e45b7d50bcbbec86046cd52ce56ea09fb9a9c4dbf0614a47a134ae7039f193abfe3c0c57781e69115b40dde70c8d10a669cbc95a8c091cea71bcda783c237742aba5157e27227c036ffd1d098d02b779b912cd7bc0cfdc7f1bef62c4967a171c1ea84ad5946d594976c2814bcb4cb6a8857078fddd90ce985ef9ad949673e3793824107ff6878e43bda0052a34eb48d9c1514a66d1568d4f5a4912dc2eed64da5fbeefe3075c08d74cc8f25e051b65d2fe8dcdfa03d2f05cee3d475244815b0f408f662ab9e773785b1e0dfc0aa0ae90f7d3e57dccb532281494de4ff4a8cb760311201ba2b56eb268a4013a5c953d5b2bc9d94d71f7a66b72f61683cc6f1ca113dea2513b0bd1c129d5023b368333c5e0eef382e6b129b440f194fbf3557897d3a49b4179adc3a322d0df8f91b2445ef0c0de717db6256470414a24a5cd2a4f01c100ae4a4dc8ac50b7050a2ca986184364a0975fe66463cd386af81dbf610b0e4adf187eb9b7ea16542cf601ff309c24758bd4a5ab63829fdeb810790436f6b3c36178567171e3843d944682ac2c43d3af0bdb460ec1d2371cdeaf9ab4fe74b01b008ba8ac5d676c5689e34a5d790d5436ef7ab05668a2ae7f03a8f8da4f3330c69dfebb3e07b1fa210b95a785d9bb4bd42f3ec1b2f45e1923c4e6ba1ade527e069f0a858e1e0d84b12fbcdcc87b3f08b4da0ba7e32f6027132520fb87f7a10c672d35c0ddedbc4aad06264409eac5e3db16e4e86f02565c82c9910a37a060fb6635cecb73d6d7d398c975534066ba5682a11ddb60546c4e69aa623674a81a1b4a5bb5ee46d743d243d0e6338797fde9b54cb191cffd8b558a096a3fe44d623a6b5e1d2d09c680fbc4ef550d304387b160665fc54768e7cb04a6bde3c579102f994c767e77469fc66f418bb701976322d88a3f5a2a9f01a8e6c2345c68c266f299f019a6a2bb0c3fa6c0b6b9aa14d798b9504987b175d91fccdee2fb520eb8cc1a1414476b6fa6b98bc377c4f670c92f1617dc7f5321d1f5a420b51db67ec484c1d08bee598c9905a759f0f88842f637a3733b783005f50b45fec19e81fb84c525f7c94941f05f8eb5348f49faf0e91806c56fd8ad86391134a3d04b56d9573e804d0b16f96111402e92172b93d3140fc6083c28d416c977c60108a253e327e288e0988d2e1039c338977d0df74d4cac3a2ca1f95aa07bb6aecf309b134053f887f66ea9e3317d478b475869714a91172f99ec662805369abb117688548b63d82fa2495ed9547d30720ab54866d3b95b94898f6492d530ad2a93dff159083865deb1cdd7c5675e804d87bc0d358c4eaf895745bc636cd5043511b9b09a200921e9694302c62c9554571e492acb221fd6dbd90e943706ac55140da83bd035c57417682d6858c47b21eae3fd5662883c1c7a154b52404e04b8b537c346111fb10fa3237ac7289488685f78b01878639ac2c74daef601ae5fdecf3e37e55dc8c648d47e7ec91373a53029165d05a9904b8972e92707b863d99b6c8d890b185412af420e533696cbe9cfa9d3433529ef20901506e37ff1b150ff8186f7c2ae8a8bf5b00f63adca805d69b0b4c461876670d9e7ff52cb2b757505c9789555713a5599c3647009b5a0175b1a0cbf277e6ffc3758668a597cc7e83574777fdebf09187811baf70ec0b138ede62872f98010dd46fc7860c985f514a433c80d4d204fc187f193414e9975cb6c9f63dd9b85abc39f24e94bd03038be6d3b4c1ed5b753de92d5e427291e2a1ccb15fd6040ac22a06185eda3316484bc963da2a02593739fc573f708b096cd0983cc7e7f6a8abf34382031732f4b184f3466afde1d0c06bb09c51f54325cb440f3fd739399ec3c571bc0fcdc75c48af62e0b7a346237e47865dd86c4fe6c3baa696ec6c7463e3b4a6f0c70faec0922372fb0b2a0052eb0f471b120b0d34100852b9d6176a9ea869dad6eeac9bb4211449eac9384861094b8a66c6e77325c97b28e4b41b9e039335e647429c15cd7732cd6269a39150f8fba4480d9ebb2c617d35ebb4c1ff3efc85f17f073a80c0cdd197869bde3efe83fa6e84487e6e919a0966384b3a52b12b0fa87de0ded99b986aeb02511aceebe85a1ae80487c2097939eb93a138e98a6feac34c7f7b4579bbbe0b813f94f489d0c8573ade8c6759bd39340503bf2d679882409945424914fb3dd146c4daa963ddbb66d44243c38dbdfbae545e105a4cdee36df9d559d47e6d7bcac17780a9df34a0301d1a22d169857a4258ed0885d45f5ca48b6f414566c2949cea9b17ad91e4fa5962c6626e47df71598fa2245324fb884be68def0ecab0769e03b8e824015add5d9a310856d9afdaf694934707a7bf7b1e6d991537aac398e11be03f8520a989578bfe8717afe6cd904c593f46d838199164b593428176a210d2940850c3b290daae510942d27c0481c365596f0948dddd8390a6939a6d5b2f04fee8305e92fa06e17ae0edceb930c1922b6b96c32e08bb9ecfbc0337bf0937dbb65bcf3fe83f89ff97ed350c5d69dc7a6a1472a11e7bf6384694aea3a9325f7f8f2b86844aee1bd80d85206b6f36a05ffabb0083929cb4b9493c088c552a3c538d63f3ed843804a5a1b7829624e22a7f3ba353f112bdc2c171e24bd60d19556c55bce448e9b3ec91712cd1059624e8c619365dfac7afe8af004367a1a10164bc7516aa9cefca0c558772d5222ce8a4af505dc07637aa199b12bc00d574ba599745ee3a243b799b5020c2d2ccfb943cb950a03396333f9f4fc0cc0d91af1b5960ba9e7c833ebe9f3ad26129a93e467e2fdff7e3ad2a3a12b11ab687eda8a51f7441087762869886f224be1a1495caaac2358655fc1dd63d7297619341c7458c7e058607ce82900b3885c47ec453fe4e310f4b1e5c1a387e55c1a70b549e472356ebd304a2416b67485320846e2248b5425fe3048a774aec8f122cba863bd08a388a2ce6e8b2958639e4d2ee8e697fc002f753adfdb70bfef12dca8af49247e99d0ce130132cc722e3519bcecb7320a2232ea96adef4eaeaa92773ba2ef2b0e68df0940d2c7133ee725687fcce76dda9669aa20aaa5f21ed272cdc97eb7402a54417e1fabe65466ae29c78b10cae0f8a3a565e8e18270cff69d5fa6671c78c99b01f46a3f6224a017793a2ab169ea2b5187d305028a77ec2867ff1fde7776545332d91d6dc550c9a40336f10be7c50107d1f65d8edfa2947095bb4a2ea1cfde3a07daf0a83817f4b320b194a2bed4f19fdac2557c114259cc58d1e136ca0f7bf713c46242ad45f4e20d3b75e385e597fdc25aa82987b3e276bdc88ce5fff87969d223aa536b31aa91520309ef6ceb46de1f60724cb6f4e8d2b778b926c9a7e094e2e1b23e6de6e82a21a101094c529a5b96c8497eb057dd7a09bc693bea7cf7e48660cac79da88504be8086d19a1aa09ca73a2c437f98246ab84c99c46f3d46fc503ab8cd1b9a212958c2e03b251a2daaf981763fd8ece5160d68ed31be5ca5db9adeed88c8b5f43875e988ee3d871b1976c9dca07224e2e7384afe6a71869e98d5feb2faa32a8e5656fd43c9f757bbf420bec5a241c184fcd1cc964130a3d129f81701750a36d1742bc2518649fbe27d889658dd3c794d08eb928c9dcfdadb8b0c95f554652dec075555fc7fbb5f604a3c039a49c36fc25f5946640ac29bdc02f1eec96bc8b45ef7ca9b224d39bcdc20a55ab3ef1c658c5fee19c4923ff3d10e71fc1f80d015d1637a4d8dbea9ff758652ff08fbf3b87435dc8e5baf9358df03bb1c8d3b8c62182681b6fc0b90f8a46f93462cb18358df2ef5189b9d4d17638136adf0ea33d6b3b26d7f6f16f42680477300f710a64be382456bf8521ac256baba067e3d58dbe84dc56b96320cfad050ef6e4ac3b2482af0580f12dccef285959e37430ba0bc0537a651329bddba3e619f803eb901bf15a47eabb16783b0150e76cc0c1aba0cd2443c199d6547bad0bb3a59cd7dc27868a72fb084ab5824765f3a459ff1e9e549adb4c8f9a11e5038baf25aff8339553ae1b37b67f8d14243468e6fdab16349b666ff4e387dce5f007fab26f0822f4ac4373510a94eb5fa3a2b866fd18235a8a0898e87cdc3040a6e6c7c4fc5e9393a6345b7e7ed4291f5d87c15b6f002b405f019b3b1735b9fff0dd8482a41eff09f08fe30ac6411434ca7e0d6be5e1564eff53cf57cd69691184bb9e16302bb263f6167c295600b62a2bf4e44e96af4695ee991e87a366b1c16d3e8a1cf84d8352550786cb5c7a59872297bf6d73b1f12918a7675354d40760922236094336e49009e3003173a9e2877cfeacf5afc982e11e07a307ff7713a2b815e3a07edf526e8e916a4b0c28ebc656ff1e2919605482a74e9fc4c5a0f2cd154d5ad31fd808d397309f3cb2efa8f9cdeed3ae8cae5558c764f38f6566ab05a091ee98353e3c6869b22c0abf98d21ff5f1d47f25edbb17d96d3e5f1d919524e73219f431c32fbd67fd2588fd60f9de9da3aab3cd9728786096096727b6c99482895950be11c779e337986f66bba48979dfc5fbcbfda4e441d838ebe64dc07cef4b6ebedff104b5d0a831b6853fa336331dddca1f4a1b8cd8afc11dc24dbe1c55dfcbbcbc76aa8c3584237361c972e8afc0dd46968d313d137296b41f19958d5288a8ed8f261553d618e7948675ed820ba6919684f4a417373a74ab10e896b7517e7e76f7b700e017150435de761d743848d39d4f8aa238b29c919c67347958a1e74c6ed0d835d13eb2dbb32336ce99555c4f27ca5c1285cd26073286516e7b3351c1b2b40dbdbb3c57c9006e87f4d20484783dc595c41c45417e45927f83cb31e708277176201dcaf2eb46a9d947e2b57086294dd834967b2eacc6d34b3b2b2dd7415c5756ac53637660f8b3b44ea90992621f2953ec2fce39b0f10a24f886187008f4eb42edfacfdd040672026c253d2ba973300f8b5fbe8cb69727f3e887b32ad5e68ac7e95fb8ee40dd4eb230dea87efb241bb1d493250e64040d66ac9bcfbd462cfaf39f589e357bc038d86051eb84e2a119409b5222aa637215729a4d32fffc10b7d5ad0cb5c772b3b9d1dc88341a4faf96361c611b8e6663f9161f73254bda73c4bed367deb8fbc2ff9df508ddafbe5a6aed790a885c2a4a755b2b4302f5cd3f338a4cc5288c42b444fc865d82c80511e02c2830eec5f0e125780a85527e2a32fb2923e025ebebe827292cd584bc48ff2a24e80b1145e78e496e80321a485f923a04caa2a50ad06c5d6c3744ef08329cedae4ca2039f82ecdf92879c3b6eed5772cfd57a7dae688547730039914aceba4a9e1cd602c32cf12e66bf8924988b8dc1f335a7c6eab779419dbe18cc4175049f693ac73300d5ead5b0e4d8a8a4a0424d6a9e155b3918bf8b96719d4f1c86b4585ae02803d1bb597f70c6c41c9ff282fc4c9aa0eaff98ccca85969363e44d3f4bb36bfe46fe290b89b1bc3b223fdf0eb4081133f29030ce1f5eb549ff66f07beb42bf216ddc74e0b836fdc9c9e7ee1dd91305fabd69e010fd6652584e81361b1e3bc6fde5c0bebc1f5f387eefb371bbde6579ced3c9a27ab337e9b06611fea582428cdfe122f83f6dcadcc0970c93d0a1188a0ae1cc624352598570010c595bb5392050fa98a660ab61d910e148bbfb77519f00b06ed4e7bf22b1216b00d48ff7ece5196030e56477d8fd7f3987db8e513f897347e78ad9067e96c74228b1a0d5a839e55168af80eaa8e46b161e5d93b732e913adfbf514188243b72d64c3e12d22d1d498cd16ffa13aac07a4cf2da2633297b9b198300d67a1be6073a92b80d3595c457abc9a450f24773404ac874010fa946a6f7ed76a83b8c06b15eff98191b69e208a032949923f4f54441d4376b41a6eb1104dfa28a827b28fa746278c5448d94e70ac8ab1e1efbcfe15b438698898c59f1e2b5426241e24d3499379652b484d64c7231e478af4d47f183e7b46063a7d9ec21ad637a15734344fe21d847e625c7233363d2421c97d9a310c3f19b5a20183c40879dc7e75c3bb9b4a8a490e7260437ddbedd19d5af406ce45ce56c1d5aa4dd84c838f976f9bea6047d29e4b1f5fec3c58d36ac7d733561866e82caef7a2f87330b7e6ef1ed9735a2d37a2725c4f7bcdaf0583680fbf39f7ff176b4dd2bd794f808b3f77dc222a51faac0245cd81e7a7a1dffa32fcba99f5e1322eaaa6a709a42c6000c2f450df563f83121d9508707aa04e44af1ee6187cd51348a3aac520c587f32d1328be8aac0acf310d8f779736342f7da4c60b804dd9369d27b7a167a04ee715fe07acbc064500304c0bc86b41caadc93490a4a31920a8ac40318f5e93561ed4da424210b4052b33364f5831d9ed2c444af7de2f597c03fb3c33352f75525ab5a13a7c956209fbc9849060923d4b25c76a5abd5a6157710a51ee45bff7404eef95dce75f9f94a6eeccdef87a763a045e8d0bab35b1339f1daaf1cbed57e4a858e7290b055b4b116248fb02481934ea263002266337daf53996951a6890f8f4dedeb4a60136c0294a787114584b7f74091465850e58f44e2ea7abe11c419280da843423e78ce0ac74b83fd1ec77a51330c7e661fe5633a977b188df70b37023da1e5e3b73deb17d4720add96e7dccdee63c42b265b9bcee757357c4070d49b5da4122da1b696f6423f4ea60b311e4020bb0cdab1326bcbcc04ac5d4d25f5ca1ce93709f2c21e12ce94c190991bd167561fa68685c15918f265d22b3cd3cf0be90b428cd3b2ce5cc779da18a9b4ac25aa2b022631ff1fd13a562781c69c765e26f52314894e49fb67d4dbd636ca8ba70fc54c2f333ebfbfa4cc2d2faf7b54a9ea1836cdae11a907a80af640ac9e8c6a8a34b055ea614a6ed890a83ee67bb14e5541363ef889c645ee304e2d41e703fd4076ce0b71358423f4f64ce206d7a5f6af251b56a31f4b9eed99d30c393cbbb55e3707ca357ee324f13cec441dad3a594faf5abd3834455b0098eefef6485eee44c1a574470e9d6e2f2b9a427b7d44d08fdabe0c832c631a6f535db3f2ef6016b47958ffc09c1a70a48dccee931a2232526e4b25056e9c132ebf7319ed1122895d5ae47c079d8ee0a094ced3d748fca0d874d358536c1e462f20b5fc44855d76a3abe64eca400b8934e66a14ef794d3c815c6a93218596bc885c6fcabb720859ab26ea36cba81796869459a2123cae548a8f129a5aed02182663d21b808e88add9335f6440377614e0c214606dca3ce2206d9d3cddd332f983393b8328029429ea00b9142d01476008e481aee3aaded49981bca064bf4cbaa1f2e447d56331b34563adc256b758afcf9a22e363c60dd905a61dbe2d1a2a4dcd603dd1f90edf441b9431aee09c229a9cc3dd19396424355db824edb14a1d9a390abd4dc6cf55b6ebb630bbb488258f42a59767a2840cc4570d7f9b3e51a69bc97543cbb20bdacd12d7c6218b50e207a99fd401612bcbf66b5b14f54cb84fe74e28e3d4014c2bc15a17099db43ffce061a3a99cab5bf535384aeee26d067d7da580b3384d5b7b85f9c00a4e86c03ad488b169605b8c4dbd506cbab0116b0e3ebb19c4e39b6278dff0102e39aec01fe67ecc8bbe9fc9bfeb0214adab463a827d897e8bea8ad29d3cdb4d77607ac15b3711c97fcbe6346a06a7fb37cff9869ad601d1ab4411e20ac95158ed9accae3eb7500f5598b2bbc92c16a0bd23af8c9ecec652289f93f13a04f315d3436227d042912c321cc14fc348c3b791644ca7e5f7b5aed577a3d70fc633e2b84cadf7547d0c12b73627bf815b777c1b93e3cc671bfd3c0bf168dd5326ec0cfb9e616722388272021c5414f78044dddd59b7199968a188270fa016277f17f9deb588cafc35cc5cb32eec8194e22f65bf84edfc0e85f186dd7425c80eedb86e365246533f058fdb560f904a34a5ffde91be2d9869e5e876812a657763ef27f41bb97775f96b050997958a0e4b44b108997bbcef9f3f5079eadaaab9d87d28cfbbc650e65e5de087cf2086b8b2fa2dc29b252882c7bcec5e84b6e7d15104e36460dc64e079f2c0bed5b90a9b1145fa1cc4af842f3c6c2a8f93d79f0ce6010028b5c94c243d14671cfb9da8976278e48c85ed2bcfc5e0578422b26bb28e9ba38d83949cd77b0571bba63dc0586ba84ac92e6c3f14457d9a5972091696566e6216a6b1ee07b0588dccc4c42ed62aef87a4cb010f7775c6c206e506ff371ba9ae2626cf45e143e4d1309848f90967fa1e67ec7c7f208e5f10d4cc983195950f810c8590d89d4561e64a9c5753b1267f93003124ac0c09de2fe86d3b83facdf705e1c257cec08340e752b2b8ecf71eeeb28e835b4045ba433513e4ffccd17aa1c691f6889ebdb139f048568da3430036df1bec8cc465567a1b84745f30e1522678e94e1f173c704ee6a6758bd7bc0062e04131189e921cebdb9ec512dc15ab4a4ea72f855b4ba31365918480620a5da02cc41fecb2bc11db6c7f3b0159fbfd59b50c18c121747c4f39a75cda7b5b65137649d6dd097870ab05413cabd80fa6fd8bddd89da3d16a81e91722cfddc96c57a249c2073a490cf929cfdd8c91f76eefcf3e3d85bf661cfda7f027afee0fdfff3269787a2733f1a36614c929d4ecc6fb344530a7c15a45d56c494809226e068fb364b0baa9736b49ca74522fbfc7e2472f92264eaab72ba159fa72df15a7c971f85c4ef01cdbcaeafa36d8415f05619399af6784469038403ffdf0f60e229b9c306752437fed1dcd4e1a01a677fa88749ca892c28ab125e8b7158c63dc5676a2e8384724d2a074194ef63f894b96959d25a6883555bbd0d2fd3d5d98613ae59bfebf67d565dbeec9437f4747aa580fffbf82e8daca7f3155085dabfec18f97a9bc7ab47d5091420e54b03355a29983543a27001ee9331c68477bfea115378c29758599a5487394a3554b3710a42b32db28897d791da19667b3c74ac7334a276e607a8964338b656ce951407ac74bd66c32338d5201847d014e5fdf6f497517cb1eb0ca727935f3af3dbdc471865da495f5e8af49b5a7d96d72d21850f566d2ebb61bd8d4c5682da728f31b1f4bbd6d79e0454e5ceb0b437886526fe60fabfbe136933a30178597b771ff50af063a3fe6ee386f2c4041ad071de278f7e97b12b5498d6d9bba8ef95dcd05721e4c56cebbac0365f77dbf286dd01341bbd58c73aecb17f7f8dda85bb7c64b11935299c485afc0f331924fa091ebd8bf1e9cc0f58e528765a8c52831bf0a54ca6d0fc394afa89e7c71ed4a001bfd35a4c3be532935ab065b1e02421fda686674784a81fe334f8866ecef5447e6e94b9b63d503fcbfb22d3d7cc78a1c95458e4009b9392fdb2e231332858f7ba1ec6c9b105c9fb351999d29d027bcd8160c823c1688e073d68c9ba8e78ade81f8055f7014296b9c05ab8c5ee870f7c81d09353cd93ea98723c12df0dbb718c6f96907939694fd3ef07992a08b349a1b34f07fb8b0a72973726050941077f5c7446aa74511ebfe0849b167b4a73493e63fa9e04ddaef096908f414c757312c1c1564018d6ec40266706dfe041e1a5d00374aa2acbd9a79067d15e09aa20a10c1b4028988c7973b097a72787afa42cd78d981a0d294d5647f57d57a1edc1bf85eb64e555c8e4492e88d4897852305f7663170fff21911dbc39307db74ed3de3219427545426f3db90b588050afec993feb07dd251d1adfa0cc82704410b997bcfd2aa8bc40186f47cff72c0900d565cbd02177981287b5c313323e26a13139ad2cfc6d6f048422bd7a441f2cc735ec766d3d0a41d7e1828b72e744e06b334938f76c4f46f6b4252f773320d0689d0a21c21b2b282dc0bd3c1e14c1f10a96d51f9b11a827c99917d47ba1ca4d9fc1ebcd8f8cc3f0d329e98a416a12fcadab4c03b488b15c0d588062fe0ce20fda901b84f09c6c8a65065e8a2222c250052c1fd49bfd1735071b0c0cd2703bdd153d712c6139ea07795a5d89b2d7d3ba761c1b66aa2d7285096c9a8e6c814fbd01ddd1e62afb0119fbc0821430cd6d3a2ef9a980fd3794307ab2386ca49f7f116046fda52e62616320dc18b552b228595928b5f9b3a3648dab5bb0926572eb2462e3c3021138d65ec5e9927f8cc5449cdec32793cb9d71270e0b2c8fd59ee482fc8a6a298b970ede60909be20fd65e358f405667ef34ea784e7b441028874a9b2726277842a83f37b1cc49a3acdd13f5af0ed32e32f1aeef0b70754c6fe67159244a25ee8cf1bc8f3cbf0f8bee339742cacb21e230f231cf7a0a088b4161511909eaf89cc68efb10648fe64cb81892b15acaa6de5b180aa8458597f57ca7ac9e382195bbc9616cdca6c63aeaa41275394f6d9901d31232d7e526b4d7ca32a110c53d0197ff0a45014116cf584ad57d0bbc58d489e295f4b85f00781fd174e0b2d1f2cf29f0a07dcd85216691765d9ae352ade1a4da95e9a2fe94d300e72a1d604baae607dd72c4303888b7e81b6f213d6e3fdd6dcab921665dc049dcd62e1ed70a9253cd5f0bbd7329a67f3d6b8e92194be4ed00a50108ca428c0599a80ef2d712dd7409d0def5151368e006070270bf7344fdc6e77b6d302c00b217e06abc08904fd6723c993ac6f0ee70e5f420f9aa2738b3159157a0c0589007ff9e4b7724a7ebc8dfe8f44a3d7d2b1ff6a2a90e44c9d453e3c5ae3d6b554b5a81fea5a65025d41ffe53ceec2486690d7917f1752056db69482a5a8c4b4060ba087f975635ffbeb347bebbdcc9142efebef3e5477aa6152a3547d98c6eea3a54df29aadc520b1f39134aa38defc7601df758a72c92399939206d88fa0a494af6f5f8259d613c9b51ce25326fd0b0598205c4f186aff9b9bfc5cb97892b49ac6d40cae439d8ed93db11033847f02984b2d8c1e9365c593fb80814e93f3adc88157cf1c1b8a0ffbcf0a3708896934d0453551cc5bc7013684dfd20dcd6534fed621feff802067d9831713f593e0374ee82dddff9470de3b0909a5c247876b5d940e9c5357b8a9c7897e1ab9580684c875a7b0f565d0a4e9c61e837fe150e4601f2cb39057bc7ab1c54f1b8ae65fe125c5ad9fb5cf2f7e2def7a45690b5093aa4f3ee342ffb313f9dfa6d6185ea5e153517b0d331d8f8f786db6bfe5105884449ab7f23460fd60eba47a377f606383e7a1b2f08b5ca40601adcbc6e64a4bb5207f8de06c20dc3d6afcc1a5b965cc1add4eb3014b56ec1d6e4231e5b259f35d9ab7ff38a959c841033b2bf784517ff91269605a600a110744ff219e33e02adedd26d4dfeb4488658e38aff457d96f918d14a1cf2d5a734b534c0ab07e2f781e0449a563b5937389e90622c0e7f95fc9c1db3ff883334790b53022466a8ba0477c007bdf0852815a1a45becad216e0bea5df85898964eb5a9b4f4963baf4d1d2420c20d80f1c7106082b16faf3422dc33789e50703cbc6092b121718d2a6f4c6023d8b166c2fa83f1dd930ad83169ec5ff5385da62cafc3dd40ba19312bc738e8e66eeec036a9c89d481a24a825d40a21090e7d1d2caa7dfef2970c205dd83982364f7c7b2b2fedcf98ead489da29a8899bbafd2f49459e94fca01b56b4cd3b21d94b7e441f203ffbe51ecee6ebd5a6ebcac6db77b5e66f7c81c220873b276196e774fdae42826e037ffb88f0287c94f31e28869759883e5206a93093d17e20ed1684c698adf14c1890c622d5e4606dbd284420cba59e655d4197dc1681ac8bfb37b307e79001e585918c8bb06744c8b8721d21f1e7aca233c7eb447d9b74600a4a5f13fc7f3618c0d91ffa484f1f57c344c501b4acf82850b0c650b18afa76c2b67e72502220d798946fef63f778a11d6f9bed9fd60346fab53babaaf5bf2cd42cde222b900b2ff05685741b5d7468a356c8eae31586a94740845f2a3df73ac431373e6e06b9763c7eae6d28f156d5ebbce968777246d178dfa419d024169b603c07843c24e470682a73e045a3b1d276ac44799b155f3d4e81da08446552358000ebb9b7c2a95bd0d63742e60047c518253d271a3e98d47f0a21b7e1fb950dd759d71f02e29031a5bb79cce7ff79c04b4d22b61a4a1f4d83fdab5e74d770ca4e7a9335f23eb8ac5e10bcb73761b1df828044b5b75b2df136d3219f40dade662c8eef724e7a1060466258a33a999d8a5091b50fe7fc426a5eb2ba451bc01c3a271db06403e61af6d3408b2c54ff553664426ae47c014c8d5af72e54a342ad1a5992b13ef2caabc31d82b11b699799508f088f1b1d4d76afd92528400f4bbc754e8c67d4924b17d3b9a5c712fe6d34d9c01b0cca485932a98876fffdf14075815a8471006e7384bb0fe1c1d4c3f715b0e3436817a956a2337f59a29b9fe0d9be4ac141435e07a055fe28e1d8b2c45d27023a4e36f6402e8ae052d4d491f57536f486d7212424285734cd49c4070c4a2c1834cc283cb69935a9b72acf0b878d5dd46f4fe5b441e027031d14e35d742e7254845e76e9e2544cb97ccdd8b41e1178c07ed82a52c798494e31292e71331698cd497fb94baa6817730eb1434b1e2f70a746adfd5d35aba1c213820bc9fb35627e5ef1d270866a8a87e6cb68cdf90a17a17c80c1f5194a3d22e21e0f735b2fe845c7529c9b38ab606ce140b3815a2ede3fb229c740ba21935d80f8d38faaa63e5a339a0555c7cf174b97196417661fbc1ac5e48cf578b4c6bfee69a39af4f6066ce08adcf077c4c6846708e9c2a13aeb6a97e7d219348ff3f2313c4babb1006daf1776aca25748ba0503d7a95f5a385c5925fb785de557f1cbcd17c296e328e3993905f5d8df712d073d3ef28f73dab6c891b712d4da7912d0b52089cad6c4fed35a9fd17d5d9839155ccff820dda3d76c2b0a799217f09c70f32f21445b2c7f539decddbba8a45afb0faa980954d37f1dae4306e35dd04247d718f2710de436206c7cf9323d36c29ff25b10d9d87b6a12d894082213d1e33ba7091f7c2f901ab77c0652e57439255e59e5583505ac9821bf9420b051b556597fdd86c4b22d325dfc9d06032b79e9826747256f4be7ad2ec33acfdcbcd3a8cdfe61de2bad5e6427e5295ae4d97f1f0062bb6e6753cae09ea3c9c9e03d45baa34c6234c277d05a4206202d1af4f0eceda9ccd8b303cdd4cb7bba8ecd3fdda784c8c22e2b8fcb339c5885e9004942da1fc84a1560db409e5bbbc01c8ddfa96a3eb29961553f6bf402e4d924794dd3ecb3f89363f225ad828b8a910598f5df2b9fb8f00e964bec171b61098f93499b07e221d09817af60eb5c2fca7b86cf553f071128b43e9b9245d6041599b08e3d6e0512f7bd71319afa4f3a3cab90ac6d22c3e7ae274173a3fbcee1a996e810237e0e06b10e5a61ffb70b91d53e34506bb16a47cd236e10035acff5112c8499d40341e93a8d5b566b4a232c4fc8e4669e1ea577bddae26765cd73dadd22f7135653b9535c4485f77414f279cce9f520cb4a044193466839ccf0d921efd0906d8348c0931c992321eb936aec314ff7845e115444a03e613ebe360b653078592d3592f76cb242568962f99de4d298929c070482ab9ccadf9840d449363653dee89911aa2bfc4fdd5476a6174a8510393b491921d894f368037b7b046aa670d31eb789a539a20a6651fd8b91dcb61c51434de4495bce1b04ebba77bf09c41b82efcaf96b278b2ce3440e4cceca870be6358e0d508e37e15d51e5960b9a6028d99a1fbff7c631da683e0548fbb0210a5b4df42ecb62538be9bd3d0c5a6dd2b5cf204af65c3726d4f5a442a8507c0ba9077aa13eba5f7410360d35b21a336373e5731b67c7d1830a037d705338976cb54ac238f46bc5bb2e43846f0366c5da75cbe8f7ee0d9e6580ba8cb7721ca413c27b9cd57eeb3ecb832f647153682870fe15ba5c6f7ba9715a07997a037f31d6acf1380051d2d84e7f737b3731eaed96981fa285623962bd48d1a3769008c6d55bc31c019a4ec30ff726ba9324db86f291e40a85f41f8938419c55f9739b64ac3a59eebee3541ee793dcd50001d1c2933f99977d65065de25b17d1828bb50bf5ef959a7e9a880a0ead35ef905a9e0f737663aff45844d2ff78f98e29adc85d7a0290ef3227e91fe6bc380c75982680ba66155220a0d0da0a5739d2c5dd7635732255fbdd9f959105c4ad9036f11fa3a434c6d9c7700f5ca723b992dba704148a7202a52e1229f75149c879753428fd53bd7b2dc7e509bd013ffdba88201dd910a5dc7366f55d2639bde18f06817e828bf8ded3e996d649ced1e72f8da8323f6cf01b84bfd70d45a0ee312d303c50a489a929448e913d059a7c1aee54d6394d7e567b711f90668aa8f710176054e2d76e0f54209b3bfd4ba61e0c839cfc68ded8e579e2e9f60676a6ddac834b2a8d0c3eed9cabbb1579b54108d810db58e567b5cfb8baaf7fae576ab24b2790f403a63ff78c28a8931e5202934ae1111da9c814fee1eb0d51823f841c65806019172a29d16e9fc0ff5bcc3b92c663add363b1b9c1172cad651bc410ef17055e0fc215de4d76e6f136e91240733af485339d57a5f0bef82b7a9f0928d8177167d91c343332cc4ac35ff4a006e78bb94b33b2d17a49eab542beef869b0608a7152121e62d91d49951ad53d9e1ce622badff2bf59c43e68a18d32469b34a7a6a9ea4d1fd1b946fecd98755014ec7e7ec616f65fec67a1ca27853d4340e29abac82a57e81c3efdefacb000e873eedf6a34aa27761b9fa5afd96611d41602c75ef608e086d6cea0e16e9f33133bfea7786f23e167cbcb401fe33e5b42c53210b39481d94277e6ea315cd8e8183178425da8f5209c7a79eb6d8189cef7bfe4686d8a2bddd5c74097b1497f16a790f032a92638d757bf93e94da30fa5d80cd9703603f71f7eaa5016ed80c97b6895acfe364b82a59e04f16ab86e29339252402a50f251c555cce31d4acc0d7c1ec197557131ad465b80c83dad5d7b536ca56e6a218d0b613d1f544c80d78e07d2a1b92a89598b627e1c3e2f282a0049865a94a5337e59fd46caf35bfcdf0eb50b0894d07f88f22e7d1210c7e8e12167911ac33d3e3226b2d1869e636aaa4a32ccac9606de0ae38b22510accb5961e336644af65305f0cf28096d778d7f50199e8331fde208c6180eae1eecf60e9869a4b38f47daf926cedae8441d1515e573bb2fceabd5e72e1162838f4569c0cca89b7831217e2b0c698081856971b7152ba3df672ee478ca73ad3251a202475c0d20d515504ba22c8788b73bb7c0360068fc4f5c9f4fa8ac360afe1b628c664d2b47585df3c90f8298e34453aa1d9831d45c2524e28dcd3cea389f7ef464b161480e8fe81621ec9e4dd38effbabc18326ae651d92fe05c07568e744da35e89570f656025f21a12578c5dafcc52bbcbf0f9ae7103ee23117d20812844d4d4c1ba2817efe327dc503f48a7c6b03bbcaaff0fddc630d71a306357e5e6973d784bfa97fc09bde180b6976a4372ea2762d4af5d56aa0626b618e35f8e4fed58a4dca08c38afa5800725d450917f1917b34d713d0e3bb34c90ac8c17a5a60aca4ab066960ad7ae71d6e5441449d35dd121ec2f89dde0d73a8838fe831d2fd6d3254f428759658baf5b486718c7d0898dbd05e31dc9d1e440e4a288ab61d9eba33fa42b3cbe0b87ef45c1475b9c25bd25a884cc463dde1ba3a2c89a8010f299946326fa4d373f8113c5261a3e04e5122090b4d260608b10d96b0e4a71cc71bda5c43a851c8047ddecb2be78b3b2018616349fc6036d6a714550f48c982138bd9146d604888cab444312bfef31b5e948055f31862e499b1e86bc01a2b65fedc6202544d4229680b1d21affe948eda8eba8cf2413527f5c30c8dc7fb7ea46b11811f3e7aa698c2250a3625092d4d4a6b6155f0846f90c51a7a7e457c855879dc868c60726cad153b8a146c5e05bd570c3d5a9b9d51e81b9591ffa28d13190f642e0c39c8e437005ad57a0d5cea540f2846f258e21c459d64d3fe5da693502aa89abdb7cf575fd7026d28cbac5b3187a0c71528c99bc46e34ffb08ca1fe444bbe2c4fbddec1003e19a884e0449433d6c0d9f71c302d5959cefffb867b4088d2f9d7dcbe3af5a72ab0fe0b77bfe3eb31851e403677f5f66354282a37c3c34b7a93ff31f1afadfbd508c2a0dbade97bba386b168cf0e3565758f7197b42df17d52a272e0b1f891e7c64d3dbe72200049c2bdcd2247a8f57c81cb807905c80ca76d5d15309ac6a58bd74cad21c7094ae8672fd73689c42752d6107ae460d73cfb6edbb26f93804e6bc96917e6316ce461f498452b86b1686cbf1ad968723d7289f3258d0c21d9109e13766084be3dea5c068642f357cb4a0d7bf802acdcf2d04159b35d1be2a60f667c46c1d91651cf2bd00730469cb20b579848d5aa9859a9276d04d0ae2f3475b1b7f4791215e62552df7ea82315248830dfde614e3b4cb360b601060136f2d0674a7491e19fd575ad166c7cdc1e6b5153ccf3dbe97e636d74fc7a23176c95fbf57d429a3445b192b1f87d4e1225201d2bcc48595ef796d57851bf0558e691259a04de6a60f833170e33bb8c56b9aac97af271c4d7b374e503317c937f679ea60e20fdea68b2071e4b8e01ed08d227020662d10bd7e40f1e94c0e365e9984055ef516f51bb8777b93bc44c7f4ace6526593e762eabdd0fac94e31c73fc6808ce8d7aa25a79f8d5abf59ff440bac2a83ab563bc13438cb08e2929395d66434e1dd50e54efc6f01c3d2d15b46dfc3e07d8d56e148cfbcd729a81b7d262f17ff276a6df7ef4dde283f2a1e0edfbb9426e7cf5c2676ddee26d9272ac0d7cfffa55841489f5843565e083de0f50e3d0175be2a2553c558ff9cf626c0cc22c048aad2cfe4aebba8b2ba452d6f3fe6b456b6e3037f678455fadd8ec1e3201e98e567f688511dace7eb99a94fa7f831327535cd7a3df66196cd7c623a6405c65a68e59a5691a7f601b763a4472c7193d98db4678c4e43d78f4bc2c0b2d1f0d33ec3f14bbcd7f9f5aa0b6706e205189b8c5c9ec8ac6e3d9b81be07595ce7d3301092379ec75beff6ffe5a2d2701b81c99fdb00df401dd268c1bfbab2a83e0e51ddfdf865ade4939380ff7369f9321153c4c9dba7f4b3e19be967062fdd0da10fec056d89695d962ccf07991138c51038fb44ac888fc2660567fcc9b1788d0b11230a8a025d358837f8d15cf27a283c158d04ad326c4974fffc61b8c73b6fdae9f30168116b4ddda058fe6396b24747eb4235a9d74c70ba240e43d49efd23aac33527c1a3439561ca6fc9f84fa38e1d711c054e90e4d3bda34ad55595e31ca8e8cac445321f0516cb9e54bcf2a018a5cc98a0a133aa9f96cdb312dfa718347b4d5df46e3a50d4c568aa079b3421b142316fbdd4c1e086077fe35cf51a208e7b4658f7a6c8915fd744e42f21f070065b6234046abef8ecfb5ef254e21936b839e484a4b030006660c61d63bb7a68ec425a55f4bf4a36b52ecc59558d3289b22968264991370ec998a2c3b2d9aacf90e758da3bb685122693876893f3d0137de40a973f18fa7f5241d02c8fb4a92e0a2688bc39d659aab945a1e473fccabc38796c64e4dca98eb0b802fd420160d323edbde335cd3423d4cede14aa39e8a8f93f642e336b740fd4d8852c0357c54d33c5123d3aae8fbc34590ed2cb24f5c8447e8bc71d4bad23792711a62c4f69be6a36e62c36a614aa62082d3bf5d00d1be25e6e548ab27b7bdb0ef91100175882d8f5f9207342b83fccd06e90208d529f39fb5f34d96a5e6cc069478b848e68f8cb4eb530a29694224ff14efa59663f950bdc199957df323621f1fd77f240a536b62c290116ec41b15a79b983422342da1a459629cf0d80e1dd13dfdbb06b41f61fbbf55665e1be3fb507baf43f470e62695dacac15883091182567dcdc5f1eae57718390b1569f791e75e6b058e4b750fd40b689d793984576e165a0d3d2f1bca313accd3a683dfad927030a8ad05b0fe94212a227373173b62e2442134565dbe27ee17a567d532acbc669eac0bb8cbc8b818721f35220449983120e72f4e3f243ea02d35975cd6e3e2b21aebdfa9ba5b83445d438ca14f780536fe5f6cd38d464738edd91727093308e1ecacfe1591eee2f96923bf3d5a283620ac43f12b800711bee75da8d4be80ebd9d5ee96715b57a30ff296fbf7a2e4cf9a4804a860fe785c97bc69a5aa25d7445429fc4567dd9af411f13cd0fe30f4286a04b18e4b82039c177a78690c33ea3cf71c85da041916ab042d25bc2bec6d7ab3390d85906d38d9eb4f0ccad30e2f59b3a7ed519709874792348dd7c15d9ac7c7ffb436d056ed1ec60cc323ed2a8c36fa47b6b0f23609ebb0a53bfd23f998d7eb9bc8aa7a8e3763834338e71eda632f734a6154c68a195afbd7dc5dea759b2e6901e6e9683dfe1b2251d43f1684afdf30b1b522d443acf5636f33115db8a8c874848a8d7f940cceec761aaf446ac767c2455ce84d25546e8b5e1f8306055ffc896aa09c97e665a04e65c137b667d0a7d9c7ef892a4c4327144595f92eec7f384ca99fb4c6885b172975c03703bf278e9a0dd6920087c09f98f93ce4ca47551cb43c16b17f423bb8d6360878e1dd02fd385ee6506733a774aa0bcb5b837d13984820c20f0edaaf77914e3f9bf1ef281b4c8a1b0cc78837830471cdd92df2c11a8ebf889e309a5c3740286aca175dcb3577075a68d51470b319674fed0b9a6479c2f6404742e8416040f9dddcf5b2133741c801a62c1cf64996137df74c70a036449337400d3547d9678df8f0881b83d57193976bd77c403411cc0e4946b5c5e2d988b72e49b08b0d0379421fb24d10da1513ad04a3a0410aa8342150fbc48a1c077063b969120d786cb11a939278fcbb983033c476eac99b371677d728e18bc3672e318e71487415aeadb8accf6a7543957eb26cd66787ff58fbc5f3e4cdc940e19c785108e1b728840820339b7a5c1d8ecc51938f19b5c9c090b43922449acac384f666698ace574daa27a4cbf3bf01d4d1aae99a02808d53893dc26c1d3bcc579bb929dd708fee0b50f8bdd9873371d83d129eafad642c040a72a2e9ea391e21b5b97def27cd3f14acafc4f7e93f6fa21086c8fd9f6dada64ffe27baf202163af3460927727ad9d1e51d79bb5d00fe5f22ed429c8014d443fd3c18e88eba276afe150aee9bd9c71d6698f438ff42064d97579b617d4b4df4579bff380ee92b2bdee12388b620ae76818b3c0212791442f88a81425f71c6888c8284549c4d45322c403e0694aced2c8e85caf78a9319c3d76017920e32d02e749ffadcd86aab7e6c04259e561c58040e268d491b0f661805d330b99f23d54c3ca21b95206eb8e54b3a20e2be5f81d3471f012ab4dd25c4b84a41a2e64b97cdbf5bf3b3c669a62f03ac643ffe44187df7c2f62286f77e1d43f2db699e03b85b63d986e5af2ba14cb7a056dd61544c6bc27e5d9ab4e86fff85a07cab866d56a7a479b26a72eccff94a795adecc93000e2dda3d0dd7d4b37ecf6aa5f1079f627aeba5eefa8519ba486ad065e1a3dd6ff716bd96ab377bddbe4b9bdb8515504967d6ddd0c743b70e887c8f286a4f34655b9dbc1cb2622bc0d9e6efc5b6a3d651f737afdc9fc493fb0919d4fd358fcac8181fd9d80e71e30569c4a7fceffd878294c3764814ab95cf371e1f1a0610d88bd8c93876b758eab80fe615c322b57d2cdeb728e557defc2103450efc66b786555a3f1f9670fb2400e0e45853f7c0c083dc55a39536ba499ae176dca2b84ce487658c52b24a140d10ec5f68870ed1d0b4a5d476e775ee8e30bc03579a2224170d365340f7a80fd43253bfa4897c027dcab39a34d7254c099c95b1b4809e894a5377e922a18ab940ab25c803ea9b32085ad547fa2a0ca1ea18546e0485876e29e0f19107f12c94a6ff8b7d5805c78e16159d29401ffc512bf382f20d94516da787fb0ff011eea71a8eaecbbe044d3d66f8728736bf107dc4b5d5518ac1e68fb3b53568d33b5faa47b8436ec2ad9c8980419e2897011567f75c099542ccaaa299f83c248cdfa672573664c9596947f1e06e57f3ca55c0470a3829601bc08572d9cea432b6d6dfbadfbe527da57a3002821826f58c82118c165dfc243e5f88f738f71c91ac01c7c47e41186cb2edb69f2edbb378d6355caf2459067b63e948c1d4a496b083d40d46e32daf8dee0d37500af94d48d59e9a6de2aca8bb6c579c49ede191d617e2346675f0ac246d13e867af45d42b127859e83fda615e6f35fe136a9f4fe97dc011dd9f92f43959080b8882f72e0a5c4fda82430207ef96b4e7f5d88d6ace50cbd0439b184bd0c2566deea6cdf16702d3abdcd41e998b9a1dd48f59ae22fd7d71166fa2b2bb5fca7657a386cbdff9128ae4438c4db95d710869187ad49f4ae4c5c278453fe9fef876fb16a551917914430dc440c0a1363f6783a2f160d822c09ce6d8366f82a671e43042df009a9f7d8830c2f420f613c14d0d17992b8aa692eb493f6b688700c9b0adf4ff4e96f787ee1f183ebae8047659f353335e335e99b824e7ff1f3a37548fdf1b72f7c0d09a8a83becbc17a121e8398bc263d15ecb24d8d2bf1435e60eec2bd50f7289b58b9521825cbf6e54754f694dc837e434ac26fe3a3205f78360c156f1a41e51e57c4b1fa69ae878a6a840209d5f19cf42ee7193007a75e5c61fbf4b2c8189dc53dcc6d2435ff97c7c31b63749b426017d2f95ca020b9b46ecc595791a9211870d03077986a214d8bb3ee06fd7376f9b8e4709fbf120eaef0ac857cd3f66fcb4cd414a13d91afa1bae78822ed5a7dc1e1419ef620a74793b932ca76062bf8e7dd9d6c74609b6ba32313f15ff91b81fbafe5e39d03e890c7897542b559c1e2ac4ae868b89326cfa024bfa84ed7364577f03e796df79c2341ae73689e14d4574ff993fe06a5b36bc53c1597b94f21d8d849507d54cb75f03e77f4f6aae39e1e69a39f4d80036f62b615fe3f21d408fe5251ee962a5976ba2ba7411e9e81e867bab951a5ec3dfe2eebac05c8d9fbd73c9e7412b566a5496ca6224d68029c6088b59b6e49cf4fc965520534dffdf014ba9442a3a414c0177d85af793fd45e396ffb6ed5fcaecf35c33115ad7ca82c0df1ddb42c74c1dd2f64e0f18a95edaeddcf0b2541a371f631c9133293d1cc3bb1f237775edd628c0d5509b71afb1326c2a51d66e4dbc975bdd018d3aae3677516c264baf9570468564786083f236c1a7fda664d1e2ed1dec7e5b0dbcfd4208f42127dc3365bb411f81345f3a6f80112766062d88c4d8ca61027ef4fe2e35bf52ffc653f70fae1e6770ddd0a98038da55efd6a017c9f95ec37c562b255d725c6b557c8a410f62b44f5b7d84a96db82feaf65a7590c265a202b4b60e5aee68124d5a013c09f0f2191aaae5f71f7cdfdab3b0250603aa26fff90349783f5a51e0431312a5a0ff957dcaa17082468c42c1784443cd3d1d70ff4187683ee8a892e25ee0decdd76b28f4460e453cfde0f00bb14c68d45d53a8ccc247a1c380e6ba16a2746cf5b54fea6fb0bf65f32b5789c336b74c6f1f23ae88d8c0466bc68c0d05e53029cb668dcf31ccacb492b54792805198618c28a4d4d99f67603f5f8d4d005d1a83d2c682782ebf52cadf017f9c5b9b4fc1b03bba23164ea991d0933f5dd2e08429d50b36e3df1dfabb566b70d8cf22246fab7cfd067fb803a3d9cb75f68d6547e5325668fa99ef73bdb2ca45f4a160f76735cbbee3298016d40491311154f61284a009b7f9f1cab7b0278cd655d846633730e7b1d714db9499265d78c6614eaf44c5aba8f48576a66a0f48754ff7e36ed0f260b6c6ab6357d0d401ddefdf0615b92103593877dc782288b135208f1d5e2eb2bb68b4d9d9c9d4b09458e5986c108f550f70038240dc13fb0e1189996b37cb5e7a2a561299229c72398fbf34597fb5663c1e7f49c5821b2db127f04f007e1a56844522f0c0a7980ef0d49232ff6988de55e6ff97d4750f58bebdaf21cc23f3586468bbcd42be075819dfa1e24d20897c466e8800c7075a582ac5b9ea7f993f1c68cf4e247ea27fa161cc2c37a24762decdec3b481b0da1bb258d855786539509e7d350c196cc20e93db7fb4955063a917755e805c989ddd23b1b1bda551a03213a9e09122a89d440ad7d04dff57af59007380f44a07d581b3451af11183646631b22e8c46c3db682b4630044f59aaef0a8a68229320e23bd75a1ffa0e27f97b973d7abe76b2bc66837b439778610be07e59e18d6e51ce62d14e883d2feb03ccbe86af5bddcb53d0f83971218696515bb537f46560ca0d0bba28139546c0e8c43b31e8893c8a7aa3d6629d784cb2b70f150df3380d886f8b716fd2d46fb5526ec9012764af4b040dfadaa9857651e526a053bedee06b27acc62b408c2e011e684fe56a72d767430c8876a78cda15f2ccb522309a477fa9c709717fb5d257ff097e563cf8511c79f313164f2e714e5516fbf9c07d5c699ca1f4236bc413667b392bb18f86f8f773dd7a725529fe4a6eced8a8b53d18dd7b0fd14ea0bf6a349fbb31893bcdb4f71404aadf43caacf06fd75928d66e4e1a2a5bc8eb8eac20f574e9e2f392d34921be2b0056d7c697179900bd20fb948a2bc7716688529e8706912fd9029904911e78c6a3d3720bc8a66390b642ab96e345eed44b322770f855ad8202ba6fd241293442d3687996ce3f9e1e642da81c584e932cc37ffc0f74b99c68da2c15514ed1b34b253415449be2a02d0611e083ece0409aa12c4d84c05eeaccc3e71ba8bf4c0ff5b3b15e3e9b75d8b4c8366accd7c5df8147e99be9a82cab79f3340677f35efe0acf2f7b5806f285be33a8ac75fd80fd96c512e0d393dd502966b5cf547babcc6363f61ff3ec8c35b199ca95135d1c4515c46a55b26e24da3ff35ba9b8111f284cfc04a1c66160c882346556ca8e4ddce2bbd8b5a4b9c117a84a97e7de2d7e032d91f6917c567df85fc29202b34a2ebf951bc80f82504ac8b5881ce55aae9ecd435f7e02ac8eecc2e0dcd6c060b10f4ba8c5cb22c6f740805f1cd5ed7ef4ae16866c6559c2d8f2140ef055a3f8d8d2befa9a7c47c5ba597f273acdb6a606a59bea4483dcf79e7f3161240763b0b40210c6fa2e0f376d5c21a8cf8ad4ab3ee9a7e6a0eb13a4a268ae2f0553ffad5577e5be6f794538539ad966ed94582a96f04811d3489299155dcdb7c2a85f3261a7e609bbe9ba08062d6c241ee8ab0555447daf5e5b1624758ec995a8b4d58e0c9e7c8cde024b05dfb0c4e1d7877acd2af6aa896b6f0cca5e09fea9b6dccccd1c4f94c900a1ced9805fb03ea2ac431575d598e2e31fe242e1a44f7b9248d1e8f9719cfceff3a33c6bdae35edef1bf787e33ca5124c8612a9c5bd2ccd79a7ac82742de273c47938915460b9137d717ce48251ead7ece0a2ff1c9e0a48bccc3209aea44ce827c1e0eff1b361fe1e85e33098490a4937f175aa8ac2ba5e09ac7b7fe0610821187634f5800b9eb66ab691f09e31dd4cdfab248199efdeaffd8b23a8cd2664397af240278972fac0352ec526bbef6bf21aac49fefb11d798560b4317ee48ff341a6591065386631c8075970bc3ebf0cbfc7efdbf6408dfc65bb16f82bfc4156461c94f636b91183d5610c7982fd3e7a5e654f017b249aefdd1dfa188a877d3ad197aeb6d05daf65614c8c59d5de7ed2e6ff04ab0e139f2e19b125ff00fd1dd706d5b7716cfbb63a12eef9f2fe3821c997f3296410cda4ddee1fe665191dcbb701fced0d3eb724d570e7171b026b87b3890ee6e7da0d8de2c3a997144eef933e2ee331a4ada10cc8bd4a75afcc842c2e60f96e0bdd376df3944162d91aee29dd0d5a4a98803b5582447f5ebac2dd1ff6c79af46c7fc2b1fb2dcf184620cacf1af2f29d9531340d402d96c7c44e79551d49043d482dc0d8776fc67c0b1724b3c24e76a8fd1f1a1c9ef9ebc3d4a0e86f3dfa60e66e06d201c6d8e3118c2b50994119fb4be28d6899b235d8d0dc4278174bf41ab0b452a7406fd32a94ac847a6f86d52b96a4f57afb723d162fbe24b547aaa10ae4e8db8ac82e078a7561da65488dc23f335161b5902e74a17d7a13c802a29f3dedb51fda936eb575a01652007e7700e50046762e4189281011ee884e2b5479a826ff63034739aced40f340a24517987279fef7bc418097fa</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">有东西被加密了, 请输入密码查看.</summary>
    
    
    
    <category term="容器化" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/"/>
    
    <category term="k8s" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/k8s/"/>
    
    <category term="梳理总结" scheme="https://marsperl.github.io/categories/%E6%A2%B3%E7%90%86%E6%80%BB%E7%BB%93/"/>
    
    
    <category term="k8s" scheme="https://marsperl.github.io/tags/k8s/"/>
    
    <category term="运维" scheme="https://marsperl.github.io/tags/%E8%BF%90%E7%BB%B4/"/>
    
    <category term="Linux" scheme="https://marsperl.github.io/tags/Linux/"/>
    
    <category term="总结" scheme="https://marsperl.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
    <category term="知识梳理" scheme="https://marsperl.github.io/tags/%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Kubeadm方式搭建K8S集群</title>
    <link href="https://marsperl.github.io/yyg/12690776/"/>
    <id>https://marsperl.github.io/yyg/12690776/</id>
    <published>2024-07-18T15:55:36.785Z</published>
    <updated>2024-07-21T13:36:13.394Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kubeadm方式搭建K8S集群"><a href="#Kubeadm方式搭建K8S集群" class="headerlink" title="Kubeadm方式搭建K8S集群"></a>Kubeadm方式搭建K8S集群</h1><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><p>在虚拟机里安装三台centos 7.x操作系统</p><p>配置系统名称和ip地址(同一网段)如：</p><div class="table-container"><table><thead><tr><th>角色</th><th>IP</th></tr></thead><tbody><tr><td>master</td><td>192.168.66.100</td></tr><tr><td>node1</td><td>192.168.66.101</td></tr><tr><td>node2</td><td>192.168.66.102</td></tr></tbody></table></div><p>三台机器都要执行的命令:（使用xshell执行命令更方便）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># 关闭防火墙</span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line"></span><br><span class="line"># selinux永久关闭</span><br><span class="line">sed -i &#x27;s/enforcing/disabled/&#x27; /etc/selinux/config</span><br><span class="line"></span><br><span class="line"># swap永久关闭</span><br><span class="line">sed -ri &#x27;s/.*swap.*/#&amp;/&#x27; /etc/fstab</span><br><span class="line"></span><br><span class="line"># 添加hosts</span><br><span class="line">cat &gt;&gt; /etc/hosts &lt;&lt; EOF</span><br><span class="line">192.168.66.100 master</span><br><span class="line">192.168.66.101 node1</span><br><span class="line">192.168.66.102 node2</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 将桥接的IPv4流量传递到iptables的链</span><br><span class="line">cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 生效</span><br><span class="line">sysctl --system  </span><br><span class="line"></span><br><span class="line"># 时间同步</span><br><span class="line">yum install ntpdate -y</span><br><span class="line">ntpdate time.windows.com</span><br></pre></td></tr></table></figure><img src="/yyg/12690776/image-20230516173905682.png" class="" title="image-20230516173905682"><h3 id="安装Docker（三台机器都需要安装）"><a href="#安装Docker（三台机器都需要安装）" class="headerlink" title="安装Docker（三台机器都需要安装）"></a>安装Docker（三台机器都需要安装）</h3><p>配置Docker的阿里yum源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;/etc/yum.repos.d/docker.repo&lt;&lt;EOF</span><br><span class="line">[docker-ce-edge]</span><br><span class="line">name=Docker CE Edge - \$basearch</span><br><span class="line">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/7/\$basearch/edge</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>以yum方式安装docker</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># yum安装</span><br><span class="line">yum -y install docker-ce</span><br><span class="line"></span><br><span class="line"># 查看docker版本</span><br><span class="line">docker --version  </span><br><span class="line"></span><br><span class="line"># 启动docker</span><br><span class="line">systemctl enable docker</span><br><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><img src="/yyg/12690776/image-20230516180634916.png" class="" title="image-20230516180634916"><p>配置docker的镜像源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt; /etc/docker/daemon.json &lt;&lt; EOF</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://b9pmyelo.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>重启docker</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><h3 id="添加kubernetes软件源"><a href="#添加kubernetes软件源" class="headerlink" title="添加kubernetes软件源"></a>添加kubernetes软件源</h3><p>配置yum的k8s软件源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/yum.repos.d/kubernetes.repo &lt;&lt; EOF</span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">repo_gpgcheck=0</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h3 id="安装kubeadm，kubelet和kubectl"><a href="#安装kubeadm，kubelet和kubectl" class="headerlink" title="安装kubeadm，kubelet和kubectl"></a>安装kubeadm，kubelet和kubectl</h3><p>由于版本更新频繁，这里指定版本号部署：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 安装kubelet、kubeadm、kubectl，同时指定版本</span><br><span class="line">yum install -y kubelet-1.18.0 kubeadm-1.18.0 kubectl-1.18.0</span><br><span class="line"># 设置开机启动</span><br><span class="line">systemctl enable kubelet</span><br></pre></td></tr></table></figure><h3 id="部署master节点"><a href="#部署master节点" class="headerlink" title="部署master节点"></a>部署master节点</h3><p>在master节点执行(此处的192.168.66.100为小编master机器的ip，需更换)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init --apiserver-advertise-address=192.168.66.100 --image-repository registry.aliyuncs.com/google_containers --kubernetes-version v1.18.0 --service-cidr=10.96.0.0/12  --pod-network-cidr=10.244.0.0/16</span><br></pre></td></tr></table></figure><img src="/yyg/12690776/image-20230516181339201.png" class="" title="image-20230516181339201"><p>等待其出现成功提示</p><img src="/yyg/12690776/image-20230516181608215.png" class="" title="image-20230516181608215"><p>然后按提示在master节点上输入提示命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p $HOME/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure><img src="/yyg/12690776/image-20230516181720076.png" class="" title="image-20230516181720076"><p>按照master生成的代码向集群添加新节点(node1和node2上的操作)</p><p>在node1和node2上执行在master上产生的kubeadm join命令：（根据实际而定，下面的是小编机器上的，仅供参考）</p><img src="/yyg/12690776/image-20230516182024786.png" class="" title="image-20230516182024786"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubeadm join 192.168.66.100:6443 --token 7fqt6v.729wvdcjmgivns7y \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:ef79029853fa3c5454cbfc5273a636c843db0ab96e4592467b8a1490b6b6d3c6 </span><br></pre></td></tr></table></figure><p>我们就可以去Master节点 执行下面命令查看情况</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get node</span><br></pre></td></tr></table></figure><img src="/yyg/12690776/image-20230516183426649.png" class="" title="image-20230516183426649"><h3 id="部署CNI网络插件"><a href="#部署CNI网络插件" class="headerlink" title="部署CNI网络插件"></a>部署CNI网络插件</h3><p>上面的状态还是NotReady，下面我们需要网络插件，来进行联网访问</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 添加</span><br><span class="line">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br></pre></td></tr></table></figure><img src="/yyg/12690776/image-20230516183609956.png" class="" title="image-20230516183609956"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查看状态 </span><br><span class="line">kubectl get pods -n kube-system</span><br></pre></td></tr></table></figure><img src="/yyg/12690776/image-20230516183655302.png" class="" title="image-20230516183655302"><p>此时还有未处于running状态的pod，再等些时间，再查看状态，全部变为running状态时，执行下面命令查看:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get node</span><br></pre></td></tr></table></figure><img src="/yyg/12690776/image-20230516184424536.png" class="" title="image-20230516184424536"><p>运行完成后，此时可以发现，已经变成了Ready状态。若还存在NotReady状态的节点，再等些时间，然后执行<code>kubectl get pods -n kube-system</code>命令，若状态为running，再执行<code>kubectl get node</code>查看即可</p><h3 id="测试kubernetes集群"><a href="#测试kubernetes集群" class="headerlink" title="测试kubernetes集群"></a>测试kubernetes集群</h3><p>在Kubernetes集群中创建一个pod，验证是否正常运行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 下载nginx </span><br><span class="line">kubectl create deployment nginx --image=nginx</span><br><span class="line"># 查看状态</span><br><span class="line">kubectl get pod</span><br></pre></td></tr></table></figure><p>出现Running状态时，表示已经成功运行了</p><img src="/yyg/12690776/image-20230516185059052.png" class="" title="image-20230516185059052"><p>下面我们就需要将端口暴露出去，让其它外界能够访问</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 暴露端口</span><br><span class="line">kubectl expose deployment nginx --port=80 --type=NodePort</span><br><span class="line"># 查看一下对外的端口</span><br><span class="line">kubectl get pod,svc</span><br></pre></td></tr></table></figure><p>能够看到，我们已经成功暴露了 80端口 到 30374上</p><img src="/yyg/12690776/image-20230516185150167.png" class="" title="image-20230516185150167"><p>在浏览器上，访问如下地址(任一一个节点的ip加上面显示的端口)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.66.102:30374/</span><br></pre></td></tr></table></figure><p>发现我们的nginx已经成功启动了</p><img src="/yyg/12690776/image-20201113204056851.png" class="" title="image-20201113204056851">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Kubeadm方式搭建K8S集群&quot;&gt;&lt;a href=&quot;#Kubeadm方式搭建K8S集群&quot; class=&quot;headerlink&quot; title=&quot;Kubeadm方式搭建K8S集群&quot;&gt;&lt;/a&gt;Kubeadm方式搭建K8S集群&lt;/h1&gt;&lt;h3 id=&quot;环境准备&quot;&gt;&lt;a </summary>
      
    
    
    
    <category term="容器化" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/"/>
    
    <category term="k8s" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/k8s/"/>
    
    
    <category term="docker" scheme="https://marsperl.github.io/tags/docker/"/>
    
    <category term="k8s" scheme="https://marsperl.github.io/tags/k8s/"/>
    
    <category term="Kubeadm" scheme="https://marsperl.github.io/tags/Kubeadm/"/>
    
    <category term="k8s集群" scheme="https://marsperl.github.io/tags/k8s%E9%9B%86%E7%BE%A4/"/>
    
  </entry>
  
  <entry>
    <title>k8s集群对接ceph集群部署指南</title>
    <link href="https://marsperl.github.io/yyg/57e2a956/"/>
    <id>https://marsperl.github.io/yyg/57e2a956/</id>
    <published>2024-07-18T15:55:36.781Z</published>
    <updated>2024-07-21T13:30:55.490Z</updated>
    
    <content type="html"><![CDATA[<h1 id="k8s集群对接ceph集群部署指南"><a href="#k8s集群对接ceph集群部署指南" class="headerlink" title="k8s集群对接ceph集群部署指南"></a>k8s集群对接ceph集群部署指南</h1><h2 id="任务目标"><a href="#任务目标" class="headerlink" title="任务目标"></a>任务目标</h2><ol><li>完成k8s集群对接ceph集群</li></ol><h2 id="任务平台"><a href="#任务平台" class="headerlink" title="任务平台"></a>任务平台</h2><ol><li>物理设备—</li><li>操作系统：openEuler 22.03 LTS SP2</li></ol><h2 id="部署指南"><a href="#部署指南" class="headerlink" title="部署指南"></a>部署指南</h2><p>集群拓扑图</p><p>暂时无法在飞书文档外展示此内容</p><p>采用动态挂载ceph RBD存储</p><h3 id="任务一：安装ceph客户端（ceph-common）"><a href="#任务一：安装ceph客户端（ceph-common）" class="headerlink" title="任务一：安装ceph客户端（ceph-common）"></a>任务一：安装ceph客户端（ceph-common）</h3><p>在k8s集群的每个节点安装ceph-common</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install ceph-common -y</span><br></pre></td></tr></table></figure><h3 id="任务二：同步cpeh集群配置文件"><a href="#任务二：同步cpeh集群配置文件" class="headerlink" title="任务二：同步cpeh集群配置文件"></a>任务二：同步cpeh集群配置文件</h3><p>将 ceph 集群的 /etc/ceph/{ceph.conf,ceph.client.admin.keyring} 文件同步到 k8s 所有节点上</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">配置ssh免密</span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">ssh-copy-id 10.10.3.121</span><br><span class="line">ssh-copy-id 10.10.3.122</span><br><span class="line">ssh-copy-id 10.10.3.123</span><br><span class="line">ssh-copy-id 10.10.3.124</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拷贝文件</span></span><br><span class="line">scp -r /etc/ceph/&#123;ceph.conf,ceph.client.admin.keyring&#125; 10.10.3.121:/etc/ceph</span><br><span class="line">scp -r /etc/ceph/&#123;ceph.conf,ceph.client.admin.keyring&#125; 10.10.3.122:/etc/ceph</span><br><span class="line">scp -r /etc/ceph/&#123;ceph.conf,ceph.client.admin.keyring&#125; 10.10.3.123:/etc/ceph</span><br><span class="line">scp -r /etc/ceph/&#123;ceph.conf,ceph.client.admin.keyring&#125; 10.10.3.124:/etc/ceph</span><br></pre></td></tr></table></figure><h3 id="任务三：部署ceph-csi（使用rbd）"><a href="#任务三：部署ceph-csi（使用rbd）" class="headerlink" title="任务三：部署ceph-csi（使用rbd）"></a>任务三：部署ceph-csi（使用rbd）</h3><ol><li>下载ceph-csi组件</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">下载文件</span></span><br><span class="line">wget https://github.com/ceph/ceph-csi/archive/refs/tags/v3.9.0.tar.gz</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">解压</span></span><br><span class="line">mv v3.9.0.tar.gz ceph-csi-v3.9.0.tar.gz</span><br><span class="line">tar -xzf ceph-csi-v3.9.0.tar.gz</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进入目录</span></span><br><span class="line">cd  ceph-csi-3.9.0/deploy/rbd/kubernetes</span><br><span class="line">mkdir /data/cephfs/csi</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拷进csi中，共6六个文件</span></span><br><span class="line">cp * /data/cephfs</span><br></pre></td></tr></table></figure><ol><li>拉取csi组件所需镜像</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看所需镜像</span></span><br><span class="line">grep image csi-rbdplugin-provisioner.yaml</span><br><span class="line">grep image csi-rbdplugin.yaml</span><br></pre></td></tr></table></figure><p>在所有k8s节点上拉取所需的镜像</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">./pull-images.sh registry.k8s.io/sig-storage/csi-provisioner:v3.5.0</span><br><span class="line">./pull-images.sh registry.k8s.io/sig-storage/csi-resizer:v1.8.0</span><br><span class="line">./pull-images.sh registry.k8s.io/sig-storage/csi-snapshotter:v6.2.2</span><br><span class="line">docker pull quay.io/cephcsi/cephcsi:v3.9.0</span><br><span class="line">./pull-images.sh registry.k8s.io/sig-storage/csi-attacher:v4.3.0</span><br><span class="line">./pull-images.sh registry.k8s.io/sig-storage/csi-node-driver-registrar:v2.8.0</span><br></pre></td></tr></table></figure><ol><li>创建命名空间<code>cephfs</code></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Namespace</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    kubernetes.io/metadata.name: cephfs</span><br><span class="line">  name: cephfs</span><br><span class="line">  &#x27; &gt; ceph-namespace.yaml</span><br><span class="line">  </span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">执行</span></span><br><span class="line">  kubectl apply -f ceph-namespace.yaml </span><br></pre></td></tr></table></figure><ol><li>创建连接 ceph 集群的秘钥文件csi-rbd-secret.yaml</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Secret</span><br><span class="line">metadata:</span><br><span class="line">  name: csi-rbd-secret</span><br><span class="line">  namespace: cephfs</span><br><span class="line">stringData:</span><br><span class="line">  adminID: admin  #管理员名称</span><br><span class="line">  adminKey: AQCNNDZlPKI5KxAA/3gXnOmhHgyLU2qPzTaZ3A==   #ceph集群密钥</span><br><span class="line">  userID: admin   #用户名称 </span><br><span class="line">  userKey: AQCNNDZlPKI5KxAA/3gXnOmhHgyLU2qPzTaZ3A==  #ceph集群密钥</span><br><span class="line">  &#x27; &gt; csi-rbd-secret.yaml</span><br><span class="line">  </span><br><span class="line"><span class="meta prompt_">   #</span><span class="language-bash">执行</span></span><br><span class="line">    kubectl apply -f csi-rbd-secret.yaml</span><br></pre></td></tr></table></figure><ol><li>创建ceph-config-map.yaml</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: ConfigMap</span><br><span class="line">data:</span><br><span class="line">  ceph.conf: |</span><br><span class="line">     [global]</span><br><span class="line">     fsid = 79fd2206-39ca-4ec4-9cd2-96e065c6361e     # 生成的FSID</span><br><span class="line">     mon initial members =future-ceph-node0,future-ceph-node1,future-ceph-node2,future-ceph-node3            # 主机名</span><br><span class="line">     mon host = 10.10.3.117,10.10.3.118,10.10.3.119,10.10.3.120                       # 对应的IP</span><br><span class="line">     public network = 10.10.3.0/24</span><br><span class="line">     auth cluster required = cephx</span><br><span class="line">     auth service required = cephx</span><br><span class="line">     auth client required = cephx</span><br><span class="line">     osd journal size = 1024</span><br><span class="line">     osd pool default size = 3</span><br><span class="line">     osd pool default min size = 2</span><br><span class="line">     osd pool default pg num = 333</span><br><span class="line">     osd pool default pgp num = 333</span><br><span class="line">     osd crush chooseleaf type = 1</span><br><span class="line">     [mon]</span><br><span class="line">     mon allow pool delete = true</span><br><span class="line"></span><br><span class="line">     [mds.future-ceph-node0]</span><br><span class="line">     host = future-ceph-node0</span><br><span class="line">  keyring: |</span><br><span class="line">metadata:</span><br><span class="line">  name: ceph-config</span><br><span class="line">  namespace: cephfs</span><br><span class="line">&#x27; &gt; ceph-config-map.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">执行</span></span><br><span class="line"> kubectl apply -f ceph-config-map.yaml  </span><br></pre></td></tr></table></figure><ol><li>修改csi-config-map.yaml，配置连接 ceph 集群的信息</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: ConfigMap</span><br><span class="line">metadata:</span><br><span class="line">  name: ceph-csi-config</span><br><span class="line">  namespace: cephfs</span><br><span class="line">  labels:</span><br><span class="line">    addonmanager.kubernetes.io/mode: Reconcile</span><br><span class="line">data:</span><br><span class="line">  config.json: |-</span><br><span class="line">    [&#123;&quot;clusterID&quot;:&quot;79fd2206-39ca-4ec4-9cd2-96e065c6361e&quot;,&quot;monitors&quot;:[&quot;10.10.3.117:6789&quot;,&quot;10.10.3.118:6789&quot;,&quot;10.10.3.119:6789&quot;,&quot;10.10.3.120:6789&quot;]&#125;]</span><br><span class="line">&#x27; &gt; csi-config-map.yaml</span><br></pre></td></tr></table></figure><ol><li><p>修改csi组件配置文件</p><ol><li><p>拷贝进<code>/data/cephfs/csi</code>目录中的所有yaml文件中的命名空间由<code>default</code>改为<code>cephfs</code></p></li><li><p>```Shell<br>cd /data/cephfs/csi<br>sed -i “s/namespace: default/namespace: cephfs/g” $(grep -rl “namespace: default” ./)<br>sed -i ‘/^kind: ServiceAccount/a\  namespace: cephfs’ $(grep -rl “^kind: ServiceAccount” ./)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   3. 将`csi-rbdplugin-provisioner.yaml` 和 `csi-rbdplugin.yaml` 中的 kms 部分配置注释掉</span><br><span class="line"></span><br><span class="line">   4. &gt;    \# - name: KMS_CONFIGMAP_NAME</span><br><span class="line">      &gt;</span><br><span class="line">      &gt; ​            \#   value: encryptionConfig</span><br><span class="line">      &gt;</span><br><span class="line">      &gt; </span><br><span class="line">      &gt;</span><br><span class="line">      &gt; \#- name: ceph-csi-encryption-kms-config</span><br><span class="line">      &gt;</span><br><span class="line">      &gt; ​        \#  configMap:</span><br><span class="line">      &gt;</span><br><span class="line">      &gt; ​        \#    name: ceph-csi-encryption-kms-config</span><br><span class="line">      &gt;</span><br><span class="line">      &gt; </span><br><span class="line"></span><br><span class="line">```Shell</span><br><span class="line"> #执行，安装csi组件</span><br><span class="line"> kubectl apply -f csi-config-map.yaml</span><br><span class="line"> kubectl apply -f csi-nodeplugin-rbac.yaml</span><br><span class="line"> kubectl apply -f csidriver.yaml</span><br><span class="line"> kubectl apply -f csi-provisioner-rbac.yaml</span><br><span class="line"> kubectl apply -f csi-rbdplugin-provisioner.yaml</span><br><span class="line"> kubectl apply -f csi-rbdplugin.yaml</span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="任务四：创建storageclass"><a href="#任务四：创建storageclass" class="headerlink" title="任务四：创建storageclass"></a>任务四：创建storageclass</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: storage.k8s.io/v1</span><br><span class="line">kind: StorageClass</span><br><span class="line">metadata:</span><br><span class="line">  annotations:</span><br><span class="line">    k8s.kuboard.cn/storageType: cephfs_provisioner</span><br><span class="line">  name: csi-rbd-sc</span><br><span class="line">provisioner: rbd.csi.ceph.com</span><br><span class="line">parameters:</span><br><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">fsName: cephfs <span class="comment">#ceph集群cephfs文件系统名称</span></span></span><br><span class="line">  clusterID: 79fd2206-39ca-4ec4-9cd2-96e065c6361e #ceph集群的fsid </span><br><span class="line">  pool: rbd-k8s #ceph中创建的存储池</span><br><span class="line">  imageFeatures: layering</span><br><span class="line">  csi.storage.k8s.io/provisioner-secret-name: csi-rbd-secret</span><br><span class="line">  csi.storage.k8s.io/provisioner-secret-namespace: cephfs</span><br><span class="line">  csi.storage.k8s.io/controller-expand-secret-name: csi-rbd-secret</span><br><span class="line">  csi.storage.k8s.io/controller-expand-secret-namespace: cephfs</span><br><span class="line">  csi.storage.k8s.io/node-stage-secret-name: csi-rbd-secret</span><br><span class="line">  csi.storage.k8s.io/node-stage-secret-namespace: cephfs</span><br><span class="line">  csi.storage.k8s.io/fstype: xfs</span><br><span class="line">reclaimPolicy: Delete</span><br><span class="line">volumeBindingMode: Immediate</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">allowVolumeExpansion: <span class="literal">true</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">mountOptions:</span></span><br><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">- discard</span></span><br><span class="line"> &#x27; &gt; storageclass.yaml</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">执行</span></span><br><span class="line">  kubectl apply -f storageclass.yaml</span><br></pre></td></tr></table></figure><h3 id="任务五：创建PVC"><a href="#任务五：创建PVC" class="headerlink" title="任务五：创建PVC"></a>任务五：创建PVC</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line">  name: rbd-pvc #PVC的名称</span><br><span class="line">  namespace: cephfs</span><br><span class="line">spec:</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 1Gi  #设置容量</span><br><span class="line">  storageClassName: csi-rbd-sc</span><br><span class="line">  &#x27; &gt; pvc.yaml</span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">执行</span></span><br><span class="line"> kubectl apply -f pvc.yaml</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看PVC是否创建成功</span></span><br><span class="line">kubectl get pvc -n cephfs</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看PV是否创建成功</span></span><br><span class="line">kubectl get pv -n cephfs</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看ceph集群中的cephfs_data存储池中是否创建了image</span></span><br><span class="line"> rbd ls -p cephfs_data</span><br></pre></td></tr></table></figure><h3 id="任务六：创建pod，进行测试验证"><a href="#任务六：创建pod，进行测试验证" class="headerlink" title="任务六：创建pod，进行测试验证"></a>任务六：创建pod，进行测试验证</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: csi-rbd-demo-pod</span><br><span class="line">  namespace: cephfs</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">    - name: web-server</span><br><span class="line">      image: nginx:latest</span><br><span class="line">      volumeMounts:</span><br><span class="line">        - name: mypvc</span><br><span class="line">          mountPath: /var/lib/www/html</span><br><span class="line">  volumes:</span><br><span class="line">    - name: mypvc</span><br><span class="line">      persistentVolumeClaim:</span><br><span class="line">        claimName: rbd-pvc  #对应的PVC名称</span><br><span class="line">        readOnly: false</span><br><span class="line">&#x27; &gt; pod.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">执行</span></span><br><span class="line"> kubectl apply -f pod.yaml</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">进入容器查看挂载信息</span></span><br><span class="line"> kubectl exec -it csi-rbd-demo-pod bash</span><br><span class="line"> lsblk -l|grep rbd</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;k8s集群对接ceph集群部署指南&quot;&gt;&lt;a href=&quot;#k8s集群对接ceph集群部署指南&quot; class=&quot;headerlink&quot; title=&quot;k8s集群对接ceph集群部署指南&quot;&gt;&lt;/a&gt;k8s集群对接ceph集群部署指南&lt;/h1&gt;&lt;h2 id=&quot;任务目标&quot;</summary>
      
    
    
    
    <category term="容器化" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/"/>
    
    <category term="k8s" scheme="https://marsperl.github.io/categories/%E5%AE%B9%E5%99%A8%E5%8C%96/k8s/"/>
    
    <category term="存储系统" scheme="https://marsperl.github.io/categories/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="ceph" scheme="https://marsperl.github.io/categories/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/ceph/"/>
    
    
    <category term="docker" scheme="https://marsperl.github.io/tags/docker/"/>
    
    <category term="k8s" scheme="https://marsperl.github.io/tags/k8s/"/>
    
    <category term="ceph" scheme="https://marsperl.github.io/tags/ceph/"/>
    
    <category term="共享存储" scheme="https://marsperl.github.io/tags/%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8/"/>
    
    <category term="ceph集群" scheme="https://marsperl.github.io/tags/ceph%E9%9B%86%E7%BE%A4/"/>
    
    <category term="容器云" scheme="https://marsperl.github.io/tags/%E5%AE%B9%E5%99%A8%E4%BA%91/"/>
    
    <category term="k8s对接ceph" scheme="https://marsperl.github.io/tags/k8s%E5%AF%B9%E6%8E%A5ceph/"/>
    
  </entry>
  
</feed>
